!function(e){function t(t){for(var n,i,u=t[0],s=t[1],c=t[2],f=0,d=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var s=r[u];0!==o[s]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={3:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=s;a.push([2407,0,1]),r()}({194:function(e,t,r){const n=r(963),{MAX_LENGTH:o,MAX_SAFE_INTEGER:a}=r(962),{re:i,t:u}=r(554),{compareIdentifiers:s}=r(2267);class c{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?i[u.LOOSE]:i[u.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),s(this.major,e.major)||s(this.minor,e.minor)||s(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return s(r,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return s(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=c},2258:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2523),t)},2259:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2531),t),o(r(2532),t),o(r(2533),t)},2260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(2560),a=(n=o)&&n.__esModule?n:{default:n};t.default={events:a.default.events,start:function(){a.default.initialize()}}},2261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=(n=R(regeneratorRuntime.mark((function e(t){var r,n,o=t.type;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(),e.next=3,r.invoke(w.BackgroundAction.FrameIds);case 3:if(!(n=e.sent)||!n[o]||0!==n[o].length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",n[o]);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),i=(o=R(regeneratorRuntime.mark((function e(){var t,r,n,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=N()).debug("[CheckoutPaypal] Content script initialized"),r=D(),e.next=5,(0,I.getCheckoutSetting)(O.checkoutSettings.iFrameOriginUrl);case 5:return n=e.sent,o=new URL(n),a=new g.HoneyCheckoutServer({transport:new x.FrameTransportServer({allowedOrigins:[o.origin]})}),i=new y.PayPalCheckoutClient({transport:new _.HoneyMessagingTransportClient({id:"Content <-> Paypal Relay"}),defaultTimeoutMilliseconds:P.default.messaging.clientTimeout,options:{log:t}}),u=new m.DiscoveryRelayServer({transport:new x.FrameTransportServer({allowedOrigins:[o.origin,P.default.allowedOrigin]})}),s=new h.ContentCoordinator({log:t,backgroundClient:r,honeyCheckoutServer:a,paypalCheckoutClient:i,discoveryRelayServer:u,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"}),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)});t.getBackgroundClient=D;var u=T(r(6)),s=T(r(199)),c=T(r(8)),l=T(r(12)),f=r(2562),d=T(r(10)),p=T(r(2260)),v=r(2563),h=r(2565),g=r(2366),y=r(2574),m=r(2367),b=r(2575),w=r(2368),E=r(2576),_=r(2370),x=r(2586),S=r(866),O=r(483),I=r(226),P=T(r(2587));function T(e){return e&&e.__esModule?e:{default:e}}function R(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}function k(e){var t=e.type,r=e.tabId,n=e.frameId,o=e.discoveryService,a=e.timeout,i=e.observable,u=!1;o.discoveryStatus({type:t,tabId:r,frameId:n})!==E.DiscoveryStatus.Pending&&o.discover({type:t,tabId:r,frameId:n,timeout:a}).then((function(e){var t=e.subscribe((function(e){var o=e.status,a=e.message,s=e.handle;if(o===E.DiscoveryStatus.Discovered){if(u)return;u=!0,t.dispose(),i.next({tabId:r,frameId:n,origin:a,target:s,status:E.DiscoveryStatus.Discovered})}o===E.DiscoveryStatus.Error&&(d.default.warn("discovery service: discover: error: "+a+" tabId="+r+" frameId="+n),t.dispose())}))}))}function C(e){var t=e.timeout;d.default.info("discovery service: discover: paypal: start");var r=p.default.events.paypalCheckoutFrameDetected(),n=U();return u.default.addListener(f.honeyMessagesEvents.PAYPAL_IFRAME_DETECTED,(function(e,o){var a=o.tabId,i=o.frameId;d.default.debug("discovery service: discover: paypal: honeyMessages: returned frames from background",{frameId:i,tabId:a}),k({type:E.FrameIdKey.PayPal,tabId:a,frameId:i,discoveryService:n,timeout:t,observable:r}),s.default.get({url:"https://paypal.com",name:"ts_c"}).then((function(e){if(e&&e.value){var t=l.default.parseQuery(e.value),r={paypalVisitorId:t.vr,paypalSessionId:t.vt};c.default.sendEvent("eca000103",r)}})).catch((function(e){c.default.sendEvent("eca000103",{paypalVisitorId:null,paypalSessionId:null}),N().debug("[CheckoutPaypal] Failed to track PayPal cookies: "+e.message)}))})),M().then((function(e){d.default.debug("discovery service: discover: paypal: returned frames from background",e),e.forEach((function(e){var o=e.frameId,a=e.tabId;k({type:E.FrameIdKey.PayPal,tabId:a,frameId:o,discoveryService:n,timeout:t,observable:r})}))})),r}function M(){return a({type:E.FrameIdKey.PayPal})}function L(){return a({type:E.FrameIdKey.Honey})}var A=void 0;function N(){return A||(A=v.LoggingDriverExtension.createService({honeyLogger:d.default})),A}var j=void 0;function D(){var e,t,r;return j||(e=v.LoggingDriverExtension.createService({honeyLogger:d.default}),t=new b.BackgroundClient({transport:new _.HoneyMessagingTransportClient({id:"Content <-> Background"}),defaultTimeoutMilliseconds:P.default.messaging.backgroundTimeout,options:{log:e}}),r=_.HoneyMessagingTransportClient.makeTransportInterop({honeyMessages:u.default,options:{ignoreResponse:!1,background:!0}}),t.connect(r),j=t),j}var F=void 0;function U(){var e,t,r;return F||(e=N(),t=D(),r=new m.DiscoveryRelayServer({transport:new _.HoneyMessagingTransportServer({target:u.default})}),F=new E.DiscoveryService({log:e,backgroundClient:t,discoveryRelayServer:r,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"})),F}t.default={start:function(){U().start(),C({timeout:P.default.discovery.paypalDiscoveryTimeout})},initialize:i,getBackgroundClient:D,getDiscoveryService:U,discoverFrame:k,getPayPalFrames:M,getHoneyFrames:L,startPayPalDiscovery:C,startHoneyDiscovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout;if(!t)throw new Error("discovery service: discover: honey: timeout required");d.default.info("discovery service: discover: honey: start");var r=new S.Observable({value:void 0,replay:!1}),n=U();return L().then((function(e){d.default.debug("discovery service: discover: honey: returned frames from background",e),e.forEach((function(e){var o=e.frameId,a=e.tabId;k({type:E.FrameIdKey.Honey,tabId:a,frameId:o,discoveryService:n,timeout:t,observable:r})}))})),new Promise((function(e,n){var o=setTimeout((function(){n(new Error("discovery service: discover: honey: timeout error "+t+" ms"))}),t),a=r.subscribe((function(t){var r=t.tabId,i=t.frameId,u=t.message,s=t.status,c=t.origin,l=t.handle;if(s===E.DiscoveryStatus.Error)return clearTimeout(o),a.dispose(),void n(new Error(u));s===E.DiscoveryStatus.Discovered&&(clearTimeout(o),a.dispose(),e({tabId:r,frameId:i,message:u,status:s,origin:c,handle:l}))}))}))}}},2262:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=i(n),a=i(r(1));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.container;return o.default.createElement(n.Fragment,null,o.default.createElement("div",{style:{position:"fixed",top:16,zIndex:"2147483647",right:16,display:"flex"}},t))};t.default=u,u.propTypes={container:a.default.node},u.defaultProps={container:void 0}},2263:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),a=l(o),i=l(r(1)),u=r(5),s=l(r(10)),c=r(19);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hasError:!1},r}var r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidCatch",value:(r=regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.props.sendSdataEvent,s.default.error(t),r(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=r.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);f.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},f.defaultProps={children:void 0};t.default=(0,u.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipCardErrorEvent)(t))}}}))(f)},2264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=g(r(0)),a=g(r(1)),i=r(2),u=g(r(3)),s=g(r(4)),c=r(491),l=g(r(122)),f=g(r(121)),d=g(r(382)),p=g(r(52)),v=g(r(944)),h=g(r(542));function g(e){return e&&e.__esModule?e:{default:e}}var y=v.default.BUTTON_STATUS,m=v.default.BUTTON_COPY_STATUS,b=v.default.getButtonChoices,w={classes:a.default.object.isRequired,isLaunchpad:a.default.bool},E=function(e){var t=e.classes,r=e.isLaunchpad,a=(0,h.default)(),u=a.thoughts,v=a.status,g=a.comments,w=a.validationValue,E=a.handleSetComments,_=a.handleSetThoughts,x=a.send,S=m[v]||s.default.getMessage("Send"),O=y[v]||"",I=(0,l.default)(),P=n(I,1)[0]===c.TIPS_EXP_ENUM.thumbs_feedback,T=b(r,P).map((function(e){var t=e.value,r=e.copy;return o.default.createElement(i.RadioButton,{key:"".concat("radio-",t),value:t,copy:r})})),R="failed"===v,k={marginBottom:R?"8px":"16px",textAlign:"center"};return o.default.createElement(d.default,null,o.default.createElement("div",{className:t.main},o.default.createElement(f.default,{component:"div",variant:"title1",style:k},!r&&P?s.default.getMessage("We_want_to_hear_from_you_Whats_up_Q"):s.default.getMessage("What_are_your_thoughts_Q")),R&&o.default.createElement(f.default,{component:"div",variant:"body2",style:{color:i.Colors.red600,marginBottom:"8px"}},w),o.default.createElement(i.RadioGroup,{onChange:_,group:"paymentAmount",selectedValue:u},T),o.default.createElement("div",{style:{marginTop:"14px"}},o.default.createElement(i.FormInput,{size:88,id:"forminput",label:s.default.getMessage("Comments_or_suggestions"),value:g,onChange:E})),!r&&P&&o.default.createElement(f.default,{component:"div",variant:"body2",style:{color:i.Colors.grey600,marginBottom:"18px"}},s.default.getMessageAndReplace("To_see_Tips_less_often_go_to_your_settings_GEARICON",{GEARICON:o.default.createElement(p.default,{icon:"setting-stroke-16",color:i.Colors.grey600,style:{display:"inline-flex",verticalAlign:"bottom"}})})),o.default.createElement(i.Button,{"aria-label":"Save Feedback",ariaLabel:"Save Feedback",id:"SaveFeedback",size:40,buttonType:"primary",copy:S,isFlexible:!0,status:O,onClick:function(){return x(r,P)}})))};E.propTypes=w,E.defaultProps={isLaunchpad:!1},t.default=(0,u.default)({main:{padding:"24px"}})(E)},2265:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=x(o),i=x(r(1)),u=r(5),s=r(2),c=x(r(486)),l=x(r(929)),f=x(r(547)),d=x(r(4)),p=x(r(13)),v=x(r(70)),h=r(14),g=r(350),y=r(730),m=x(r(2618)),b=r(913),w=(r(541),r(18)),E=x(r(2382)),_=x(r(2619));function x(e){return e&&e.__esModule?e:{default:e}}var S=function(e){var t=e.onClick,r=e.showFeedback,i=e.onSettingsClick,x=(0,u.useDispatch)(),S=(0,o.useState)(!1),O=n(S,2),I=O[0],P=O[1],T=(0,o.useState)(!1),R=n(T,2),k=R[0],C=R[1],M=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),L=n(M,2),A=L[0],N=L[1],j=(0,o.useState)("https://dash.joinhoney.com/product-catalog/product?productId={PRODUCT_ID}"),D=n(j,2),F=D[0],U=D[1],G=(0,o.useState)(!1),B=n(G,2),H=B[0],$=B[1],V=(0,_.default)(),q=(0,E.default)(),z=q.id,W=q.currentProduct;(0,o.useEffect)((function(){var e,t;(e=regeneratorRuntime.mark((function e(){var t,r,n,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.getTipsConfig();case 2:return t=e.sent,r=t.hasExtraSnoozeSettings,n=void 0!==r&&r,o=t.links,a=void 0===o?{}:o,e.next=9,p.default.getInfo();case 9:i=e.sent,u=i.isLoggedIn,s=void 0!==u&&u,n&&P(!0),C(s),N(a.featureSettings||A),U(a.debugProduct||F);case 16:case"end":return e.stop()}}),e,this)})),t=function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))},function(){return t.apply(this,arguments)})()}),[A]);var Y=[{copy:d.default.getMessage("Hide_on_this_page"),key:"snooze_page",onClick:function(){x((0,g.setBadgeSnooze)()),$(!1)}},{copy:d.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){x((0,b.setTeaserSnoozeOneDay)()),$(!1)}}],X=k?{copy:d.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){x((0,y.setBadgeSnoozeAllLoggedIn)()),$(!1),window.open(A)}}:{copy:d.default.getMessage("Snooze_on_all_sites"),key:"snooze_all",onClick:function(){x((0,b.setTeaserSnoozeAll)()),$(!1)}};I&&Y.push({copy:d.default.getMessage("Snooze_on_this_site"),key:"snooze_store",onClick:function(){x((0,b.setTeaserSnoozeOneStore)()),$(!1)}},X);(0,w.useCurrentStore)();var K=(0,w.useCurrentTipIds)()||[],Q=(0,u.useSelector)((0,h.selectCategoryIdsByTipInstanceIds)(K))||{};Object.values(Q);if(r&&"function"==typeof r){Y.push({copy:d.default.getMessage("Leave_feedback_LOWER"),key:"leave_feedback",onClick:function(){r(),$(!1)}})}return V&&Y.push({copy:d.default.getMessage("Debug_product"),key:"debug_product",onClick:function(){x((0,m.default)({containerId:z,productId:W,debugProductLink:F}))},icon:a.default.createElement(s.Icon,{name:"bug",type:"stroke",color:s.Colors.grey800,style:{marginRight:"5px"}})}),a.default.createElement(o.Fragment,null,a.default.createElement(l.default,{"aria-expanded":H,"aria-label":"Honey Settings",onClick:function(){"function"==typeof i&&i(),$(!H),x((0,g.setBadgeClickSettings)())}}),H&&a.default.createElement(f.default,{classes:{main:{alignSelf:"end",whiteSpace:"nowrap",marginTop:"40px",right:"47px",width:"unset",position:"absolute",top:"0px"}},options:Y}),a.default.createElement("span",null,a.default.createElement(c.default,{onClick:t,"aria-label":"Close Honey"})))};S.propTypes={onClick:i.default.func,showFeedback:i.default.func,onSettingsClick:i.default.func},S.defaultProps={onClick:null,showFeedback:null,onSettingsClick:function(){}},t.default=S},2266:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=d(o),i=d(r(1)),u=d(r(383)),s=r(5),c=r(18),l=r(480),f=r(237);function d(e){return e&&e.__esModule?e:{default:e}}var p={tipInstanceId:i.default.string.isRequired,isFullyExpandedPdp:i.default.bool,children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node])},v={isFullyExpandedPdp:!1,children:a.default.createElement(o.Fragment,null)},h=function(e){var t=e.tipInstanceId,r=e.children,i=e.isFullyExpandedPdp,d=(0,s.useDispatch)(),p=(0,o.useCallback)(d,[]),v=(0,f.useContainerOpen)(),h=n(v,1)[0],g=(0,c.useTipInstanceExpanded)(t),y=n(g,1)[0],m=(0,o.useRef)(),b=(0,o.useState)("100%"),w=n(b,2),E=w[0],_=w[1],x=(0,o.useRef)(!0),S=(0,o.useRef)(null);(0,o.useEffect)((function(){return function(){x.current=!1,clearTimeout(S.current)}}),[]),(0,o.useEffect)((function(){!i&&y&&p((0,l.tipShown)(t))}),[y,i,t,p,h]),(0,o.useLayoutEffect)((function(){if(m.current&&h&&x.current){var e=m.current.clientHeight;e>0&&_(e/2)}}),[h]);var O=function(){S.current&&(clearTimeout(S.current),S.current=null)};(0,o.useEffect)((function(){return function(){O()}}),[]);var I=function(){d((0,l.tipShown)(t))},P=i&&a.default.createElement(u.default,{onEnter:function(){S.current=setTimeout(I,1e3)},onLeave:O,topOffset:0,bottomOffset:E},a.default.createElement("div",null,r))||null,T=a.default.createElement(o.Fragment,null," ",r," ");return a.default.createElement("div",{ref:m},i?P:T)};h.propTypes=p,h.defaultProps=v,t.default=h},2267:function(e,t){const r=/^[0-9]+$/,n=(e,t)=>{const n=r.test(e),o=r.test(t);return n&&o&&(e=+e,t=+t),e===t?0:n&&!o?-1:o&&!n?1:e<t?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},2268:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>0===n(e,t,r)},2269:function(e,t,r){const n=r(194);e.exports=(e,t,r)=>{const o=new n(e,r),a=new n(t,r);return o.compare(a)||o.compareBuild(a)}},2270:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>n(e,t,r)<0},2271:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>n(e,t,r)>=0},2272:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>n(e,t,r)<=0},2273:function(e,t,r){const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}s("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(e){const t=this.options.loose?a[i.COMPARATORLOOSE]:a[i.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(s("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new l(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new l(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,i=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=u(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=u(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||a&&i||s||c}}e.exports=o;const{re:a,t:i}=r(554),u=r(2388),s=r(963),c=r(194),l=r(299)},2274:function(e,t,r){const n=r(194),o=r(2273),{ANY:a}=o,i=r(299),u=r(2389),s=r(964),c=r(2270),l=r(2272),f=r(2271);e.exports=(e,t,r,d)=>{let p,v,h,g,y;switch(e=new n(e,d),t=new i(t,d),r){case">":p=s,v=l,h=c,g=">",y=">=";break;case"<":p=c,v=f,h=s,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(e,t,d))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let i=null,u=null;if(n.forEach(e=>{e.semver===a&&(e=new o(">=0.0.0")),i=i||e,u=u||e,p(e.semver,i.semver,d)?i=e:h(e.semver,u.semver,d)&&(u=e)}),i.operator===g||i.operator===y)return!1;if((!u.operator||u.operator===g)&&v(e,u.semver))return!1;if(u.operator===y&&h(e,u.semver))return!1}return!0}},2363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(n=b(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getInfo();case 2:if(r=e.sent,(n=r.id)&&t){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,Promise.all([(0,y.isObservationFeatureEnabled)(),x(n,t)]);case 9:return o=e.sent,a=u(o,2),i=a[0],s=a[1],e.abrupt("return",i&&s&&s.length>0);case 16:return e.prev=16,e.t0=e.catch(6),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(e){return n.apply(this,arguments)}),c=(o=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:if((0,y.isObservationFeatureEnabled)()){e.next=5;break}return e.abrupt("return");case 5:new h.CheckoutObservationContentManager({messages:d.default,executeScript:v.default,scriptPath:"pageScripts/checkoutObservation.js",allowedOrigins:[window.location.origin],store:w}).start(),d.default.send(g.MESSAGE_ACTIONS.ENABLE_BG_SERVER,{storeId:w.storeId},{background:!0}).catch((function(e){f.default.debug("[CheckoutObservation] Failed to start process: "+JSON.stringify(e))})),S=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),l=(a=b(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.isObservationFeatureEnabled)();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:d.default.addListener("stores:pageview",function(){var e=b(regeneratorRuntime.mark((function e(r){var n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.id,o=a.sessionId,w={storeId:n,sessionId:o,pageTitle:E(),pageURL:_()},e.next=4,s(n);case 4:e.sent&&c();case 6:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}()),d.default.addListener("offers:action",function(){var e=b(regeneratorRuntime.mark((function e(r){var n,o,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.action,o=u.success,a=void 0,"object"===(void 0===o?"undefined":i(o))&&null!==o&&(a=o.storeId),e.t0=n,e.next="offerActivated"===e.t0?6:11;break;case 6:return e.next=8,s(a);case 8:return e.sent&&c(),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),f=m(r(10)),d=m(r(6)),p=m(r(13)),v=m(r(294)),h=r(2518),g=r(958),y=r(2558);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var w={};function E(){try{return document.title}catch(e){return null}}function _(){try{return window.location.href}catch(e){return null}}function x(e,t){return d.default.send("offers:action",{action:"getProductOfferActivations",data:{userId:e,storeId:t,useCache:!0}},{background:!0})}var S=!1;t.default={start:l}},2364:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2520),t),o(r(2521),t),o(r(2522),t)},2365:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var n=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=n},2366:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyCheckoutServer=t.HoneyCheckoutAction=void 0;var a=r(553);!function(e){e.PayPalCreateOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/create",e.PayPalApproveOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/approve",e.PayPalCancelOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/cancel",e.PayPalErrorOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/error",e.PayPalVersion="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/version",e.PayPalConfig="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/config",e.HoneyCheckoutIFrameReady="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/ready",e.HoneyCheckoutIFrameComplete="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/complete"}(t.HoneyCheckoutAction||(t.HoneyCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.HoneyCheckoutServer=i},2367:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DiscoveryRelayServer=t.DiscoveryRelayAction=void 0;var a=r(553);!function(e){e.DiscoveredPayPal="9ac7ac40-5417-4a34-a35c-acb253c4bb47/checkout/relay/discovery/paypal",e.DiscoveredHoney="9ac7ac40-5417-4a34-a35c-acb253c4bb47/checkout/relay/discovery/honey",e.Deployed="9ac7ac40-5417-4a34-a35c-acb253c4bb47/deployed"}(t.DiscoveryRelayAction||(t.DiscoveryRelayAction={}));var i=function(e){function t(t){var r=t.transport;return e.call(this,{transport:r})||this}return o(t,e),t}(a.Server);t.DiscoveryRelayServer=i},2368:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundServer=t.BackgroundAction=void 0;var a=r(553);!function(e){e.FrameIds="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/frameIds",e.FrameIdsRemove="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/frameIdsRemove",e.ExecuteScript="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/executeScript",e.SendMessage="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/sendMessage",e.RelayReady="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/relayReady"}(t.BackgroundAction||(t.BackgroundAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.BackgroundServer=i},2369:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=t.FrameIdKey=void 0;var o,a=r(866);!function(e){e.PayPal="paypal",e.Honey="honey"}(o=t.FrameIdKey||(t.FrameIdKey={}));var i=function(){function e(e){var t=e.paypalRequestObserver,r=e.honeyRequestObserver,n=e.paypalURLPatterns,o=e.honeyURLPatterns;if(this.frameIdIndex={},this.paypalFrameObservation=new a.Observable({value:{},replay:!1}),this.honeyFrameObservation=new a.Observable({value:{},replay:!1}),!t)throw new Error("a paypalRequestObserver must be provided");if(!r)throw new Error("a honeyRequestObserver must be provided");if(!n)throw new Error("an array of paypalURLPatterns must be provided");if(!o)throw new Error("an array of honeyURLPatterns must be provided");this.expiresAfterSeconds=3600,this.paypalRequestObserver=t,this.honeyRequestObserver=r,this.paypalURLPatterns=n,this.honeyURLPatterns=o}return e.prototype.start=function(){var e=this;this.disposeSubscriptions();var t=this.paypalRequestObserver.completedRequest.subscribe((function(t){e.onPayPalObservation(t)})),r=this.honeyRequestObserver.completedRequest.subscribe((function(t){e.onHoneyObservation(t)}));this.paypalObserverSubscription=t,this.honeyObserverSubscription=r,this.paypalRequestObserver.start({urls:this.paypalURLPatterns}),this.honeyRequestObserver.start({urls:this.honeyURLPatterns})},e.prototype.stop=function(){this.disposeSubscriptions()},e.prototype.disposeSubscriptions=function(){this.honeyObserverSubscription&&(this.honeyObserverSubscription.dispose(),this.honeyObserverSubscription=void 0),this.paypalObserverSubscription&&(this.paypalObserverSubscription.dispose(),this.paypalObserverSubscription=void 0)},e.prototype.setStoreId=function(e){if(this.storeId==e)return Promise.resolve();var t=this.storeId;return this.storeId=e,this.onStoreIdChanged({toStoreId:e,fromStoreId:t})},e.prototype.onStoreIdChanged=function(e){e.toStoreId,e.fromStoreId;return Promise.resolve()},e.prototype.resetFrameIdCache=function(e){var t=void 0===e?{}:e,r=t.honey,n=t.paypal;if(r||n){if(r&&r.tabId&&this.frameIdIndex[r.tabId])delete this.frameIdIndex[r.tabId].frames[o.Honey];if(n&&n.tabId&&this.frameIdIndex[n.tabId])delete this.frameIdIndex[n.tabId].frames[o.PayPal]}else this.frameIdIndex={}},e.prototype.onPayPalObservation=function(e){var t=this.processUrlObservation({key:o.PayPal,event:e});this.paypalFrameObservation.next(t)},e.prototype.onHoneyObservation=function(e){var t=this.processUrlObservation({key:o.Honey,event:e});this.honeyFrameObservation.next(t)},e.prototype.processUrlObservation=function(e){var t,r,a=e.key,i=e.event,u=new URL(i.beforeRequest.url),s=i.beforeRequest.tabId,c=i.beforeRequest.frameId,l=this.frameIdIndex[s]||{},f=l.frames||((t={})[o.PayPal]={},t[o.Honey]={},t),d={frameId:c,origin:u.origin,tabId:s},p=f[a]||{},v=n(n({},p),((r={})[c]=d,r));return f[a]=v,l.expires=Date.now()+1e3*this.expiresAfterSeconds,l.frames=f,this.frameIdIndex[s]=l,this.invalidateExpiredItems(),d},e.prototype.invalidateExpiredItems=function(){var e=this;return new Promise((function(t){setTimeout((function(){var r=Date.now(),n=e.frameIdIndex;Object.keys(n).forEach((function(t){n[t].expires<r&&delete e.frameIdIndex[t]})),t()}),0)}))},e.prototype.getFrameIds=function(e,t){var r=this.frameIdIndex[e],n=[];if(!r)return n;var o=r.frames;if(!o)return n;var a=o[t]||{};return Object.keys(a).map((function(e){return a[e]})).filter((function(e){return null!=e}))},e}();t.URLObservationService=i},2370:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2583),t),o(r(2584),t),o(r(2585),t)},2371:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var n,o=r(2372),a=(n=o)&&n.__esModule?n:{default:n};var i=t.types={checkoutCartContentsDetected:"checkout:cartContentsDetected",checkoutInit:"checkout:init",checkoutOpenFromFS:"checkout:openFromFS",checkoutRouteChange:"checkout:routeChange",checkoutUserUpdate:"checkout:userUpdate",extensionActivateStoreGold:"checkout:extensionActivateStoreGold",extensionAuthFetch:"checkout:extensionAuthFetch",extensionDeleteBgLocalStorageItem:"checkout:extensionDeleteBgLocalStorageItem",extensionDeleteLru:"checkout:extensionDeleteLru",extensionExperimentsGetVariant:"checkout:extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"checkout:extensionExperimentsTrackImpression",extensionGetBgLocalStorageItem:"checkout:extensionGetBgLocalStorageItem",extensionGetContentUILocation:"checkout:extensionGetContentUILocation",extensionGetContentUIVisible:"checkout:extensionGetContentUIVisible",extensionGetCurrentPageTypes:"checkout:extensionGetCurrentPageTypes",extensionGetCurrentStore:"checkout:extensionGetCurrentStore",extensionGetI18nMessage:"checkout:extensionGetI18nMessage",extensionGetI18nMessages:"checkout:extensionGetI18nMessages",extensionGetIsInExperimentPopulation:"checkout:extensionGetIsInExperimentPopulation",extensionGetLru:"checkout:extensionGetLru",extensionGetUserInfo:"checkout:extensionGetUserInfo",extensionGetUserOffers:"checkout:extensionGetUserOffers",extensionGQLMutation:"checkout:extensionGQLMutation",extensionGQLQuery:"checkout:extensionGQLQuery",extensionHideContentUI:"checkout:extensionHideContentUI",extensionInitPaypalCoordinator:"checkout:extensionInitPaypalCoordinator",extensionNativeFetch:"checkout:extensionNativeFetch",extensionOpenContentUILocation:"checkout:extensionOpenContentUILocation",extensionOpenLoginPrompt:"checkout:extensionOpenLoginPrompt",extensionPaypalCoordinatorReady:"checkout:extensionPaypalCoordinatorReady",extensionSetBgLocalStorageItem:"checkout:extensionSetBgLocalStorageItem",extensionSetLru:"checkout:extensionSetLru",extensionShowContentUI:"checkout:extensionShowContentUI",parentRemoveIFrame:"checkout:parentRemoveIFrame",parentRemoveIFrameAttribute:"checkout:parentRemoveIFrameAttribute",parentSendSDataEvent:"checkout:parentSendSDataEvent",parentSetIFrameAttribute:"checkout:parentSetIFrameAttribute",parentUpdateStyles:"checkout:parentUpdateStyles"},u=(0,a.default)({types:i,enableLogging:!1,clientName:"extension"});t.default=u},2372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(2685);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,s,"next",e)}function s(e){i(a,n,o,u,s,"throw",e)}u(void 0)}))}}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=e.enableLogging,a=e.clientName||"unknown",i=e.maxResponseTime||1e4,s=null,c=null,l=null;function f(){var e;r&&(e=console).log.apply(e,arguments)}function d(e,r){if(t[e]){var n=t[e].indexOf(r);n>-1&&t[e].splice(n,n+1)}}function p(e,r){return t[e]?t[e].push(r):t[e]=[r],function(){return d(e,r)}}function v(e){return h.apply(this,arguments)}function h(){return(h=u(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[r.data.type]){e.next=5;break}if(!l){e.next=4;break}if(l(r.origin)){e.next=4;break}return e.abrupt("return");case 4:t[r.data.type].forEach((function(e){e(r.data)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.postMessage(e,c)}function y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g({type:e,messageId:t,data:r,isError:Boolean(n),errorMessage:n})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.v4)();return f("postMessenger: ".concat(a," sending request type '").concat(e,"' to '").concat(c,"':"),t),y(e,r,t),new Promise((function(t,n){var o=!1,u=p(e,(function(a){a.messageId===r&&(o=!0,u(),a.isError?n(new Error("postMessenger: Responder for request type '".concat(e,"' to target '").concat(c,"' failed with message: \"").concat(a.errorMessage,'"'))):t(a.data))}));setTimeout((function(){o||(n(new Error("postMessenger: Time out waiting for target '".concat(c,"' to respond to request from ").concat(a,", type '").concat(e,"'"))),u())}),i)}))}function b(e){var t=[];return Object.entries(e).forEach((function(e){var r=o(e,2),n=r[0],i=r[1],s=p(n,function(){var e=u(regeneratorRuntime.mark((function e(t){var r,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.messageId,o=t.data,e.prev=1,e.next=4,i(o);case 4:u=e.sent,f("postMessenger: ".concat(a," responding to request type '").concat(n,"' from target '").concat(c,"':"),u),y(n,r,u),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),y(n,r,{},e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());t.push(s)})),function(){t.forEach((function(e){return e()}))}}function w(e,t){s=e,c=t}function E(e){l=e,window.addEventListener("message",v)}function _(){window.removeEventListener("message",v)}return{beginListening:E,stopListening:_,setTarget:w,request:m,addListener:p,removeListener:d,bindResponders:b,types:e.types}};t.default=s},2374:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a,i,u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(n=L(regeneratorRuntime.mark((function e(t){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.waitForElement(t,{timeout:o});case 2:return r=e.sent,n=j(r.text()),e.abrupt("return",m.default.cleanPrice(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),c=(o=L(regeneratorRuntime.mark((function e(t,r,n){var o,a,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.MutationObserver){e.next=2;break}return e.abrupt("return");case 2:return o=new MutationObserver(L(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return r=e.sent,e.next=5,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 5:if(!e.sent){e.next=10;break}return o=_.default.getCurrent(),e.next=10,k.default.request(R.types.giftCardsCartPriceChange,{cartPrice:r,tabId:o.id,prioritized:n,storeId:t.id,storeName:t.name});case 10:case"end":return e.stop()}}),e,u)})))),e.next=5,m.default.waitForElement(r,{timeout:3e3});case 5:return e.prev=5,e.next=8,T.default.getFeatureFlag("gift_card_deals_observe_body_for_total");case 8:a=e.sent,i=a?document.body:document.querySelector(r),o.observe(i,{characterData:!0,attributes:!1,childList:!0,subtree:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),g.default.error("Error attaching mutation observer for store "+t.id+" with selector "+r);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t,r){return o.apply(this,arguments)}),l=(a=L(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([I.default.getReminder(t),y.default.get("honey-pay-now:gift-card-deal-reminder:"+t).catch((function(){return{}}))]);case 2:return r=e.sent,n=u(r,2),o=n[0],a=n[1].isGiftCardTipEngaged,e.abrupt("return",!(!o&&!a));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),f=(i=L(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.default.getCurrent(),e.next=3,l(t.id);case 3:return o=e.sent,e.next=6,k.default.request(R.types.giftCardsFindSavingsClosed,{cartPrice:r,tabId:n.id,prioritized:!0,storeId:t.id,storeName:t.name,isReminderSet:o});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)});t.getCartPrice=D;var d=M(r(0)),p=M(r(49)),v=M(r(239)),h=M(r(6)),g=M(r(10)),y=M(r(24)),m=M(r(12)),b=M(r(17)),w=M(r(13)),E=M(r(11)),_=M(r(22)),x=M(r(32)),S=M(r(4)),O=M(r(2594)),I=M(r(949)),P=r(496),T=M(r(64)),R=r(2375),k=M(R),C=M(r(2595));function M(e){return e&&e.__esModule?e:{default:e}}function L(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var A,N=/[\d+][,.\d+]+/;function j(e){var t=e&&e.match(N);if(t)return t[0]}function D(e){return s(e.metadata.honeyPayCartPriceSelector)}function F(e){[].forEach((function(t){return h.default.send("honey-pay-now:action:"+t,{action:P.HONEY_PAY_NOW_MESSAGES.SET_CART_PRICE,data:{cartPrice:e}},{background:!0})}))}function U(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=document.querySelector("#"+e);if(!n){(n=document.createElement("div")).id=e,n.style.cssText=r;var o=document.querySelector(t);o.appendChild(n)}return n}("honeyPayNowContainer");p.default.render(d.default.createElement(C.default,{data:e}),t)}function G(e){var t=e.allPageTypes;return O.default.isPaymentsViewPrioritized(t)}h.default.addListener("current:product",(A=L(regeneratorRuntime.mark((function e(t,r){var n,o,a,i,u,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.data,e.next=3,_.default.getCurrent();case 3:o=e.sent,a=o.id,i=n.partialObservation,u=i.price,s=i.url,c=n.productId,l=(0,v.default)(u).value(),y.default.set("honey-pay-now:product:"+s+":"+a,{productPrice:l,productId:c});case 8:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return A.apply(this,arguments)})),h.default.addListener("honey-pay-now:action:ui",(function(e,t){switch(t&&t.action){case P.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_CARD_VISIBILITY:return b.default.open({pathname:"/honey-pay-now-card",query:{},state:{cardData:t.data.cardData},force:!0,feature:"honey-pay-now-card",surface:"popup"});case P.HONEY_PAY_NOW_MESSAGES.OPEN_PAY_NOW_AUTOPOP:return b.default.open({pathname:"/honey-pay-now-autopop",query:{},state:t.data,force:!0,feature:"honey-pay-now-autopop",surface:"popup"});default:throw new InvalidParametersError("Invalid action")}})),function(){var e=this;Promise.all([new Promise((function(e){k.default.addListener(R.types.giftCardsReady,(function(){return e()}))})),new Promise((function(e){h.default.addListener("find-savings:closed",(function(){return e()}))}))]).then(L(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:if((r=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,D(r);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,f(r,n);case 16:case"end":return e.stop()}}),t,e)})))).catch((function(){return""}))}(),function(){var e=this;h.default.addListener("find-savings:complete",L(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:if((r=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,D(r);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,f(r,n);case 16:case"end":return e.stop()}}),t,e)}))))}();var B,H=0;h.default.addListener("pageDetected:PAYMENTS",(B=L(regeneratorRuntime.mark((function e(t,r){var n,o,a,i,u,s,f,d,p=r.data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Date.now())-H<5e3)){e.next=5;break}return e.abrupt("return");case 5:H=n;case 6:return e.next=8,E.default.getCurrent();case 8:if((o=e.sent).id){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,D(o);case 13:if(a=e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 18:if(!e.sent){e.next=38;break}return e.next=22,G(p);case 22:return i=e.sent,e.next=25,x.default.getDeviceId();case 25:return u=e.sent,e.next=28,l(o.id);case 28:return s=e.sent,e.next=31,S.default.getUILanguage();case 31:return f=e.sent,e.next=34,w.default.getInfo();case 34:d=e.sent,F(a),c(o,o.metadata.honeyPayCartPriceSelector,i);try{U({storeId:o.id,deviceId:u,browser:"ch",extVersion:"14.0.0",cartPrice:a,prioritized:i,isReminderSet:s,language:f,user:d})}catch(e){g.default.error("Error loading Honey Pay iframe: "+e)}case 38:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return B.apply(this,arguments)})),t.default={}},2375:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var n,o=r(2372),a=(n=o)&&n.__esModule?n:{default:n};var i=t.types={extensionAuth:"extensionAuth",extensionRemoveIFrame:"extensionRemoveIFrame",extensionSendSDataEvent:"extensionSendSDataEvent",extensionUpdateStyles:"extensionUpdateStyles",extensionExperimentsGetVariant:"extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"extensionExperimentsTrackImpression",extensionGetUserABGroup:"extensionGetUserABGroup",extensionGetI18nCountryCode:"extensionGetI18nCountryCode",extensionGetI18nMessage:"extensionGetI18nMessage",extensionSetGiftCardsEnabledForUser:"extensionSetGiftCardsEnabledForUser",extensionOpenLoginPrompt:"extensionOpenLoginPrompt",extensionHideContentUI:"extensionHideContentUI",extensionGetCartPrice:"extensionGetCartPrice",extensionSetIFrameAttribute:"extensionSetIFrameAttribute",extensionRemoveIFrameAttribute:"extensionRemoveIFrameAttribute",extensionSetHoneyStorageItem:"extensionSetHoneyStorageItem",extensionGetHoneyStorageItem:"extensionGetHoneyStorageItem",extensionRemoveHoneyStorageItem:"extensionRemoveHoneyStorageItem",extensionSetWindowLocalStorageItem:"extensionSetWindowLocalStorageItem",extensionGetWindowLocalStorageItem:"extensionGetWindowLocalStorageItem",extensionRemoveWindowLocalStorageItem:"extensionRemoveWindowLocalStorageItem",extensionGQLQuery:"extensionGQLQuery",extensionGQLMutation:"extensionGQLMutation",extensionOpenGiftCardDealModal:"extensionOpenGiftCardDealModal",giftCardsInit:"giftCardsInit",giftCardsReady:"giftCardsReady",giftCardsUserUpdate:"giftCardsUserUpdate",giftCardsCartPriceChange:"giftCardsCartPriceChange",giftCardsUserLoggedIn:"giftCardsUserLoggedIn",giftCardsFindSavingsClosed:"giftCardsFindSavingsClosed",extensionSetIsMinimized:"extensionSetIsMinimized",giftCardsSetIsMinimized:"giftCardsSetIsMinimized"},u=(0,a.default)({types:i,enableLogging:!1,clientName:"extension"});t.default=u},2378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=(n=G(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.sendEvent("tip004034",t);case 2:return e.next=4,(0,O.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:r=e.t0,n=r.productId,o=void 0===n?null:n,a=r.parentId,i=void 0===a?null:a,s=r.variantId,c=void 0===s?null:s,f.default.sendEvent("tip004034",u({},t,{productId:o,parentId:i,variantId:c}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),c=(o=G(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=8;break}return e.next=3,(0,C.getCurrentVariant)();case 3:t=e.sent,r=u({level:"store",surface:"launchpad"},(0,h.getWindowSize)()),n=u({},r,{event:"hide_collision",collisionPathname:Q,group:t}),s(n),z=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),l=(a=G(regeneratorRuntime.mark((function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.sdataBadgeDefaults,a=n.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.default)();case 2:return t=e.sent,e.next=5,(0,I.default)();case 5:(r=e.sent)&&!V&&((0,w.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:a},{product:t||{},offer:r},u({},o,{productId:t.id||null}))(),V=!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),f=U(r(8)),d=U(r(10)),p=U(r(6)),v=U(r(30)),h=r(91),g=U(r(17)),y=U(r(32)),m=r(37),b=U(r(58)),w=r(19),E=r(2603),_=U(E),x=r(269),S=U(r(914)),O=U(r(153)),I=U(r(272)),P=r(236),T=U(P),R=U(r(2655));r(2656);var k=U(r(2657)),C=r(82),M=U(C),L=U(r(238)),A=U(r(2659)),N=r(35),j=U(r(166)),D=U(r(185)),F=r(380);function U(e){return e&&e.__esModule?e:{default:e}}function G(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var B=!1,H=!1,$=void 0,V=!1,q=!1,z=!1,W=!1,Y=!1,X=!1,K=!1,Q="",J=!1;function Z(){$&&(0,E.unMountApp)($),B=!1,H=!1,A.default.installed&&A.default.uninstall()}p.default.addListener("ui:action",(function(e,t){"pre-open"===t.action&&(G(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.default)();case 2:t=e.sent,B&&t&&(c(),Z());case 4:case"end":return e.stop()}}),e,void 0)})))(),K=!0,Q=t.pathname)})),function(){var e,t=this,r=(e=G(regeneratorRuntime.mark((function e(){var t,r,n,o,a,f,p,b,E,O,I,k,U,G,V,z,Q,ee,te,re,ne,oe,ae,ie,ue,se,ce,le,fe,de;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,j.default)(),e.next=3,D.default.dispatch(m.experimentsActions.loadVariants([(0,j.default)(),N.CASHBACK_EXPERIMENT,N.STANDALONE_EXPERIMENT]));case 3:return e.next=5,(0,C.canRunTips)();case 5:if(!e.sent){e.next=13;break}if(v.default.trackImpression(N.STANDALONE_EXPERIMENT),v.default.trackImpression(t),v.default.trackImpression(N.CASHBACK_EXPERIMENT),!H){e.next=12;break}return e.abrupt("return");case 12:H=!0;case 13:if(!B){e.next=16;break}return H=!1,e.abrupt("return");case 16:return e.next=18,(0,L.default)();case 18:return r=e.sent,e.next=21,Promise.all([(0,T.default)(),(0,P.getTipsGroup)(),(0,M.default)(),(0,C.isTipsDisabled)(),(0,C.isAutoPop)(),(0,R.default)()]);case 21:return n=e.sent,o=i(n,6),a=o[0],f=o[1],p=o[2],b=o[3],E=o[4],O=o[5],I=u({level:r?"store":"product",surface:r?"launchpad_homepage":"pdp"},(0,h.getWindowSize)()),O&&(I.level="store",I.surface="launchpad_homepage"),k=g.default.visible(),e.next=34,y.default.isFirstTime();case 34:if(U=e.sent,!(K||k||U)||!r){e.next=40;break}return d.default.debug("honeyTips:canShowUniversalContainer: UI action present so stood down"),q||(c(),q=!0),H=!1,e.abrupt("return");case 40:if(!p){e.next=95;break}if(Y||((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{funnelForLaunchpad:O},u({},I,{surface:I.surface}))(),Y=!0),a){e.next=50;break}return e.next=45,(0,C.getCurrentVariant)();case 45:return G=e.sent,V=u({},I,{event:"hide_holdout",group:G,holdout:f}),W||(d.default.debug("honeyTips: user is in holdout group, dont show tips"),s(V),l({sdataBadgeDefaults:I,action:"tips_available_holdout"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},u({},I))(),W=!0),H=!1,e.abrupt("return");case 50:return e.next=52,(0,S.default)();case 52:if(z=e.sent,Q=z.tipsEnabledByUser,ee=z.reason,Q){e.next=68;break}if(X){e.next=66;break}return X=!0,e.next=60,(0,C.getCurrentVariant)();case 60:te=e.sent,re=u({},I,{event:ee?"hide_disable:"+ee:"hide_disable",group:"launch_v:"+te}),s(re),l({sdataBadgeDefaults:I,action:"tips_available_disable"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},u({},I))(),d.default.debug("honeyTips: tips disabled by user");case 66:return H=!1,e.abrupt("return");case 68:return e.next=70,(0,F.shouldSuppressTips)();case 70:if(ne=e.sent,oe=ne.suppressed,ae=ne.reason,!oe){e.next=86;break}if(J){e.next=84;break}return e.next=77,(0,C.getCurrentVariant)();case 77:ie=e.sent,ue=u({},I,{event:ae?"hide_snooze:"+ae:"hide_snooze",group:"launch_v:"+ie}),s(ue),J=!0,d.default.debug("honeyTips: tips suppressed by user"),l({sdataBadgeDefaults:I,action:"tips_available_suppress"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},u({},I))();case 84:return H=!1,e.abrupt("return");case 86:if(B){e.next=93;break}return e.next=89,(0,_.default)();case 89:se=e.sent,(ce=se.shadowRoot)&&($=ce,B=!0,A.default.installed||A.default.install()),H=!1;case 93:e.next=103;break;case 95:if(O&&!Y?((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{isValidLaunchpadPage:O},u({},I))(),Y=!0):Y||((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_not_show_container"},{isValidLaunchpadPage:O},u({},I))(),Y=!0),!(0,x.getIsProductPage)()){e.next=101;break}return e.next=99,(0,C.getIsInExperimentPopulation)();case 99:le=e.sent,E?(fe=u({},I,{event:"hide",group:"autopop_displayed"}),s(fe)):b&&le&&(de=u({},I,{event:"hide",group:"control"}),s(de));case 101:H=!1,Z();case 103:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)});f.default.sendEvent("tip004036",{action:"init",debugEvent:"funnel"}),(0,b.default)("honeyTips:newPage")(G(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e,t)})))),(0,b.default)("honeyTips:turnOff")(G(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z();case 1:case"end":return e.stop()}}),e,t)}))))}(),t.default={creditCardOffers:k.default.creditCardOffers,getInitialized:function(){return B},getInitalizing:function(){return H}}},2379:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=r(32),u=(n=i)&&n.__esModule?n:{default:n};function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}t.default=function(e){var t,r,n=e||{},i=n.mouseEnterDelay,c=void 0===i?3e3:i,l=n.tooltipHideDelay,f=void 0===l?2e3:l,d=n.tooltipHideDelayOnHover,p=void 0===d?3e3:d,v=(0,a.useState)(),h=o(v,2),g=h[0],y=h[1],m=(0,a.useState)(),b=o(m,2),w=b[0],E=b[1],_=(0,a.useState)(!1),x=o(_,2),S=x[0],O=x[1],I=(t=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g&&(clearTimeout(g),y(),E(setTimeout((function(){O(!1),E()}),f)));case 1:case"end":return e.stop()}}),e,void 0)}))),function(){return t.apply(this,arguments)});return{shouldShowTooltip:S,forceHideTooltip:function(){O(!1),E()},startClickBadgeTooltip:(r=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.getSetting("honeyTips:badge:first_time_click_badge_tooltip");case 2:e.sent||w||y(setTimeout(s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.updateSetting("honeyTips:badge:first_time_click_badge_tooltip",!0);case 2:O(!0),E(setTimeout((function(){O(!1),E()}),p));case 4:case"end":return e.stop()}}),e,void 0)}))),c));case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return r.apply(this,arguments)}),endClickBadgeTooltip:I}}},2380:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoverOrClickEvents=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=r(5),i=r(53),u=r(20),s=t.hoverOrClickEvents={MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",DELAYED_MOUSEENTER:"delayedMouseEnter",MOUSELEAVE:"mouseleave"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hoverTimeout,r=void 0===t?1e3:t,c=e.isStaticContainer,l=void 0!==c&&c,f=(0,o.useState)(null),d=n(f,2),p=d[0],v=d[1],h=(0,a.useDispatch)(),g=(0,a.useSelector)(u.selectCurrentContainerId),y=void 0,m=(0,o.useCallback)((function(){h((0,i.sdataTipBadgeInitialHoverEvent)(g)),v({event:s.MOUSEENTER}),y=setTimeout((function(){v({event:s.DELAYED_MOUSEENTER})}),r)}),[]),b=(0,o.useCallback)((function(){clearTimeout(y),y=void 0,v({event:s.MOUSELEAVE})}),[]),w=(0,o.useCallback)((function(){clearTimeout(y),y=void 0,v({event:s.MOUSEUP})}),[]),E=(0,o.useRef)();return(0,o.useEffect)((function(){return E.current&&l&&(E.current.addEventListener("mouseenter",m),E.current.addEventListener("mouseleave",b),E.current.addEventListener("mouseup",w),clearTimeout(y)),function(){E.current&&(E.current.removeEventListener("mouseenter",m),E.current.removeEventListener("mouseleave",b),E.current.removeEventListener("mouseup",w),clearTimeout(y))}}),[E]),[E,p]}},2381:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeAnimationState=void 0,t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(c.selectCurrentContainerId),r=((0,i.useSelector)((0,o.selectUniversalContainerById)(t))||{}).badgeAnimationState,n=void 0===r?l.WAITING:r,u=(0,a.useCallback)((function(){e((0,s.default)(l.START))}),[e]),f=(0,a.useCallback)((function(){e((0,s.default)(l.END))}),[e]);return{animate:n,startAnimation:u,endAnimation:f}};var n,o=r(14),a=r(0),i=r(5),u=r(2617),s=(n=u)&&n.__esModule?n:{default:n},c=r(20);var l=t.BadgeAnimationState={START:"start",END:"end",WAITING:"waiting",CANCELED:"canceled"}},2382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=r(20),a=r(14);t.default=function(){var e=(0,n.useSelector)(o.selectCurrentContainerId);return(0,n.useSelector)((0,a.selectUniversalContainerById)(e))||{}}},2383:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=c(r(10)),u=c(r(2621)),s=r(196);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return i.default.debug("honeyTips:universalContainer:hooks:"+e)},f={behavior:"smooth",block:"center"};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,r=(0,a.useRef)(new u.default({max:30})),i=(0,a.useRef)(new u.default({max:100})),c=(0,a.useState)(!1),d=o(c,2),p=d[0],v=d[1];(0,a.useEffect)((function(){e&&e.current&&r.current.set((0,s.v4)(),e.current)}),[e]);var h=function(e){e.scrollIntoView(n({},t,{top:-10}))},g=function(e,t){e?t?i.current.set((0,s.v4)(),[e,t]):l("addRef: Missing ref. Pass a ref."):l("addRef: Missing categoryId. Pass a categoryId")},y=function(e){if(p)l("scrollToTip: Already scrolling. Ignore");else if(e){l("scrollToTip: Scrolling to "+e);var t=i.current.values().filter((function(t){return o(t,1)[0]===e}));v(!0),Promise.all(t.map((function(e){var t=o(e,2)[1];return new Promise((function(e){h(t),e()}))}))).then((function(){return v(!1)}))}else l("scrollToTip: categoryId missing. No scrolling here")},m=function(){if(p)l("scrollToTop: Already scrolling. Ignore");else{var e=r.current;if(e){v(!0);var o=e.values();Promise.all(o.map((function(e){return new Promise((function(r){e.scrollTo(n({},t,{top:0})),r()}))}))).then((function(){return v(!1)}))}else l("scrollToTop: Nothing to scroll here")}};return{scrollToTop:m,scrollToCategory:y,addTipRef:g,containerRefs:r,isScrolling:p}}},2384:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(0)),o=u(r(4)),a=r(3),i=r(2);function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.createUseStyles)({container:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",height:"264px"},circle:{width:"88px",height:"88px",border:"1.5px solid "+i.Colors.grey800,boxSizing:"border-box",borderRadius:"50%",marginLeft:"auto",marginRight:"auto",marginBottom:"16px",fontStyle:"normal",fontWeight:"300",fontSize:"50px",lineHeight:"85px",display:"flex",alignSelf:"center",justifyContent:"center"},circleText:{fontStyle:"normal",fontWeight:"500",fontSize:"17px",lineHeight:"22px",marginBottom:"16px, auto",display:"flex"}}),c=function(){var e=s();return n.default.createElement("div",{className:e.container},n.default.createElement("div",null,n.default.createElement("div",{className:e.circle},"!"),n.default.createElement("div",{className:e.circleText},o.default.getMessage("There_are_no_tips_for_this_item"))))};c.propTypes={},c.defaultProps={},t.default=c},2385:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDependencyStatus=t.callDataFetcher=t.getDependenciesToProcess=t.getCategoryDependents=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(939),a=c(r(760)),i=c(r(10)),u=c(r(2651)),s=r(961);function c(e){return e&&e.__esModule?e:{default:e}}var l=t.getCategoryDependents=function(){return Object.entries(a.default.getRegistry()).reduce((function(e,t){var r=n(t,2),o=r[0];return r[1].forEach((function(t){var r=e[t]||[];e[t]=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r),[o])})),e}),{})},f=t.getDependenciesToProcess=function(){return Object.entries(a.default.getRegistry()).reduce((function(e,t){var r=n(t,2),o=r[0],a=r[1];return e[o]=new Set(a),e}),{})},d=t.callDataFetcher=function(e,t){return function(r){return u.default.createDataFetcherPromise({categoryId:e,data:t,dataFetcher:(0,o.getDataFetcher)(e),dispatch:r})}},p=t.logDependencyStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.filter((function(e){return"rejected"===e.status})).map((function(e){return e.reason.message})),o=t.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value.type})),a=Array.from(new Set(o));a.length&&i.default.debug(s.LOG_PREFIX+"loadDependencies: Successfully loaded "+a.join(", ")+" for stateId "+e.stateId),n.length&&i.default.warn(s.LOG_PREFIX+"loadDependencies: Failed "+e.stateId+" for following reasons:\n "+n.join("\n")),r&&console.log(s.LOG_PREFIX+"loadDependencies: Result for "+e.stateId,t)};t.default={callCategoryDataFetcher:d,logDependencyStatus:p,getCategoryDependents:l,getDependenciesToProcess:f}},2386:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fireCreateRelevanceRequest=t.fireDependencyFinishedEvent=void 0;var n=i(r(6)),o=i(r(10)),a=r(961);function i(e){return e&&e.__esModule?e:{default:e}}t.fireDependencyFinishedEvent=function(e){var t=e.type,r=e.status,i=e.data,u=e.stateId;return t?u?n.default.send(a.FINISHED_EVENT,{type:t,status:r,data:i,stateId:u}):(o.default.error(a.LOG_PREFIX+"fireDependencyFinishedEvent Provide associated stateId."),null):(o.default.error(a.LOG_PREFIX+"fireDependencyFinishedEvent Provide a type."),null)},t.fireCreateRelevanceRequest=function(e){n.default.send(a.CREATE_RELEVANCE_REQUEST,e)}},2387:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>0!==n(e,t,r)},2388:function(e,t,r){const n=r(2268),o=r(2387),a=r(964),i=r(2271),u=r(2270),s=r(2272);e.exports=(e,t,r,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,c);case"!=":return o(e,r,c);case">":return a(e,r,c);case">=":return i(e,r,c);case"<":return u(e,r,c);case"<=":return s(e,r,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},2389:function(e,t,r){const n=r(299);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},2407:function(e,t,r){r(904),e.exports=r(2408)},2408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(2278),r(2326),r(2331),r(2334),r(2335),r(2341),r(2346),r(2347),r(2349),r(2351),r(2352),r(2353),r(2355),r(2356),r(2358),r(2359),r(2361),r(2362),r(96),r(2363);var n,o=X(r(23)),a=X(r(21)),i=X(r(12)),u=X(r(314)),s=X(r(844)),c=X(r(206)),l=X(r(2559)),f=X(r(225)),d=X(r(2373)),p=X(r(536)),v=X(r(199)),h=X(r(32)),g=X(r(30)),y=X(r(250)),m=X(r(345)),b=X(r(4)),w=X(r(908)),E=X(r(10)),_=X(r(6)),x=X(r(114)),S=X(r(845)),O=X(r(2374)),I=X(r(115)),P=X(r(98)),T=X(r(2376)),R=X(r(77)),k=X(r(2602)),C=X(r(63)),M=X(r(2377)),L=X(r(8)),A=X(r(67)),N=X(r(11)),j=X(r(22)),D=X(r(2378)),F=X(r(17)),U=X(r(13)),G=X(r(943)),B=X(r(909)),H=X(r(315)),$=X(r(195)),V=X(r(857)),q=X(r(161)),z=X(r(59)),W=X(r(2660)),Y=X(r(2390));function X(e){return e&&e.__esModule?e:{default:e}}o.default.onPossiblyUnhandledRejection((function(e){return E.default.error(e)})),n=window.location.href,_.default.send("page:load",{url:n,hasServiceWorkers:!!((navigator||{}).serviceWorker||{}).controller},{allTabs:!0,background:!0,ignoreResponse:!0}).reflect(),E.default.debug("Honey 14.0.0 content script is ready. Environment is production"),setTimeout((function(){if("www.joinhoney.com"===window.location.hostname){var e=document.querySelector("#messagingEventHandler");if(e)if(e.getAttribute("si_ext"))_.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0});else new MutationObserver((function(){e.getAttribute("si_ext")&&_.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0})})).observe(e,{attributes:!0})}}));var K={$:a.default,adbBp:q.default,acorns:u.default,ajax:s.default,button:c.default,cartPageFetcher:B.default,checkoutPlatform:l.default,clipboard:f.default,config:d.default,confirmation:p.default,cookies:v.default,device:h.default,exclusives:y.default,pdpPopupEngine:W.default,experiments:g.default,extensionReview:m.default,i18n:b.default,imageLoader:w.default,honeyPayNow:O.default,honeyPayPal:I.default,launchpad:z.default,logger:E.default,messages:_.default,offers:x.default,optimus:S.default,pageDetector:R.default,popover:P.default,productFetcher:T.default,runtime:k.default,savingsController:C.default,search:Y.default,seleniumComm:M.default,stats:L.default,storage:A.default,stores:N.default,tabs:j.default,tips:D.default,ui:F.default,user:U.default,userSavingsStats:G.default,util:i.default,vims:H.default,websiteComm:$.default,yelp:V.default};_.default.addListener("debug:change",(function(e,t){try{t.active?window.honey=K:delete window.honey}catch(e){}})),t.default=K},2518:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutObservationBackgroundManager=t.CheckoutObservationContentManager=t.DataTransporter=void 0;var o=r(2519);Object.defineProperty(t,"DataTransporter",{enumerable:!0,get:function(){return n(o).default}});var a=r(2530);Object.defineProperty(t,"CheckoutObservationContentManager",{enumerable:!0,get:function(){return n(a).default}});var i=r(2537);Object.defineProperty(t,"CheckoutObservationBackgroundManager",{enumerable:!0,get:function(){return n(i).default}})},2519:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2364),i=r(2258),u=r(865),s=r(958),c=function(){function e(e){var t=e.window,r=new a.FrameTransportClient({allowedOrigin:t.location.origin,id:s.FRAME_TRANPORT_IDS.PAGE_TO_CONTENT_TRANSPORT}),n=new i.Client({transport:r,options:{}});n.connect(t),this.client=n}return e.prototype.send=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.client.invoke(s.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,{data:e,options:{timeoutMilliseconds:3e4}})];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),u.logger.info("[CheckoutObservation] Failed to send page to content",{error:t}),[3,3];case 3:return[2]}}))}))},e}();t.default=c},2520:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportClient=void 0;var n=function(){function e(e){var t=e.allowedOrigin,r=e.id;this.allowedOrigin=t,this.id=r}return e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,r=e.onMessage;this.target=t,this.subscription=this.subscribe({callback:r})},e.prototype.disconnect=function(){this.subscription&&(this.subscription.dispose(),this.target=void 0,this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,r=this.target;if(!r)throw new Error("No connection available. Did you to call connect() before attempting to send a message");r.postMessage(t,this.allowedOrigin)},e.prototype.subscribe=function(e){var t=this,r=e.callback,n=!1,o=function(e){"*"!==t.allowedOrigin&&e.origin!=t.allowedOrigin||e.data&&e.data.meta&&"request"!==e.data.meta.type&&r({message:e.data,source:e.source,context:void 0})};return window.addEventListener("message",o),{dispose:function(){n||(n=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportClient=n},2521:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var n=function(){function e(e){var t=e.allowedOrigins,r=e.id;this.id=r;for(var n=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){n=!0,this.allowedOrigins=["*"];break}}n||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,r=e.target,n=e.context;r&&n&&n.origin&&r.postMessage(t,n.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,r=this.allowedOrigins;t<r.length;t++){var n=r[t];if("*"===n)return!0;if(n===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,r=e.callback,n=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&r({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){n||(n=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=n},2522:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2523:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2524),t),o(r(2525),t),o(r(2526),t),o(r(2527),t)},2524:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,r=!1;function n(e){t(e)}return window.addEventListener("message",n),{dispose:function(){r||(r=!0,window.removeEventListener("message",n))}}},t.send=function(e){var t=e.target,r=e.origin,n=e.message;t.postMessage(n,r)}},2525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2526:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var a=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,r=e.target,n=e.context;this.transport.send({message:t,target:r,context:n})},e.prototype.handle=function(e,t){var r=this.transport.prepareHandle(e,t),n=r.actionType,o=r.handlerFunc;this.routes[n]=o},e.prototype.onMessage=function(e){var t=e.message,r=e.source,a=e.context;return n(this,void 0,void 0,(function(){var e,n,i,u,s,c;return o(this,(function(o){switch(o.label){case 0:if(!t)return[2];if(!t.meta)return[2];if(e=t.meta.action,!(n=t.meta.messageId)||!e)return[2];if(!(i=this.routes[e]))return[2];u={meta:{action:e,messageId:n,type:"response"}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i({message:t,source:r,context:a})];case 2:return s=o.sent(),u.data=s,[3,4];case 3:return c=o.sent(),u.errors=[{message:c.toString()}],[3,4];case 4:return this.response({message:u,target:r,context:a}),[2]}}))}))},e}();t.Server=a},2527:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var n=r(196),o=r(2528),a=function(){function e(e){var t=e.transport,r=e.defaultTimeoutMilliseconds,n=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=r||100;var a=o.LoggingDriverNoop.createService();this.log=a,n&&n.log&&(this.log=n.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var r=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var u=this.defaultTimeoutMilliseconds,s={};i&&(i.transport&&(s=i.transport),i.timeoutMilliseconds&&(u=i.timeoutMilliseconds));var c=n.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,n){var o={resolve:t,reject:n,timeoutId:void 0,action:l.meta.action};r.inflight[""+c]=o,r.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+r.transport.getId()+"] ["+l.meta.action+"]",l.data),r.transport.send({message:l,options:s});var a=setTimeout((function(){var t=r.inflight[c];t&&(delete r.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+u+"ms")))}),u);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var r=t.meta.action,n=t.meta.messageId;if(n&&r){var o=this.inflight[n];if(o&&r==o.action){if(delete this.inflight[n],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var n=r(2529),o=function(){function e(){}return e.createService=function(){return new n.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var n=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=n},2530:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(2364),i=r(2259),u=r(959),s=r(2259),c=r(2536),l=function(e){function t(r){var n=e.call(this)||this;return n.servers=[t.configureFromPageToBackgroundServer(r),t.configureFromBackgroundToPageServer(r)],n}return o(t,e),t.configureFromPageToBackgroundServer=function(e){var t=e.messages,r=e.allowedOrigins,n=e.store,o=new a.FrameTransportServer({allowedOrigins:r}),u=new i.HoneyMessagingTransportClient,s={postMessage:function(e){return t.send(e.meta.action,e.data,{ignoreResponse:!0,background:!0})}};return new c.FromPageToBackgroundServer({canPostMessage:s,serverTransport:o,clientTransport:u,store:n})},t.configureFromBackgroundToPageServer=function(e){var t=e.messages,r=e.executeScript,n=e.scriptPath,o=new s.HoneyMessagingTransportServer({target:t});return new c.FromBackgroundToPageServer({serverTransport:o,executeScript:r,scriptPath:n})},t}(u.ManagerBase);t.default=l},2531:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=void 0;var o=r(196),a=function(){function e(e){var t=(void 0===e?{}:e).id,r=void 0===t?o.v4().toString():t;this.id=r}return e.prototype.send=function(e){var t,r=e.message,o=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var a=o.src;a&&a.tabId&&(t=a.tabId);var i=this.platform.postMessage(r,t);this.messageHandler(n(n({},r),{data:i}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,r=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:r})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,r=e.callback,n=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var n={message:e,source:t.platform};r(n)}},{dispose:function(){n||(n=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2532:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=r(196),i=function(){function e(e){var t=e.id,r=void 0===t?a.v4().toString():t,n=e.target;this.id=r,this.platform=n,this.honeyMessagesListeners={}}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,r=e.context;r&&(r.result=t.data)},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var r=t[e];this.honeyMessagesListeners[r].dispose()}this.honeyMessagesListeners={}},e.prototype.prepareHandle=function(e,t){var r=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return n(r,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:if(r={source:{postMessage:function(){return i}},context:{result:null,src:i},message:{meta:{messageId:a.v4().toString(),type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return[4,this.messageEnvelopeHandler(r)];case 1:return n.sent(),[2,r.context.result]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return r.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e}();t.HoneyMessagingTransportServer=i},2533:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.start=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].start()}},e.prototype.stop=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].stop()}},e}();t.default=n},2535:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.start=function(){this.server&&this.server.start()},e.prototype.stop=function(){this.server&&this.server.stop()},e}();t.default=n},2536:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromBackgroundToPageServer=t.FromPageToBackgroundServer=void 0;var u=r(2258),s=r(865),c=r(958),l=r(959),f=function(e){function t(r){var n=e.call(this)||this;return n.server=t.configureServer(r),n}return o(t,e),t.configureServer=function(e){var t=this,r=e.serverTransport,n=e.clientTransport,o=e.store,l=e.canPostMessage;try{var f=new u.Server({transport:r}),d=new u.Client({transport:n});return d.connect(l),f.handle(c.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,r,n,a,u,l,f,p;return i(this,(function(i){switch(i.label){case 0:s.logger.info("[CheckoutObservation] CONTENT: Frame Server: Got Message from PAGE",e),i.label=1;case 1:return i.trys.push([1,3,,4]),t=e.message,r=t.data,n=r.data,a=r.meta,u=a.platform,l=a.provider,f={data:n,meta:{source:u,destination:l,storeId:o.storeId,storeSessionId:o.sessionId,pageTitle:o.pageTitle,pageURL:o.pageURL}},s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Sending message to background",f),[4,d.invoke(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,{data:f,options:{timeoutMilliseconds:3e4}})];case 2:return i.sent(),[3,4];case 3:return p=i.sent(),s.logger.info("[CheckoutObservation] Failed to invoke CONTENT_TO_BG_EVENT",{error:p}),[3,4];case 4:return[2]}}))}))})),f}catch(e){return s.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromPageToBackgroundServer=f;var d=function(e){function t(r){var n=e.call(this)||this;return n.server=t.configureServer(r),n}return o(t,e),t.configureServer=function(e){var t=this,r=e.serverTransport,n=e.executeScript,o=e.scriptPath;try{var l=new u.Server({transport:r});return l.handle(c.MESSAGE_ACTIONS.COLLECT_DATA,(function(e){return a(t,void 0,void 0,(function(){var t,r,a;return i(this,(function(i){t=e.message;try{s.logger.info("[CheckoutObservation] CONTENT: Got message from background, triggering PAGE",t),r=t.data,a={id:c.SCRIPT_IDS.HONEY_ANALYTICS_CONFIG,data:r},n(o,a)}catch(e){s.logger.info("[CheckoutObservation] Failed to execute observation script",{error:e})}return[2]}))}))})),l}catch(e){return s.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromBackgroundToPageServer=d},2537:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2259),u=a(r(2538)),s=r(959),c=r(2557),l=function(e){function t(r){var n=e.call(this)||this;return n.servers=[t.configureFromContentToBackendServer(r),t.configureFromContentToContentServer(r)],n}return o(t,e),t.configureFromContentToBackendServer=function(e){var t=e.analyticsMetaLoader,r=e.host,n=e.messages,o=e.request,a=new u.default({endpoint:r+"/eca",request:o,analyticsMetaLoader:t}),s=new i.HoneyMessagingTransportServer({target:n});return new c.FromContentToBackendServer({onMessageHandler:a.enqueue,transport:s})},t.configureFromContentToContentServer=function(e){var t=e.messages,r=e.analyticsSensorsFetcher,n=new i.HoneyMessagingTransportServer({target:t}),o=new i.HoneyMessagingTransportClient,a={postMessage:function(e,r){var n={ignoreResponse:!0,tab:r};return t.send(e.meta.action,e.data,n)}};return new c.FromContentToContentServer({onMessageHandler:r,serverTransport:n,clientTransport:o,canPostMessage:a})},t}(s.ManagerBase);t.default=l},2538:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(196),u=r(2539),s=r(865),c=r(2545),l=function(){function e(e){var t=this,r=e.request,l=e.endpoint,f=e.analyticsMetaLoader;this.enqueue=function(e){return o(t,void 0,void 0,(function(){var t,r,o,u,c;return a(this,(function(a){switch(a.label){case 0:return[4,this.analyticsMetaLoader()];case 1:return t=a.sent(),r=e.data,o=e.meta,u={data:r,meta:n(n(n({},t),o),{timestamp:Date.now()})},c={name:i.v4(),value:u},s.logger.info("[CheckoutObservation] Enqueueing event:",c),this.checkpointStorage.save(c),[2]}}))}))},this.endpoint=l,this.analyticsMetaLoader=f;var d=new u.MemoryStorage,p=new u.JSONStorage({storage:d});this.checkpointStorage=new u.CheckpointJSONStorage({storage:p,checkpointIntervalMilliseconds:1e3,checkpoint:this.checkpoint.bind(this)}),this.saveObservationRepository=new c.RESTURLObservationRepository({endpoint:l,request:r})}return e.prototype.checkpoint=function(e){return o(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:if(0===e.length)return[2,[]];t=[],r=[],e.forEach((function(e){t.push(e.name),r.push(e.value)})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.saveObservationRepository.saveURLObservations(r)];case 2:return n.sent(),[2,t];case 3:return n.sent(),[2,[]];case 4:return[2]}}))}))},e}();t.default=l},2539:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2540),t),o(r(2542),t)},2540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var n=r(2541);Object.defineProperty(t,"MemoryStorage",{enumerable:!0,get:function(){return n.MemoryStorage}})},2541:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var n=function(){function e(){this.storage={}}return e.prototype.save=function(e){var t=e.name,r=e.value;return this.storage[t]=r,Promise.resolve()},e.prototype.open=function(e){var t=e.name,r=this.storage[t];return Promise.resolve(r)},e.prototype.list=function(){return Promise.resolve(Object.keys(this.storage))},e.prototype.delete=function(e){var t=e.name;return delete this.storage[t],Promise.resolve()},e}();t.MemoryStorage=n},2542:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=t.JSONStorage=void 0;var n=r(2543);Object.defineProperty(t,"JSONStorage",{enumerable:!0,get:function(){return n.JSONStorage}});var o=r(2544);Object.defineProperty(t,"CheckpointJSONStorage",{enumerable:!0,get:function(){return o.CheckpointJSONStorage}})},2543:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSONStorage=void 0;var a=function(){function e(e){var t=e.storage;this.storage=t}return e.prototype.save=function(e){var t=e.name,r=e.value;return void 0===r?Promise.resolve():this.storage.save({name:t,value:r})},e.prototype.open=function(e){var t=e.name;return n(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.storage.open({name:t})]}))}))},e.prototype.list=function(){return this.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.storage.delete({name:t})},e}();t.JSONStorage=a},2544:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=void 0;var i=function(){function e(e){this.options=n({},e)}return e.prototype.start=function(){},e.prototype.stop=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},e.prototype.startTimeout=function(){var e=this;this.options.checkpointIntervalMilliseconds&&(this.timeoutId=setTimeout((function(){e.timeoutId=void 0,e.flush()}),this.options.checkpointIntervalMilliseconds))},e.prototype.registerInterval=function(){this.timeoutId||this.startTimeout()},e.prototype.checkpointComplete=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.isCheckpointing=!1,[4,this.options.storage.list()];case 1:return e.sent().length>0&&this.registerInterval(),[2]}}))}))},e.prototype.flush=function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,u,s=this;return a(this,(function(c){switch(c.label){case 0:return this.isCheckpointing=!0,[4,(e=this.options.storage).list()];case 1:return t=c.sent(),r=t.map((function(t){return o(s,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return[4,e.open({name:t})];case 1:return r=n.sent(),[2,{name:t,value:r}]}}))}))})),[4,Promise.all(r)];case 2:return n=c.sent(),[4,this.options.checkpoint(n)];case 3:i=c.sent(),u=0,c.label=4;case 4:return u<i.length?[4,e.delete({name:i[u]})]:[3,7];case 5:c.sent(),c.label=6;case 6:return u++,[3,4];case 7:return[4,this.checkpointComplete()];case 8:return c.sent(),[2]}}))}))},e.prototype.save=function(e){var t=e.name,r=e.value;return this.timeoutId||this.isCheckpointing||this.startTimeout(),this.options.storage.save({name:t,value:r})},e.prototype.open=function(e){var t=e.name;return this.options.storage.open({name:t})},e.prototype.list=function(){return this.options.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.options.storage.delete({name:t})},e}();t.CheckpointJSONStorage=i},2545:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=t.RESTURLObservationRepository=t.EmbeddedURLObservationRepository=t.GraphQLURLObservationRepository=t.URLObservationService=void 0,o(r(2546),t);var a=r(2547);Object.defineProperty(t,"URLObservationService",{enumerable:!0,get:function(){return a.URLObservationService}});var i=r(2548);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return i.GraphQLURLObservationRepository}});var u=r(2550);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return u.EmbeddedURLObservationRepository}});var s=r(2553);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return s.RESTURLObservationRepository}});var c=r(2555);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return c.HybridURLObservationRepository}})},2546:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReversedURLObservationEncoding=t.URLObservationEncoding=void 0,function(e){e.Form="application/x-www-form-urlencoded",e.Json="application/json"}(n=t.URLObservationEncoding||(t.URLObservationEncoding={})),t.ReversedURLObservationEncoding=Object.keys(n).reduce((function(e,t){return e[n[t]]=t,e}),{})},2547:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=void 0;var n=function(){function e(e){var t=e.repository;this.repository=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.repository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.repository.saveURLObservations(e)},e}();t.URLObservationService=n},2548:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var n=r(2549);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return n.GraphQLURLObservationRepository}})},2549:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var a=function(){function e(e){var t=e.client;this.client=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return n(this,void 0,void 0,(function(){var e,r,n,a;return o(this,(function(o){switch(o.label){case 0:e="checkout_getURLObservationPatterns",r={params:{storeId:t,enabled:!0}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.query(e,r)];case 2:return n=o.sent(),a=n.data,n.errors||!a?[2,[]]:[2,a.eventDetectionGetURLObservationPatterns||[]];case 3:return o.sent(),[2,[]];case 4:return[2]}}))}))},e.prototype.saveURLObservations=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t="checkout_eventDetectionReceiveURLObservations",r={params:{observations:e}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.mutate(t,r)];case 2:return o.sent(),[3,4];case 3:return n=o.sent(),console.error("[GraphQL] URL Save Observation",n),[2,Promise.resolve()];case 4:return[2]}}))}))},e}();t.GraphQLURLObservationRepository=a},2550:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var n=r(2551);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return n.EmbeddedURLObservationRepository}})},2551:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var o=n(r(2552)),a=r(865),i=function(){function e(){}return e.prototype.getURLPatterns=function(e){var t=e.storeId;a.logger.info("Fetching URL Patterns for "+t);var r=o.default[t];if(!r)return Promise.resolve([]);var n=r.urls.filter((function(e){return e.enabled})).map((function(e){return{pattern:e.pattern,encoding:e.encoding,include:e.include,filter:e.filter}}));return Promise.resolve(n)},e.prototype.saveURLObservations=function(e){return a.logger.info("Sending Observations",e),Promise.resolve()},e}();t.EmbeddedURLObservationRepository=i},2552:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"7703020760979500833":{storeName:"49th Coffee",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"cu"},{key:"pa"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#id"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},133:{storeName:"Nordstroms",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},30:{storeName:"BH Photo",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},"7512623001795621936":{storeName:"chewy.com",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},185:{storeName:"Target",urls:[{label:"Target Analytics",enabled:!0,pattern:"https://api.target.com/web_analytics/v1",encoding:"application/json",filter:{request:{method:"POST"},data:"$..records[?(@.checkout)]"},include:[{key:"appState.globalPage"},{key:"appState.pageName"},{key:"appState.pageType"},{key:"appState.previousPageName"},{key:"appState.previousPageType"},{key:"appState.previousSearchTerm"},{key:"appState.referrer"},{key:"appState.cmsPageType"},{key:"checkout"},{key:"products"}]}]},"149870454361909889":{storeName:"Kylie Cosmetics",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]}}},2553:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var n=r(2554);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return n.RESTURLObservationRepository}})},2554:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var a=function(){function e(e){var t=e.endpoint,r=e.request;this.endpoint=t,this.request=r}return e.prototype.getURLPatterns=function(e){e.storeId;return n(this,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Not Implemented")}))}))},e.prototype.saveURLObservations=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request.post(this.endpoint).send(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))},e}();t.RESTURLObservationRepository=a},2555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var n=r(2556);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return n.HybridURLObservationRepository}})},2556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var n=function(){function e(e){var t=e.saveObservationRepository,r=e.getPatternsRepository;this.saveObservationRepository=t,this.getPatternsRepository=r}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.getPatternsRepository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.saveObservationRepository.saveURLObservations(e)},e}();t.HybridURLObservationRepository=n},2557:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromContentToBackendServer=t.FromContentToContentServer=void 0;var u=r(2258),s=r(865),c=r(958),l=r(959),f=function(e){function t(r){var n=e.call(this)||this;return n.server=t.configureServer(r),n}return o(t,e),t.configureServer=function(e){var t=this,r=e.onMessageHandler,n=e.transport;try{var o=new u.Server({transport:n});return o.handle(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,n,o;return i(this,(function(a){switch(a.label){case 0:s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received req",e),t=e.message,n=t.data,s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received message",n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r(n)];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),s.logger.info("[CheckoutObservation] Failed to handle message from content",{error:o}),[3,4];case 4:return[2]}}))}))})),o}catch(e){return s.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToBackendServer=f;var d=function(e){function t(r){var n=e.call(this)||this;return n.server=t.configureServer(r),n}return o(t,e),t.configureServer=function(e){var t=this,r=e.canPostMessage,n=e.serverTransport,o=e.clientTransport,l=e.onMessageHandler;try{var f=new u.Client({transport:o});f.connect(r);var d=new u.Server({transport:n});return d.handle(c.MESSAGE_ACTIONS.ENABLE_BG_SERVER,(function(e){return a(t,void 0,void 0,(function(){var t,r,n,o,a,u;return i(this,(function(i){switch(i.label){case 0:t=e.message,r=e.context,i.label=1;case 1:return i.trys.push([1,4,,5]),(n=t.data)&&n.storeId?(o=n.storeId,[4,l(o)]):[2];case 2:return(a=i.sent())&&a.length?(s.logger.info("[CheckoutObservation] BACKGROUND -> CONTENT: Trigger content with provider",a),[4,f.invoke(c.MESSAGE_ACTIONS.COLLECT_DATA,{data:a,options:{timeoutMilliseconds:3e3,transport:r}})]):[2];case 3:return i.sent(),[3,5];case 4:return u=i.sent(),s.logger.info("[CheckoutObservation] Failed to trigger content",{error:u}),[3,5];case 5:return[2]}}))}))})),d}catch(e){return s.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToContentServer=d},2558:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObservationFeatureEnabled=u;var n,o=r(64),a=(n=o)&&n.__esModule?n:{default:n};var i=(0,r(483).makeDuration)({minutes:15});function u(){return a.default.getFeatureFlag("checkout_analytics_observation_v_2",{ttl:i})}t.default={isObservationFeatureEnabled:u}},2559:function(e,t,r){"use strict";var n=c(r(10)),o=c(r(6)),a=c(r(2260)),i=c(r(2261)),u=c(r(2363)),s=c(r(2588));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){var t,r,a=(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.default.debug("checkoutPlatform: initializing "+i),e.prev=1,e.next=4,s();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.default.error("checkoutPlatform: feature failed to start: "+i);case 9:return e.prev=9,o.default.removeListener(c,a),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(){return r.apply(this,arguments)}),i=e.feature,u=e.startOn,s=e.start,c=u||"page:load";o.default.addListener(c,a)}l({feature:"events",start:a.default.start}),l({feature:"observation",start:u.default.start}),l({feature:"checkoutPaypal",start:i.default.start}),l({feature:"checkout",start:s.default.start})},2560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(10),a=(n=o)&&n.__esModule?n:{default:n},i=r(866);var u={paypalCheckoutFrameDetected:function(){throw new Error("checkoutEvents: not initialized")}};var s={initialize:function(){var e=new i.Observable({value:void 0,replay:!0});u.paypalCheckoutFrameDetected=function(){return e}}};t.default={initialize:function(){s.initialize(),s.initialize=function(){a.default.warn("checkoutEvents: events: previously initialized")}},events:u}},2561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqid=void 0,t.uniqid=function(e){var t=(void 0===e?{}:e).prefix,r=0;return function(){var e=r+1;return r=e,t?""+t+e:e.toString()}}},2562:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.honeyMessagesEvents={PAYPAL_IFRAME_DETECTED:"checkout:paypal:iframe"};t.default={honeyMessagesEvents:n}},2563:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverExtension=void 0;var o=r(2365),a=r(2564),i={100:a.LogLevel.Trace,200:a.LogLevel.Debug,300:a.LogLevel.Info,400:a.LogLevel.Warn,500:a.LogLevel.Error},u=((n={})[a.LogLevel.Trace]=100,n[a.LogLevel.Debug]=200,n[a.LogLevel.Info]=300,n[a.LogLevel.Warn]=400,n[a.LogLevel.Error]=500,n),s=function(){function e(e){var t=e.honeyLogger;this.honeyLogger=t}return e.createService=function(t){var r=t.honeyLogger;return new o.LoggingService({driver:new e({honeyLogger:r})})},e.prototype.setLogLevel=function(e){this.honeyLogger.setLevel(u[e])},e.prototype.getLogLevel=function(){return i[this.honeyLogger.getLevel()]},e.prototype.trace=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.honeyLogger).trace.apply(e,t)},e.prototype.debug=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.honeyLogger).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.honeyLogger).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.honeyLogger).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.honeyLogger).error.apply(e,t)},e}();t.LoggingDriverExtension=s},2564:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.None=-1]="None",e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Debug=3]="Debug",e[e.Trace=4]="Trace"}(t.LogLevel||(t.LogLevel={}))},2565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentCoordinator=void 0;var n=r(2366),o=r(2572),a=r(2573),i=function(){function e(e){var t=e.log,r=e.backgroundClient,n=e.honeyCheckoutServer,o=e.paypalCheckoutClient;this.paypalClientConnected=!1,this.log=t,this.backgroundClient=r,this.honeyCheckoutServer=this.configureHoneyCheckoutServer(n),this.paypalCheckoutClient=o}return e.prototype.connectPayPalFrame=function(e){var t=e.target;this.paypalCheckoutClient.connect(t),this.paypalClientConnected=!0},e.prototype.start=function(){this.log.debug("[CheckoutPaypal] Starting content coordinator"),this.honeyCheckoutServer.start()},e.prototype.stop=function(){this.paypalClientConnected=!1,this.paypalCheckoutClient.disconnect(),this.honeyCheckoutServer.stop()},e.prototype.configureHoneyCheckoutServer=function(e){var t=this;return e.handle(n.HoneyCheckoutAction.PayPalCreateOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal CreateOrder', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.CreateOrder,{options:{timeoutMilliseconds:a.config.paypal.createOrderTimeoutMilliseconds}})})),e.handle(n.HoneyCheckoutAction.PayPalApproveOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Approve', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.ApproveOrder,{data:e.message.data})})),e.handle(n.HoneyCheckoutAction.PayPalCancelOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Cancel', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.CancelOrder,{data:e.message.data})})),e.handle(n.HoneyCheckoutAction.PayPalErrorOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Error', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.ErrorOrder,{data:e.message.data})})),e.handle(n.HoneyCheckoutAction.PayPalConfig,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'PayPal Config', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.PayPalConfig)})),e.handle(n.HoneyCheckoutAction.PayPalVersion,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'version', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.Version)})),e.handle(n.HoneyCheckoutAction.HoneyCheckoutIFrameComplete,(function(e){return t.stop(),Promise.resolve()})),e},e}();t.ContentCoordinator=i},2566:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2567),t),o(r(2568),t),o(r(2569),t),o(r(2570),t)},2567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,r=!1;function n(e){t(e)}return window.addEventListener("message",n),{dispose:function(){r||(r=!0,window.removeEventListener("message",n))}}},t.send=function(e){var t=e.target,r=e.origin,n=e.message;t.postMessage(n,r)}},2568:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var n=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,r=e.target,n=e.context;this.transport.send({message:t,target:r,context:n})},e.prototype.handle=function(e,t){var r=this.transport.prepareHandle(e,t),n=r.actionType,o=r.handlerFunc;this.routes[n]=o},e.prototype.onMessage=function(e){var t=e.message,r=e.source,n=e.context;if(t&&t.meta){var o=t.meta.action,a=t.meta.messageId;if(a&&o){var i=this.routes[o];if(i){var u={meta:{action:o,messageId:a,type:"response"}};try{var s=i({message:t,source:r,context:n});s&&"object"==typeof s&&"function"==typeof s.then?this.onPromiseLikeResponse(s,u,{message:t,source:r,context:n}):(u.data=s,this.response({message:u,target:r,context:n}))}catch(e){u.errors=[{message:e.message||e.toString()}],this.response({message:u,target:r,context:n})}}}}},e.prototype.onPromiseLikeResponse=function(e,t,r){var n=this,o=r.source,a=r.context;return e.then((function(e){t.data=e,n.response({message:t,target:o,context:a})})).catch((function(e){t.errors=[{message:e.message||e.toString()}],n.response({message:t,target:o,context:a})}))},e}();t.Server=n},2570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var n=r(196),o=r(2571),a=function(){function e(e){var t=e.transport,r=e.defaultTimeoutMilliseconds,n=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=r||100;var a=o.LoggingDriverNoop.createService();this.log=a,n&&n.log&&(this.log=n.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var r=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var u=this.defaultTimeoutMilliseconds,s={};i&&(i.transport&&(s=i.transport),i.timeoutMilliseconds&&(u=i.timeoutMilliseconds));var c=n.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,n){var o={resolve:t,reject:n,timeoutId:void 0,action:l.meta.action};r.inflight[""+c]=o,r.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+r.transport.getId()+"] ["+l.meta.action+"]",l.data),r.transport.send({message:l,options:s});var a=setTimeout((function(){var t=r.inflight[c];t&&(delete r.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+u+"ms")))}),u);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var r=t.meta.action,n=t.meta.messageId;if(n&&r){var o=this.inflight[n];if(o&&r==o.action){if(delete this.inflight[n],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var n=r(2365),o=function(){function e(){}return e.createService=function(){return new n.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2572:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutServer=t.PayPalCheckoutAction=void 0;var a=r(553);!function(e){e.CreateOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/create",e.ApproveOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/approve",e.CancelOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/cancel",e.ErrorOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/error",e.PayPalConfig="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/config",e.Version="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/version"}(t.PayPalCheckoutAction||(t.PayPalCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.PayPalCheckoutServer=i},2573:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;t.config={honey:{clientTimeoutMilliseconds:5e3,discoveryTimeoutMilliseconds:5e3,createOrderTimeoutMilliseconds:3e4},paypal:{clientTimeoutMilliseconds:5e3,discoveryTimeoutMilliseconds:5e3,createOrderTimeoutMilliseconds:3e4}}},2574:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(r(553).Client);t.PayPalCheckoutClient=a},2575:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(r(553).Client);t.BackgroundClient=a},2576:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiscoveryService=t.makeObservableDiscoveryResult=t.DiscoveryStatus=t.FrameIdKey=void 0;var i,u=r(866),s=r(2368),c=r(2369),l=r(2367),f=r(2577),d=r(2369);function p(e){var t=e.tabId,r={frameId:e.frameId,tabId:t,status:e.status,message:e.message};return new u.Observable({value:r,replay:!0})}Object.defineProperty(t,"FrameIdKey",{enumerable:!0,get:function(){return d.FrameIdKey}}),function(e){e.Pending="pending",e.Error="error",e.Discovered="discovered",e.None="none"}(i=t.DiscoveryStatus||(t.DiscoveryStatus={})),t.makeObservableDiscoveryResult=p;var v=function(){function e(e){var t,r=e.log,n=e.backgroundClient,o=e.discoveryRelayServer,a=e.paypalRealyScriptPath,i=e.honeyRealyScriptPath;this.discoveryRelayServerState="stopped",this.paypalFrameDetected=new u.Observable({value:{},replay:!1}),this.honeyFrameDetected=new u.Observable({value:{},replay:!1}),this.log=r,this.backgroundClient=n,this.discoveryRelayServer=this.configureDiscoveryRelayServer(o),this.paypalRealyScriptPath=a,this.honeyRealyScriptPath=i,this.platform=f.PlatformService.create(),this.discoveryIndex=((t={})[c.FrameIdKey.PayPal]={},t[c.FrameIdKey.Honey]={},t)}return e.prototype.start=function(){this.log.debug("[CheckoutPaypal] Starting Discovery Service"),this.startDiscoveryRelayServer()},e.prototype.stop=function(){this.stopDiscoveryRelayServer(),this.discoveryIndex[c.FrameIdKey.PayPal]={},this.discoveryIndex[c.FrameIdKey.Honey]={}},e.prototype.startDiscoveryRelayServer=function(){"started"!=this.discoveryRelayServerState?(this.discoveryRelayServerState="started",this.discoveryRelayServer.start()):this.log.debug("discovery service: already started")},e.prototype.stopDiscoveryRelayServer=function(){"stopped"!=this.discoveryRelayServerState?(this.discoveryRelayServerState="stopped",this.discoveryRelayServer.stop()):this.log.debug("discovery service: already stopped")},e.prototype.discoveryStatus=function(e){var t=e.type,r=e.tabId,n=e.frameId,o=this.getDiscoveryResult({type:t,tabId:r,frameId:n});return o?o.lastValue.status:i.None},e.prototype.removeDiscoveryResult=function(e){var t=e.type,r=e.tabId,n=e.frameId,o=this.discoveryIndex[t]||{},a=o[r]||{};a[n]&&(clearTimeout(a[n].timeoutId),delete a[n]),o[r]=a,this.discoveryIndex[t]=o},e.prototype.setDiscoveryResult=function(e){var t=e.type,r=e.tabId,n=e.frameId,o=e.value,a=this.discoveryIndex[t]||{},i=a[r]||{};i[n]=o,a[r]=i,this.discoveryIndex[t]=a},e.prototype.getDiscoveryResult=function(e){var t=e.type,r=e.tabId,n=e.frameId,o=this.discoveryIndex[t];if(o){var a=o[r];if(a)return a[n]}},e.prototype.discover=function(e){var t=e.type,r=e.tabId,n=e.frameId,u=e.timeout;return o(this,void 0,void 0,(function(){var e,o,s,l,f,d,v;return a(this,(function(a){if(5e3,e=u||5e3,u?(s="discovery service: discover: "+t+": timeout: "+u+" ms",this.log.debug(s)):(o="discovery service: discover: "+t+": timeout: not provided, defaulting to "+e+" ms",this.log.warn(o)),"started"!==this.discoveryRelayServerState)throw new Error("discovery service: not started");return r?n?t===c.FrameIdKey.PayPal?(d=this.getDiscoveryResult({type:t,tabId:r,frameId:n}))?d.lastValue.status!==i.Pending?[2,this.discoverPayPal({tabId:r,frameId:n,timeout:e})]:[2,d.observable]:[2,this.discoverPayPal({tabId:r,frameId:n,timeout:e})]:t===c.FrameIdKey.Honey?[2,this.discoverHoney({tabId:r,frameId:n,timeout:u})]:(v="discovery service: discover: invalid type: "+t,[2,p({tabId:r,frameId:n,status:i.Error,message:v})]):(f="discovery service: discover: "+t+": frame error: no frameId value provided",this.log.debug(f),[2,p({tabId:r,frameId:n,status:i.Error,message:f})]):(l="discovery service: discover: "+t+": tab error: no tabId value provided",this.log.debug(l),[2,p({tabId:r,frameId:n,status:i.Error,message:l})])}))}))},e.prototype.discoverPayPal=function(e){var t=e.tabId,r=e.frameId,n=e.timeout,o=c.FrameIdKey.PayPal,a=this.paypalRealyScriptPath;return this.deployRelay({type:o,tabId:t,frameId:r,file:a,timeout:n})},e.prototype.discoverHoney=function(e){var t=e.tabId,r=e.frameId,n=e.timeout,o=c.FrameIdKey.Honey,a=this.honeyRealyScriptPath;return this.deployRelay({type:o,tabId:t,frameId:r,file:a,timeout:n})},e.prototype.deployRelay=function(e){var t=e.type,r=e.tabId,n=e.frameId,u=e.file,c=e.timeout;return o(this,void 0,void 0,(function(){var e,o,l,f,d,v,h,g,y,m,b=this;return a(this,(function(a){switch(a.label){case 0:e=Date.now(),o=window.location.origin,this.log.debug("\n      discovery service: discover: "+t+": deploy: tabId="+r+" frameId="+n+" file="+this.paypalRealyScriptPath+" contentScriptOrigin='"+o+"\n    "),l={tabId:r,details:{frameId:n,file:u}},a.label=1;case 1:return a.trys.push([1,3,,4]),f=this.platform.onMessage((function(t){if(t&&t.meta&&t.meta.action&&t.meta.messageId&&"checkout/relay-ready"==t.meta.action){var o=parseInt(t.meta.frameId,10);if(parseInt(t.meta.tabId,10)==r&&o===n){f.dispose();var a=t.meta.messageId,i={contentScriptOrigin:window.location.origin,deployStart:e,tabId:r,frameId:n,configId:a};b.backgroundClient.invoke(s.BackgroundAction.SendMessage,{data:{tabId:r,frameId:n,message:i}})}}})),[4,this.backgroundClient.invoke(s.BackgroundAction.ExecuteScript,{data:l})];case 2:return a.sent(),[3,4];case 3:return d=a.sent(),v="discovery service: discover: "+t+": script execution error: "+d.message,[2,p({tabId:r,frameId:n,status:i.Error,message:v})];case 4:return(m={})[t]={tabId:r,frameId:n},h=m,g={tabId:r,frameId:n,status:i.Pending},y=p(g),this.registerDiscoverySession({type:t,tabId:r,frameId:n,timeout:c,observable:y,seed:g}),this.removeFrames(h),[2,y]}}))}))},e.prototype.registerDiscoverySession=function(e){var t=this,r=e.tabId,o=e.frameId,a=e.type,u=e.timeout,s=e.observable,c=e.seed,l=s.subscribe((function(e){t.log.debug("discovery service: discover: "+a+": monitor:",e);var u=t.getDiscoveryResult({frameId:o,tabId:r,type:a});if(e&&u){if(e.status!=i.Pending)return l.dispose(),void t.removeDiscoveryResult({type:a,tabId:r,frameId:o});var s=n(n({},u),{lastValue:e});t.setDiscoveryResult({tabId:r,frameId:o,type:a,value:s})}})),f={observable:s,lastValue:c,timeoutId:setTimeout((function(){var e=t.getDiscoveryResult({tabId:r,frameId:o,type:a});if(e){var n="discovery service: discover: "+a+": timeout error",u={tabId:r,frameId:o,status:i.Error,message:n};e.observable.next(u)}}),u)};this.setDiscoveryResult({tabId:r,frameId:o,type:a,value:f})},e.prototype.removeFrames=function(e){var t=this;this.backgroundClient.invoke(s.BackgroundAction.FrameIdsRemove,{data:e}).catch((function(e){t.log.error("discovery service: remove frames: error: "+e.message)}))},e.prototype.configureDiscoveryRelayServer=function(e){var t=this,r=function(e,r){var n,o=null===(n=r.context)||void 0===n?void 0:n.origin,a=r.message.data;if(t.log.debug("discovery service: discover: ack: "+e+": "+o+")",r),!a)return t.log.error("discovery service: discover: "+e+": ack: error: missing data"),!1;var u=a.tabId,s=a.frameId;if(!u)return t.log.error("discovery service: discover: "+e+": ack: error: missing tab id"),!1;if(!s)return t.log.error("discovery service: discover: "+e+": ack: error: missing frame id"),!1;var c=t.getDiscoveryResult({type:e,tabId:u,frameId:s});if(!c)return t.log.error("discovery service: discover: "+e+": ack: error: discovery result not found for tabId="+u+" frameId="+s),!1;if(a.errors){var l=a&&a.errors?a.errors[0]:new Error("unknown error");return t.log.error("discovery service: discover: "+e+": ack: error: "+l.message),c.observable.next({tabId:u,frameId:s,status:i.Error,message:l.message,handle:r.source}),!1}return t.log.debug("discovery service: discover: "+e+": ack: discovered",a),c.observable.next({tabId:u,frameId:s,status:i.Discovered,message:o,handle:r.source}),!0};return e.handle(l.DiscoveryRelayAction.DiscoveredPayPal,(function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(n){return t=c.FrameIdKey.PayPal,[2,r(t,e)]}))}))})),e.handle(l.DiscoveryRelayAction.DiscoveredHoney,(function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(n){return t=c.FrameIdKey.Honey,[2,r(t,e)]}))}))})),e},e}();t.DiscoveryService=v},2577:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2578),t)},2578:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=t.discoverContentPlatform=void 0;var n=r(2579),o=r(2580),a=r(2581),i=r(2582),u=r(867);function s(){return"undefined"!=typeof browser?u.PlatformHandle.Browser:"undefined"!=typeof chrome?u.PlatformHandle.Chrome:"undefined"!=typeof safari?u.PlatformHandle.Safari:u.PlatformHandle.Unknown}t.discoverContentPlatform=s;var c=function(){function e(e){var t=e.platform;this.platform=t}return e.create=function(){var t,r=((t={})[u.PlatformHandle.Unknown]=function(){return new e({platform:new i.UnknownPlatform})},t[u.PlatformHandle.Safari]=function(){return new e({platform:new a.SafariPlatform})},t[u.PlatformHandle.Browser]=function(){return new e({platform:new n.BrowserPlatform})},t[u.PlatformHandle.Chrome]=function(){return new e({platform:new o.ChromePlatform})},t)[s()];return r?r():new e({platform:new i.UnknownPlatform})},e.prototype.getHandle=function(){return this.platform.getHandle()},e.prototype.getRuntimeUrl=function(e){var t=e.path;return this.platform.getRuntimeUrl({path:t})},e.prototype.tabSendMessage=function(e){var t=e.tabId,r=e.frameId,n=e.message;this.platform.tabSendMessage({tabId:t,frameId:r,message:n})},e.prototype.runtimeSendMessage=function(e){var t=e.message;return this.platform.runtimeSendMessage({message:t})},e.prototype.onMessage=function(e){return this.platform.onMessage(e)},e.prototype.injectScriptElement=function(e){var t=e.path,r=document.createElement("script");r.src=this.platform.getRuntimeUrl({path:t}),(document.head||document.documentElement).appendChild(r)},e}();t.PlatformService=c},2579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserPlatform=void 0;var n=r(867),o=function(){function e(){}return e.prototype.getHandle=function(){return n.PlatformHandle.Browser},e.prototype.getRuntimeUrl=function(e){var t=e.path;return browser.runtime.getURL(t)},e.prototype.tabSendMessage=function(e){var t=e.tabId,r=e.frameId,n=e.message,o={frameId:r};browser.tabs.sendMessage(t,n,o)},e.prototype.runtimeSendMessage=function(e){var t=e.message;return t?t.dest&&t.dest.ignoreResponse?(browser.runtime.sendMessage(t),Promise.resolve()):new Promise((function(e,r){browser.runtime.sendMessage(t,null,(function(n){if(browser.runtime.lastError){var o=new Error("browser: runtime: sendMessage: "+browser.runtime.lastError.message);r(o)}else if(n.success)e(n.data);else{var a=n&&n.error;(o=new Error(a&&a.message)).sentMessage=t,a&&(o.data=a.data,o.stack=""+(o.stack||"")+(a.stack||"")),r(o)}}))})):Promise.reject(new Error("browser: runtime: sendMessage: missing message"))},e.prototype.onMessage=function(e){return browser.runtime.onMessage.addListener(e),{dispose:function(){browser.runtime.onMessage.removeListener(e)}}},e}();t.BrowserPlatform=o},2580:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePlatform=void 0;var n=r(867),o=function(){function e(){}return e.prototype.getHandle=function(){return n.PlatformHandle.Chrome},e.prototype.getRuntimeUrl=function(e){var t=e.path;return chrome.runtime.getURL(t)},e.prototype.tabSendMessage=function(e){var t=e.tabId,r=e.frameId,n=e.message,o={frameId:r};chrome.tabs.sendMessage(t,n,o)},e.prototype.runtimeSendMessage=function(e){var t=e.message;return t?t.dest&&t.dest.ignoreResponse?(chrome.runtime.sendMessage(t),Promise.resolve()):new Promise((function(e,r){chrome.runtime.sendMessage(t,null,(function(n){if(chrome.runtime.lastError){var o=new Error("chrome: runtime: sendMessage: "+chrome.runtime.lastError.message);r(o)}else if(n.success)e(n.data);else{var a=n&&n.error;(o=new Error(a&&a.message)).sentMessage=t,a&&(o.data=a.data,o.stack=""+(o.stack||"")+(a.stack||"")),r(o)}}))})):Promise.reject(new Error("chrome: runtime: sendMessage: missing message"))},e.prototype.onMessage=function(e){return chrome.runtime.onMessage.addListener(e),{dispose:function(){chrome.runtime.onMessage.removeListener(e)}}},e}();t.ChromePlatform=o},2581:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafariPlatform=void 0;var n=r(867),o=function(){function e(){}return e.prototype.getHandle=function(){return n.PlatformHandle.Safari},e.prototype.getRuntimeUrl=function(e){var t=e.path;return browser&&browser.runtime?browser.runtime.getURL(t):safari.runtime?safari.runtime.getURL(t):safari.extension&&safari.extension.getURL?safari.extension.getURL(t):t},e.prototype.tabSendMessage=function(e){var t=e.tabId,r=e.frameId,n=e.message,o={frameId:r};browser&&browser.tabs&&browser.tabs.sendMessage&&browser.tabs.sendMessage(t,n,o),safari&&safari.tabs&&safari.tabs.sendMessage&&safari.tabs.sendMessage(t,n,o)},e.prototype._runtimeSendMessage=function(e){var t=e.message,r=e.browser;return t?t.dest&&t.dest.ignoreResponse?(r.runtime.sendMessage(t),Promise.resolve()):new Promise((function(e,n){r.runtime.sendMessage(t,null,(function(o){if(r.runtime.lastError){var a=new Error("browser: runtime: sendMessage: "+r.runtime.lastError.message);n(a)}else if(o.success)e(o.data);else{var i=o&&o.error;(a=new Error(i&&i.message)).sentMessage=t,i&&(a.data=i.data,a.stack=""+(a.stack||"")+(i.stack||"")),n(a)}}))})):Promise.reject(new Error("browser: runtime: sendMessage: missing message"))},e.prototype.runtimeSendMessage=function(e){var t=e.message;return browser&&browser.runtime&&browser.runtime.sendMessage?this._runtimeSendMessage({message:t,browser:browser}):safari&&safari.runtime&&safari.runtime.sendMessage?this._runtimeSendMessage({message:t,browser:safari}):Promise.reject(new Error("safari: runtime: sendMessage: sendMessage is unavailable"))},e.prototype.onMessage=function(e){return browser&&browser.runtime&&browser.runtime.onMessage?(browser.runtime.onMessage.addListener(e),{dispose:function(){browser.runtime.onMessage.removeListener(e)}}):safari&&safari.runtime&&safari.runtime.onMessage?(safari.runtime.onMessage.addListener(e),{dispose:function(){safari.runtime.onMessage.removeListener(e)}}):{dispose:function(){}}},e}();t.SafariPlatform=o},2582:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownPlatform=void 0;var n=r(867),o=function(){function e(){}return e.prototype.getHandle=function(){return n.PlatformHandle.Unknown},e.prototype.getRuntimeUrl=function(e){return e.path},e.prototype.tabSendMessage=function(e){},e.prototype.runtimeSendMessage=function(e){return Promise.resolve()},e.prototype.onMessage=function(e){return{dispose:function(){}}},e}();t.UnknownPlatform=o},2583:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=t.dataSentinel=void 0;var o=r(196);t.dataSentinel={};var a=function(){function e(e){var t=(void 0===e?{}:e).id,r=void 0===t?o.v4().toString():t;this.id=r}return e.makeTransportInterop=function(e){var t=e.honeyMessages,r=e.options,n=r.ignoreResponse,o=r.background,a=r.frameId,i=r.tabId;return{postMessage:function(e){var r={ignoreResponse:n,background:o,frameId:a,tab:i};return t.send(e.meta.action,e.data,r)}}},e.prototype.send=function(e){var r,o=e.message,a=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var i=a.src;i&&i.tabId&&(r=i.tabId),void 0===o.data&&(o.data=t.dataSentinel);var u=this.platform.postMessage(o,r);this.messageHandler(n(n({},o),{data:u}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,r=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:r})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,r=e.callback,n=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var n={message:e,source:t.platform};r(n)}},{dispose:function(){n||(n=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2584:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=r(196),i=function(){function e(t){var r=t.id,n=void 0===r?a.v4().toString():r,o=t.target,i=t.responseTimeoutMilliseconds;this.honeyMessagesResponses={},this.id=n,this.platform=o,this.honeyMessagesListeners={},this.responseTimeoutMilliseconds=i||e.defaultResponseTimeoutMilliseconds}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,r=e.context;r&&r.messageId&&(r.result=t.data,this.completeResponse(r))},e.prototype.completeResponse=function(e){var t=this.honeyMessagesResponses[e.messageId];t&&(t.resolve(e.result),this.flushResponse(e.messageId))},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var r=t[e];this.honeyMessagesListeners[r].dispose()}this.honeyMessagesListeners={}},e.prototype.flushResponse=function(e){var t=this.honeyMessagesResponses[e];if(t)return clearTimeout(t.timeoutId),delete this.honeyMessagesResponses[e],t},e.prototype.prepareHandle=function(e,t){var r=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return n(r,void 0,void 0,(function(){var r,n,u,s,c=this;return o(this,(function(o){switch(o.label){case 0:if(r=a.v4().toString(),n={source:{postMessage:function(){return i}},context:{result:null,src:i,messageId:r},message:{meta:{messageId:r,type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return u={timeoutId:setTimeout((function(){var e=c.flushResponse(r);e&&e.reject(new Error("honey messaging transport: response timeout: exceeded "+c.responseTimeoutMilliseconds+"ms"))}),this.responseTimeoutMilliseconds),resolve:function(e){},reject:function(e){},promise:Promise.resolve(void 0)},s=new Promise((function(e,t){u.resolve=e,u.reject=t})),u.promise=s,this.honeyMessagesResponses[r]=u,n.context.messageId=r,this.messageEnvelopeHandler(n),[4,s];case 1:return[2,o.sent()]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return r.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e.defaultResponseTimeoutMilliseconds=3e5,e}();t.HoneyMessagingTransportServer=i},2585:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var n=function(){function e(e){var t=e.allowedOrigins,r=e.id;this.id=r;for(var n=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){n=!0,this.allowedOrigins=["*"];break}}n||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,r=e.target,n=e.context;r&&n&&n.origin&&r.postMessage(t,n.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,r=this.allowedOrigins;t<r.length;t++){var n=r[t];if("*"===n)return!0;if(n===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,r=e.callback,n=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&r({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){n||(n=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=n},2587:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={messaging:{clientTimeout:5e3,backgroundTimeout:5e3},discovery:{paypalDiscoveryTimeout:15e3},allowedOrigin:"https://www.paypal.com"}},2588:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a,i=(n=R(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=4;break}return e.next=3,w.default.initialize();case 3:M=e.sent;case 4:return e.abrupt("return",M);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),u=(o=R(regeneratorRuntime.mark((function e(){var t,r,n,o,a,u,s,f,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.getInfo();case 2:return t=e.sent,e.next=5,p.default.getCurrent();case 5:if((r=e.sent).id){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,S.getCheckoutSetting)(E.checkoutSettings.iFrameOriginUrl);case 10:return n=e.sent,e.next=13,(0,S.getCheckoutSetting)(E.checkoutSettings.devToolsEnabled);case 13:return o=e.sent,e.prev=14,e.t0=Boolean,e.next=18,(0,S.getExistingCheckoutSessionState)(r.id);case 18:if(e.t1=e.sent,a=(0,e.t0)(e.t1),u=void 0,s=null,a){e.next=46;break}return e.next=25,L();case 25:return o&&(0,I.setCheckoutDevToolsState)({paypalDiscoveryComplete:!0}),e.next=28,i();case 28:return u=e.sent,e.next=31,m.default.getFeatureFlag(C,{ttl:k});case 31:if(e.sent&&x.default.transition(_.States.PayPalDiscovered),f=!1,!o){e.next=38;break}return e.next=37,(0,S.getCheckoutSetting)(E.checkoutSettings.allStoresEnabled);case 37:f=e.sent;case 38:return e.next=40,(0,S.getCheckoutStoreConfig)(r.id);case 40:if(s=e.sent,o&&f&&(s&&s.config||(s=(0,I.mockStoreCheckoutConfig)(r)),s.config.status="SUPPORTED"),s||h.default.trackPayPalSDKVersion(r),s&&s.config&&"SUPPORTED"===s.config.status){e.next=46;break}return o&&(0,I.setCheckoutDevToolsState)({isEligible:!1,eligibilityReason:"store-not-enabled",iframeLoaded:!1}),e.abrupt("return");case 46:v=function(e){if(o){var t=e?e.eligibilityReason:"none",r=!!e&&e.isEligible;(0,I.setCheckoutDevToolsState)({eligibilityReason:t,isEligible:r,iframeLoaded:!0})}},g=A("honeyCheckout"),l.default.render(c.default.createElement(O.default,{checkoutCoordinator:u,onIFrameLoadedProp:v,iframeSrc:n,store:r,storeCheckoutConfig:s,user:t}),g),e.next=54;break;case 51:e.prev=51,e.t2=e.catch(14),d.default.error("Error loading Honey Checkout iframe: "+e.t2);case 54:case"end":return e.stop()}}),e,this,[[14,51]])}))),function(){return o.apply(this,arguments)}),s=(a=R(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.getCheckoutSetting)(E.checkoutSettings.devToolsEnabled);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,p.default.getCurrent();case 7:t=e.sent,r=A("honeyCheckoutDevTools"),l.default.render(c.default.createElement(P.default,{store:t}),r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),c=T(r(0)),l=T(r(49)),f=r(2370),d=T(r(10)),p=T(r(11)),v=T(r(6)),h=T(r(115)),g=T(r(22)),y=T(r(13)),m=T(r(64)),b=T(r(2260)),w=T(r(2261)),E=r(483),_=r(2589),x=T(_),S=r(226),O=T(r(2591)),I=r(2593),P=T(I);function T(e){return e&&e.__esModule?e:{default:e}}function R(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var k=9e5,C="checkout_check_store_eligibility",M=void 0;function L(){var e=this,t=!1;return new Promise((function(r){var n,o=b.default.events.paypalCheckoutFrameDetected().subscribe((n=R(regeneratorRuntime.mark((function n(a){var u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:return t=!0,o.dispose(),u=a.frameId,s=a.tabId,c=f.HoneyMessagingTransportClient.makeTransportInterop({honeyMessages:v.default,options:{ignoreResponse:!1,background:!0,frameId:u,tabId:s}}),e.next=10,g.default.getCurrent();case 10:if(e.sent.id===a.tabId){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,i();case 15:e.sent.connectPayPalFrame({target:c}),r();case 18:case"end":return e.stop()}}),n,e)}))),function(e){return n.apply(this,arguments)}))}))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",r=document.querySelector("#"+e);if(!r){(r=document.createElement("div")).id=e;var n=document.querySelector(t);n.appendChild(r)}return r}t.default={start:function(){setTimeout(u,0),s()}}},2589:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.States=void 0;var o=u(r(6)),a=u(r(8)),i=r(2590);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=t.States={Started:"started",Ineligible:"ineligible",PayPalDiscovered:"PayPalDiscovered",PageChanged:"pageChanged",PageLoaded:"pageLoaded",NonCheckoutPageChanged:"nonCheckoutPageChanged"},l=(s(n={},c.Started,[c.PageLoaded,c.Ineligible]),s(n,c.PageLoaded,[c.PayPalDiscovered,c.PageChanged]),s(n,c.PageChanged,[c.Ineligible,c.NonCheckoutPageChanged]),s(n,c.NonCheckoutPageChanged,[c.PayPalDiscovered]),n),f=new i.StateMachine({initialState:c.Started,terminalStates:[c.Ineligible,c.PayPalDiscovered],stateTransitions:l});o.default.addListener("stores:pageview",(function(){f.transition(c.PageLoaded)})),f.terminalStateDetected.subscribe((function(){f.currentState()===c.PayPalDiscovered&&a.default.sendEvent("eca000101",{eligible:!0})})),t.default=f},2590:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=void 0;var n=r(866),o=function(){function e(e){var t=e.initialState,r=e.terminalStates,o=e.stateTransitions;this.terminalStateDetected=new n.Observable({value:{state:void 0},replay:!1}),this.state=t,this.terminalStates=r,this.stateTransitions=o}return e.prototype.transition=function(e){return this.isValidTransition(e)&&(this.state=e,this.isTerminalState()&&this.terminalStateDetected.next({state:this.state})),this.state},e.prototype.currentState=function(){return this.state},e.prototype.isValidTransition=function(e){var t=this,r=this.stateTransitions[this.state];return!(!r||!r.some((function(e){return t.terminalStates.includes(e)})))||!!this.stateTransitions[e]},e.prototype.isTerminalState=function(){return this.terminalStates.includes(this.state)},e}();t.StateMachine=o},2591:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(n=N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 2:D=e.sent,F=crypto.getRandomValues(new Uint8Array(16)),U={name:"AES-CBC",iv:F};case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),s=(o=N(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(t),e.next=3,crypto.subtle.decrypt(U,D,r);case 3:return n=e.sent,o=new TextDecoder,a=o.decode(n),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),c=r(0),l=C(c),f=C(r(1)),d=C(r(6)),p=C(r(8)),v=C(r(4)),h=C(r(17)),g=C(r(77)),y=C(r(11)),m=C(r(32)),b=C(r(30)),w=C(r(24)),E=C(r(31)),_=C(r(13)),x=C(r(114)),S=C(r(906)),O=r(15),I=C(r(2261)),P=C(r(2592)),T=r(2371),R=C(T),k=r(226);function C(e){return e&&e.__esModule?e:{default:e}}function M(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function N(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}function j(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,o=e.length;n<o;n+=1)r[n]=e.charCodeAt(n);return t}var D=void 0,F=void 0,U=void 0;function G(e){var t,r=(t=N(regeneratorRuntime.mark((function e(){var t,r,a,c,l,P,j,H,$,V,q,X,Z=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return R.default.setTarget(G.current.contentWindow,o),R.default.beginListening((function(e){return new URL(o).origin===e})),r=null,B.current=R.default.bindResponders((L(t={},T.types.extensionInitPaypalCoordinator,function(){var e=N(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&(r.reject("Cancelled"),r=null),e.prev=1,(r=I.default.startHoneyDiscovery({timeout:t.timeout})).then((function(){n.start()})),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,Z,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionPaypalCoordinatorReady,N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",Promise.reject(new Error(T.types.extensionInitPaypalCoordinator+" has not been called")));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,Z)})))),L(t,T.types.parentSendSDataEvent,function(){var e=N(regeneratorRuntime.mark((function e(t){var r,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:n=e.sent,r=JSON.parse(n);case 6:return a=(o=r).eventName,i=A(o,["eventName"]),e.next=9,p.default.sendEvent(a,i);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.parentRemoveIFrame,W),L(t,T.types.parentUpdateStyles,Y),L(t,T.types.parentSetIFrameAttribute,(function(e){return G.current.setAttribute(e.attributeName,e.value),!0})),L(t,T.types.parentRemoveIFrameAttribute,(function(e){return G.current.removeAttribute(e.attributeName),!0})),L(t,T.types.extensionActivateStoreGold,N(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.setStoreTabStandDownStatus(f.id,!1,1);case 2:return e.next=4,y.default.activateStoreGold(f.id,{src:"HoneyCheckout",inPopover:!1});case 4:return t=e.sent,h.default._reduxStore&&h.default._reduxStore.dispatch((0,O.update)(t)),f.standDown&&p.default.sendEvent("ext300006"),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,Z)})))),L(t,T.types.extensionGetIsInExperimentPopulation,(function(e){var t=e.experimentName;return b.default.getIsInExperimentPopulation(t)})),L(t,T.types.extensionExperimentsGetVariant,(function(e){var t=e.experimentName;return b.default.getVariant(t)})),L(t,T.types.extensionExperimentsTrackImpression,(function(e){var t=e.experimentName;return b.default.trackImpression(t)})),L(t,T.types.extensionGetI18nMessage,(function(e){return v.default.getMessage(e.messageName)})),L(t,T.types.extensionGetI18nMessages,function(){var e=N(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,Promise.all(t.messageNames.map(function(){var e=N(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.getMessage(t);case 2:n=e.sent,r[t]=n;case 4:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionOpenContentUILocation,(function(e){var t=e.pathname,r=e.query,n=void 0===r?{}:r,o=e.state,a=void 0===o?{}:o,i=e.force,u=void 0===i||i,s=e.feature,c=void 0===s?"honey-checkout":s,l=e.surface,f=void 0===l?"popup":l;return h.default.open({pathname:t,query:n,state:a,force:u,feature:c,surface:f})})),L(t,T.types.extensionGetContentUILocation,(function(){return h.default.getLocation()})),L(t,T.types.extensionGetContentUIVisible,(function(){return h.default.visible()})),L(t,T.types.extensionShowContentUI,(function(){return h.default.show()})),L(t,T.types.extensionHideContentUI,(function(){return h.default.hide()})),L(t,T.types.extensionGetCurrentStore,function(){var e=N(regeneratorRuntime.mark((function e(t){var r,n=t.filterProps;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f,n&&(r=(0,S.default)(f,n)),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGetCurrentPageTypes,(function(){return g.default.getCurrentPageTypes()})),L(t,T.types.extensionGetLru,(function(e){var t=e.key,r=e.options;return w.default.get(t,r)})),L(t,T.types.extensionSetLru,function(){var e=N(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:n=e.sent,r=JSON.parse(n);case 6:return a=(o=r).key,i=o.value,u=o.maxAge,e.abrupt("return",w.default.set(a,i,u));case 8:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGetBgLocalStorageItem,(function(e){var t=e.key;return(0,k.getLocalStorageItem)(t)})),L(t,T.types.extensionSetBgLocalStorageItem,(function(e){var t=e.key,r=e.value;return(0,k.setLocalStorageItem)(t,r)})),L(t,T.types.extensionDeleteBgLocalStorageItem,(function(e){var t=e.key;return(0,k.deleteLocalStorageItem)(t)})),L(t,T.types.extensionDeleteLru,(function(e){var t=e.key,r=e.options;return w.default.del(t,r)})),L(t,T.types.extensionGQLQuery,function(){var e=N(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:n=e.sent,r=JSON.parse(n);case 6:return a=(o=r).operationName,i=o.variables,u=o.config,e.next=9,d.default.send("checkout:action",{action:E.default.CHECKOUT_GQL_QUERY,data:{operationName:a,variables:i,config:u}},{background:!0});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGQLMutation,function(){var e=N(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:n=e.sent,r=JSON.parse(n);case 6:return a=(o=r).operationName,i=o.variables,u=o.config,e.next=9,d.default.send("checkout:action",{action:E.default.CHECKOUT_GQL_MUTATION,data:{operationName:a,variables:i,config:u}},{background:!0});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionAuthFetch,(function(e){var t=e.url,r=e.options;return d.default.send("checkout:action",{action:E.default.CHECKOUT_AUTH_FETCH,data:{url:t,options:r}},{background:!0})})),L(t,T.types.extensionNativeFetch,function(){var e=N(regeneratorRuntime.mark((function e(t){var r=t.url,n=t.options;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.default.send("checkout:action",{action:E.default.CHECKOUT_FETCH,data:{url:r,options:n}},{background:!0}));case 1:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGetUserInfo,(function(){return _.default.getInfo()})),L(t,T.types.extensionGetUserOffers,N(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.getInfo();case 2:return t=e.sent,r=t.id,e.next=6,y.default.getCurrent();case 6:return n=e.sent,o=n.id,e.abrupt("return",x.default.getProductOfferActivations(r,o));case 9:case"end":return e.stop()}}),e,Z)})))),t)),e.next=8,Promise.all([m.default.getDeviceId(),m.default.getSessionId(),m.default.getSessionId(),crypto.subtle.exportKey("jwk",D)]);case 8:return a=e.sent,c=i(a,4),l=c[0],P=c[1],j=c[2],H=c[3],$=v.default.getCountryCode(),V=v.default.getUILanguage(),q=g.default.getCurrentPageTypes(),e.next=19,R.default.request(T.types.checkoutInit,{paypalEnv:"production",deviceId:l,deviceSessionId:P,deviceCountryCode:$,deviceLanguage:V,sessionId:j,storeCheckoutConfig:C,offers:{offers:K,cartProductsWithOffer:Q,productOffersInCartSum:J},storeId:f.id,storeName:f.name,storeApplyCodesComplete:f.applyCodesComplete,storeNumCoupons:f.numCoupons,storeGold:f.gold,pageTypes:q,browser:"ch",extVersion:"14.0.0",parentHref:window.location.href,parentPathname:window.location.pathname,parentOrigin:window.location.origin,jsonRequestKey:H,requestIV:[].concat(M(F))});case 19:X=e.sent,z(!0),(0,k.setHoneyCheckoutEligibilityState)(f.id,X,12e4),U(X);case 23:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),n=e.checkoutCoordinator,o=e.iframeSrc,f=e.store,C=e.storeCheckoutConfig,j=e.user,U=e.onIFrameLoadedProp,G=(0,c.useRef)(),B=(0,c.useRef)((function(){})),H=(0,c.useRef)(document.querySelector("body")),$=(0,c.useState)(!1),V=i($,2),q=V[0],z=V[1];function W(){G.current.remove()}function Y(e){var t=e.visible,r=e.lockScrolling,n=e.bodyStyle,o=void 0===n?{}:n,i=e.iframeStyle,u=void 0===i?{}:i;return Object.assign(H.current.style,a({overflow:r?"hidden":"auto"},o)),Object.assign(G.current.style,a({visibility:t?"visible":"hidden"},u)),!0}var X=(0,P.default)(j,f,q),K=X.offers,Q=X.cartProductsWithOffer,J=X.productOffersInCartSum;return(0,c.useEffect)((function(){return B.current()}),[]),(0,c.useEffect)((function(){var e,t,r=(e=N(regeneratorRuntime.mark((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r&&r.action,e.next="openCheckoutModal"===e.t0?3:5;break;case 3:return h.default.hide(),e.abrupt("return",R.default.request(T.types.checkoutOpenFromFS));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)}),n=(t=N(regeneratorRuntime.mark((function e(t,r){var n,o=r.user;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.default.request(T.types.checkoutUserUpdate,{user:o,parentHref:window.location.href,parentPathname:window.location.pathname,parentOrigin:window.location.origin});case 2:n=e.sent,(0,k.setHoneyCheckoutEligibilityState)(f.id,n,12e4);case 4:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)});function o(e,t){var r=t.action,n=t.pathname;"location-change"===r&&R.default.request(T.types.checkoutRouteChange,{pathname:n})}return q?(d.default.addListener("checkout:action:ui",r),d.default.addListener("user:current:update",n),d.default.addListener("ui:action",o),function(){d.default.removeListener("checkout:action:ui",r),d.default.removeListener("user:current:update",n),d.default.removeListener("ui:action",o)}):function(){}}),[q]),l.default.createElement("iframe",{ref:G,id:"honeyCheckoutIFrame",title:"Honey Checkout",src:o,style:{visibility:"hidden"},onLoad:r,scrolling:"no"})}G.propTypes={checkoutCoordinator:f.default.object.isRequired,iframeSrc:f.default.string.isRequired,store:f.default.object.isRequired,storeCheckoutConfig:f.default.object.isRequired,user:f.default.object.isRequired,onIFrameLoadedProp:f.default.func.isRequired},t.default=G},2592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=f(r(6)),u=f(r(114)),s=f(r(24)),c=r(2371),l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}t.default=function(e,t,r){var f,p=this,v=(0,a.useState)([]),h=o(v,2),g=h[0],y=h[1],m=(0,a.useState)([]),b=o(m,2),w=b[0],E=b[1],_=(0,a.useState)(0),x=o(_,2),S=x[0],O=x[1],I=(0,a.useMemo)((function(){return{offers:g,cartProductsWithOffer:w,productOffersInCartSum:S}}),[g,w,S]),P=(f=d(regeneratorRuntime.mark((function r(n){var o,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.updatedCartProductsWithOffer,a=n.updatedProductOffersInCartSum,r.next=3,u.default.getProductOfferActivations(e.id,t.id);case 3:i=r.sent,y(i),E(o),O(a);case 7:case"end":return r.stop()}}),r,p)}))),function(e){return f.apply(this,arguments)});r&&l.default.request(c.types.checkoutCartContentsDetected,n({},I)),(0,a.useEffect)((function(){d(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],o=0,r.prev=2,r.next=5,s.default.get("offers:"+e.id+":"+t.id+":cart");case 5:return n=r.sent,r.next=8,s.default.get("offerGoldBonus:"+t.id);case 8:o=r.sent,r.next=13;break;case 11:r.prev=11,r.t0=r.catch(2);case 13:P({cartProductsWithOfferFromCache:n,productOffersInCartSumFromCache:o});case 14:case"end":return r.stop()}}),r,p,[[2,11]])})))()}),[]);var T,R=(T=d(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.action,o=r.data,e.t0=n,e.next="cartContentsDetected"===e.t0?4:5;break;case 4:return e.abrupt("return",P({updatedCartProductsWithOffer:o.cartProductsWithOffer,updatedProductOffersInCartSum:o.productOffersInCartSum}));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,p)}))),function(e,t){return T.apply(this,arguments)});return(0,a.useEffect)((function(){return i.default.addListener("offers:action",R),function(){i.default.removeListener("offers:action",R)}}),[i.default,R]),I}},2593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mockStoreCheckoutConfig=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.setCheckoutDevToolsState=function(e){y=o({},y,e),m(y)};var a=r(0),i=p(a),u=p(r(1)),s=r(3),c=r(2),l=p(r(9)),f=r(483),d=r(226);function p(e){return e&&e.__esModule?e:{default:e}}function v(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}t.mockStoreCheckoutConfig=function(e){return{sdkLatest:null,storeId:e.id,config:{status:"SUPPORTED",guestEnabled:!0,pi4Enabled:!0,encryptedRcvrId:"1234",updatedAt:"2021-03-04T20:09:24.288799000Z",storeName:e.name}}};var g=(0,s.createUseStyles)({container:{background:c.Colors.white,border:"1px solid "+c.Colors.grey300,bottom:"0",color:c.Colors.grey800,fontSize:"14px",lineHeight:"16px",minWidth:"500px",position:"fixed",right:"0",zIndex:"2147483647",fontFamily:'SuisseIntl, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},header:{alignItems:"center",borderBottom:"1px solid "+c.Colors.grey300,cursor:"pointer",display:"flex",fontSize:"16px",fontWeight:"500",padding:"12px"},expandArrow:{"& svg":{height:"14px"},marginLeft:"auto",transform:"scale(1.5)"},content:{padding:"12px"},green:{color:c.Colors.green600},iframeInput:{width:"100%"},iframeUrl:function(e){return{width:"380px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:e.iframeLoaded?c.Colors.green600:c.Colors.red600}},iframeDropdown:{marginBottom:"12px"},infoRow:{"& > :first-child":{fontWeight:"500",lineHeight:"20px",marginRight:"4px"},fontSize:"16px",alignItems:"center",display:"flex",marginBottom:"12px"},red:{color:c.Colors.red600}}),y={paypalDiscoveryComplete:!1,eligibilityReason:null,isEligible:null,iframeLoaded:!1},m=function(){};function b(e,t){return{label:e,key:t||"https://cdn-staging.joinhoney.com/honey-checkout/branches/"+e+"/index.html"}}function w(e){var t,r=this,o=(t=h(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,n=t.label,B(n),q(r),e.next=5,(0,d.setLocalStorageItem)(f.checkoutSettings.iFrameOriginUrl.localStorageKey,r);case 5:return e.next=7,(0,d.setLocalStorageItem)(f.checkoutSettings.iFrameOriginBranch.localStorageKey,n);case 7:(0,d.clearExistingCheckoutSessionState)(u.id);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),u=e.store,s=(0,a.useState)(y),p=n(s,2),w=p[0],E=p[1],_=(0,a.useState)(!1),x=n(_,2),S=x[0],O=x[1],I=(0,a.useState)(!1),P=n(I,2),T=P[0],R=P[1],k=(0,a.useState)(!0),C=n(k,2),M=C[0],L=C[1],A=(0,a.useState)(!0),N=n(A,2),j=N[0],D=N[1],F=(0,a.useState)("https://cdn.joinhoney.com/honey-checkout/index.html"),U=n(F,2),G=U[0],B=U[1],H=(0,a.useState)("staging"),$=n(H,2),V=$[0],q=$[1],z=(0,a.useState)([]),W=n(z,2),Y=W[0],X=W[1],K=w.isEligible,Q=w.eligibilityReason,J=w.paypalDiscoveryComplete,Z=w.iframeLoaded,ee=g({iframeLoaded:Z});(0,a.useEffect)((function(){h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getCheckoutSetting)(f.checkoutSettings.iFrameOriginUrl);case 2:return t=e.sent,e.next=5,(0,d.getCheckoutSetting)(f.checkoutSettings.iFrameOriginBranch);case 5:n=e.sent,t&&q(t),n&&B(n);case 8:case"end":return e.stop()}}),e,r)})))()}),[Y]),(0,a.useEffect)((function(){m=function(e){E(e)}}),[E]),(0,a.useEffect)((function(){var e;(e=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getCheckoutSetting)(f.checkoutSettings.allStoresEnabled);case 2:t=e.sent,O(t),L(!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,a.useEffect)((function(){var e;(e=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getCheckoutSetting)(f.checkoutSettings.devToolsExpanded);case 2:t=e.sent,R(t),D(!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,a.useEffect)((function(){var e;(e=h(regeneratorRuntime.mark((function e(){var t,r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[b("production","https://cdn.joinhoney.com/honey-checkout/index.html"),b("staging","https://cdn-staging.joinhoney.com/honey-checkout/index.html"),b("local","https://test.joinhoney.com:9004/honey-checkout/index.html")],r=["main","HEAD -> origin/main"],e.next=4,(0,d.getActiveDevBranches)();case 4:n=e.sent,o=n.filter((function(e){return!r.includes(e)})),a=o.map((function(e){return b(e)})),X([].concat(t,v(a)));case 8:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]);var te=null===K,re="Ineligible:";te?re="Eligibility: Waiting...":K&&(re="Eligible:");var ne=(0,a.useMemo)((function(){return Y.findIndex((function(e){return e.label===G}))}),[Y,G]),oe=V.replace(/^https:\/\/(.*)$/gi,"$1");return j?null:i.default.createElement("div",{className:ee.container},i.default.createElement("div",{className:ee.header,onClick:function(){(0,d.setLocalStorageBoolean)(f.checkoutSettings.devToolsExpanded.localStorageKey,!T),R(!T)}},i.default.createElement("div",null,"Checkout DevTools"),i.default.createElement(c.Icon,{className:ee.expandArrow,icon:T?"direction-down-16":"direction-up-16"})),T&&i.default.createElement("div",{className:ee.content},i.default.createElement("div",{className:ee.infoRow},i.default.createElement("span",null,"Iframe URL:"),i.default.createElement("a",{href:V,target:"_blank",rel:"noreferrer",className:ee.iframeUrl},oe)),i.default.createElement("div",{className:ee.iframeDropdown},i.default.createElement(c.Dropdown,{id:"honey-checkout-devtools-iframe-dropdown",label:"Loading available feature branches...",onChange:o,options:Y,selectedOption:ne,size:32,showLabel:!0})),i.default.createElement("div",{className:ee.infoRow},i.default.createElement("span",null,"Data Env:"),i.default.createElement("span",null,"production")),i.default.createElement("div",{className:ee.infoRow},i.default.createElement("span",null,"PayPal Env:"),i.default.createElement("span",null,"production")),i.default.createElement("div",{className:(0,l.default)(ee.infoRow,ee.spb)},i.default.createElement("span",null,"SPB: ",!J&&"Waiting..."),J&&i.default.createElement("strong",{className:ee.green},"PayPal Detected")),i.default.createElement("div",{className:ee.infoRow},i.default.createElement("span",null,re),!te&&i.default.createElement("strong",{className:K?ee.green:ee.red},Q)),i.default.createElement("div",{className:ee.infoRow},i.default.createElement("span",null,"All stores enabled?"),!1,M?null:i.default.createElement("input",{type:"checkbox",checked:S,onChange:function(){(0,d.setLocalStorageBoolean)(f.checkoutSettings.allStoresEnabled.localStorageKey,!S),O(!S)}})),i.default.createElement(c.Button,{buttonType:"secondary-ghost",copy:"Refresh background and current tab",isFlexible:!0,onClick:function(){(0,d.reloadBg)(),setTimeout((function(){window.location.reload()}),500)},size:32})))}w.propTypes={store:u.default.object.isRequired},t.default=w},2594:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=(n=regeneratorRuntime.mark((function e(t,r,n){var o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,e.t0){e.next=5;break}return e.next=4,u.default.getCurrent();case 4:e.t0=e.sent;case 5:return o=e.t0,a=[c,l,f],n&&(a=n),e.next=10,Promise.all(a.map((function(e){return e(t,o)})));case 10:return i=e.sent,e.abrupt("return",i.some((function(e){return e}))&&d(o));case 12:case"end":return e.stop()}}),e,this)})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e,t,r){return o.apply(this,arguments)}),i=s(r(25)),u=s(r(11));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t){return e.GOLD_REWARDS&&(!t.gold||t.gold&&t.gold.activated)},l=function(e,t){return e&&(e.FIND_SAVINGS||e.GOLD_REWARDS)&&i.default.unix(t.applyCodesComplete).isAfter((0,i.default)().subtract(2,"hours"))},f=function(e){return e&&!e.FIND_SAVINGS},d=function(e){return!e.standDown};t.default={isFsOrGoldAndMoreThanTwoHrs:l,isNotOnFs:f,isOnGoldRewardsOrActivated:c,isPaymentsViewPrioritized:a}},2595:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(n=k(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 2:L=e.sent,A=crypto.getRandomValues(new Uint8Array(16)),N={name:"AES-CBC",iv:A};case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),s=(o=k(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=M(t),e.next=3,crypto.subtle.decrypt(N,L,r);case 3:return n=e.sent,o=new TextDecoder,a=o.decode(n),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),c=r(0),l=I(c),f=I(r(1)),d=I(r(6)),p=I(r(8)),v=I(r(67)),h=r(496),g=I(r(30)),y=I(r(4)),m=I(r(64)),b=I(r(13)),w=I(r(17)),E=I(r(11)),_=r(2374),x=I(r(2596)),S=r(2375),O=I(S);function I(e){return e&&e.__esModule?e:{default:e}}function P(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function k(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var C="https://cdn.joinhoney.com/gift-cards/index.html";function M(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,o=e.length;n<o;n+=1)r[n]=e.charCodeAt(n);return t}var L=void 0,A=void 0,N=void 0;function j(e){var t,r=this,n=(t=k(regeneratorRuntime.mark((function e(){var t,r,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return O.default.setTarget(I.current.contentWindow,C),O.default.beginListening((function(e){return C.match(new RegExp("^("+e+")"))})),M.current=O.default.bindResponders((T(t={},S.types.extensionSendSDataEvent,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.eventName,n=R(t,["eventName"]),e.next=3,p.default.sendEvent(r,n);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionRemoveIFrame,re),T(t,S.types.extensionUpdateStyles,ne),T(t,S.types.extensionExperimentsGetVariant,(function(e){return g.default.getVariant(e.variantName)})),T(t,S.types.extensionGetI18nMessage,(function(e){return y.default.getMessage(e.messageName)})),T(t,S.types.extensionSetIFrameAttribute,(function(e){return I.current.setAttribute(e.attributeName,e.value),!0})),T(t,S.types.extensionRemoveIFrameAttribute,(function(e){return I.current.removeAttribute(e.attributeName),!0})),T(t,S.types.extensionSetGiftCardsEnabledForUser,(function(e){return b.default.updateSetting("honeyWallet",e.enabled?1:0)})),T(t,S.types.extensionOpenLoginPrompt,(function(){return w.default.open({pathname:"/gift-cards-auth",query:{},state:{},force:!0,feature:"gift-cards-auth",surface:"popup"})})),T(t,S.types.extensionHideContentUI,(function(){return w.default.hide()})),T(t,S.types.extensionGetCartPrice,k(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:return t=e.sent,e.next=5,(0,_.getCartPrice)(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,i)})))),T(t,S.types.extensionSetHoneyStorageItem,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,n=t.value,e.next=3,v.default.local.set(r,n);case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGetHoneyStorageItem,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,e.next=3,v.default.local.get(r).catch((function(){return null}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionRemoveHoneyStorageItem,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,e.next=3,v.default.local.del(r).catch((function(){return null}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionSetWindowLocalStorageItem,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,n=t.value,e.next=3,d.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.SET_LOCAL_STORAGE_ITEM,data:{key:r,value:n}},{background:!0});case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGetWindowLocalStorageItem,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,e.next=3,d.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.GET_LOCAL_STORAGE_ITEM,data:{key:r}},{background:!0});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionRemoveWindowLocalStorageItem,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,e.next=3,d.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.REMOVE_LOCAL_STORAGE_ITEM,data:{key:r}},{background:!0});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGQLQuery,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:n=e.sent,r=JSON.parse(n);case 6:return e.next=8,d.default.send("honey-pay-now:action:gql-query",{action:h.HONEY_PAY_NOW_MESSAGES.GQL_QUERY,data:r},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGQLMutation,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:n=e.sent,r=JSON.parse(n);case 6:return e.next=8,d.default.send("honey-pay-now:action:gql-query",{action:h.HONEY_PAY_NOW_MESSAGES.GQL_MUTATION,data:r},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionAuth,function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.authProvider,n=t.isLoginMode,o=t.isOptOut,e.t0=r,e.next="google"===e.t0?4:"apple"===e.t0?6:"paypal"===e.t0?8:"facebook"===e.t0?10:(e.t0,12);break;case 4:return n?b.default.loginGoogle():b.default.registerGoogle(o),e.abrupt("break",14);case 6:return n?b.default.loginApple():b.default.registerApple(o),e.abrupt("break",14);case 8:return n?b.default.loginPaypal():b.default.registerPaypal(o),e.abrupt("break",14);case 10:return n?b.default.loginFacebook():b.default.registerFacebook(o),e.abrupt("break",14);case 12:a=n?"login":"join",b.default.openEmailAuth(a,"ext",!1,!1);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGetUserABGroup,k(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.getUserABGroup("auth");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,i)})))),T(t,S.types.extensionGetI18nCountryCode,k(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.default.getCountryCode(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,i)})))),T(t,S.types.extensionSetIsMinimized,function(){var e=k(regeneratorRuntime.mark((function e(t){var r=t.isMinimized,n=t.savings,o=t.goldAward,a=t.autoPopType;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(a),n&&W(n),o&&Q(o),$(r);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionOpenGiftCardDealModal,k(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:t=e.sent,E.default.tag(t.id,"extension_links",null,{forceHidden:!0,src:"GiftCardDealOpenModal"});case 4:case"end":return e.stop()}}),e,i)})))),t)),e.next=7,crypto.subtle.exportKey("jwk",L);case 7:return r=e.sent,e.next=10,O.default.request(S.types.giftCardsInit,a({},o,{jsonRequestKey:r,requestIV:[].concat(P(A)),parentOrigin:window.location.origin}));case 10:n=e.sent,f.current=n;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),o=e.data,f=(0,c.useRef)(!1),I=(0,c.useRef)(),M=(0,c.useRef)((function(){})),N=(0,c.useRef)(document.querySelector("body")),j=(0,c.useState)(null),D=i(j,2),F=D[0],U=D[1],G=(0,c.useState)(!1),B=i(G,2),H=B[0],$=B[1],V=(0,c.useState)(null),q=i(V,2),z=q[0],W=q[1],Y=(0,c.useState)(null),X=i(Y,2),K=X[0],Q=X[1],J=(0,c.useState)(null),Z=i(J,2),ee=Z[0],te=Z[1];function re(){M.current(),O.default.stopListening(),I.current.remove()}function ne(e){var t=e.visible,r=e.lockScrolling,n=e.bodyStyle,o=void 0===n?{}:n,i=e.iframeStyle,u=void 0===i?{}:i;return Object.assign(N.current.style,a({overflow:r?"hidden":"auto"},o)),Object.assign(I.current.style,a({visibility:t?"visible":"hidden"},u)),!0}(0,c.useEffect)((function(){k(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getFeatureFlag("gift_cards_use_remote_iframe");case 2:t=e.sent,U(t);case 4:case"end":return e.stop()}}),e,r)})))()}),[]),(0,c.useEffect)((function(){return function(){return re()}}),[]),(0,c.useEffect)((function(){var e,t=(e=k(regeneratorRuntime.mark((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r&&r.action,e.next=e.t0===h.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_MODAL_VISIBILITY?3:e.t0===h.HONEY_PAY_NOW_MESSAGES.REMOVE_PAY_NOW_IFRAME?5:7;break;case 3:return ne({visible:r.data.isVisible,lockScrolling:r.data.isVisible}),e.abrupt("break",8);case 5:return re(),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)});function r(e,t){var r=t.user;O.default.request(S.types.giftCardsUserUpdate,r)}return d.default.addListener("honey-pay-now:action:ui",t),d.default.addListener("user:current:update",r),function(){d.default.removeListener("honey-pay-now:action:ui",t),d.default.removeListener("user:current:update",r)}}),[]);return null===F?null:l.default.createElement(c.Fragment,null,H&&l.default.createElement(x.default,{autoPopType:ee,handleUnMinimize:function(){O.default.request(S.types.giftCardsSetIsMinimized,!1),$(!1,ee)},goldAward:K,savings:z}),l.default.createElement("iframe",{ref:I,id:"giftcardsIFrame",title:"Honey Pay Now",src:C,className:null,style:{visibility:"hidden"},onLoad:n,scrolling:"no"}))}j.propTypes={data:f.default.object},j.defaultProps={data:{}},t.default=j},2596:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=f(o),i=f(r(1)),u=r(3),s=r(2),c=r(123),l=f(r(4));function f(e){return e&&e.__esModule?e:{default:e}}var d={root:{display:"flex",position:"fixed",right:"0px",top:"80px",zIndex:2147483647},container:{backgroundColor:s.Colors.white,width:"280px",right:function(e){return e.isExpanded?"0px":"-202px"},transition:"all 400ms ease-in-out",height:"56px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",borderRadius:"5px 0px 0px 5px",position:"relative",boxShadow:"0px 2px 35px rgba(0, 0, 0, 0.25)"},icon:{cursor:"pointer",width:"18px",height:"18px",marginLeft:"9px"},dotsContainer:{alignItems:"center",cursor:"move",display:"flex",height:"100%",paddingRight:"9px"},dots:{display:"flex",flexDirection:"column",height:"17px",width:"10px",justifyContent:"space-between",marginLeft:"16px"},dotRow:{width:"100%",display:"flex",justifyContent:"space-between"},dot:{height:"3px",width:"3px",display:"inline-block",borderRadius:"50%",backgroundColor:s.Colors.grey600},content:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%"},savingsText:{marginLeft:"18px"},giftCardInfo:{fontSize:"12px"},title:{color:s.Colors.grey900,fontSize:"12px",fontWeight:"600"},savings:{color:s.Colors.green500,fontWeight:"700"},goldAward:{color:s.Colors.gold900,fontWeight:"700"},seeSavings:{color:s.Colors.grey800,composes:"link1"}},p=(0,u.createUseStyles)(d),v=function(e){var t=e.handleUnMinimize,r=e.savings,i=e.goldAward,u=e.autoPopType,s=(0,o.useState)(!1),f=n(s,2),d=f[0],v=f[1],h=p({isExpanded:d}),g=(0,o.createRef)(),y=function(e){return function(){v(e)}},m=function(e){var t=e.changedTouches&&e.changedTouches[0].clientY||e.clientY;(t<0||t>window.innerHeight-56)&&(t=t<0?0:window.innerHeight-56),g.current.style.top=t+"px"};function b(){window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",b)}var w=function(){return r&&!i},E=function(){return!r&&i?l.default.getMessageAndReplace("Get_GOLDPOINTS_Gold_points",{GOLDPOINTS:a.default.createElement("span",{className:h.goldAward},i)}):w()?l.default.getMessageAndReplace("Save_SAVINGS_with_a_gift_card",{SAVINGS:a.default.createElement("span",{className:h.savings},(0,c.centsToDollars)(r))}):l.default.getMessageAndReplace("Save_SAVINGS_and_get_Gold",{SAVINGS:a.default.createElement("span",{className:h.savings},(0,c.centsToDollars)(r))})};return a.default.createElement("div",{ref:g,className:h.root},a.default.createElement("div",{className:h.container},a.default.createElement("div",{className:h.dotsContainer,onMouseDown:function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",b)},onMouseUp:b,onTouchMove:m},a.default.createElement("div",{className:h.dots},a.default.createElement("div",{className:h.dotRow},a.default.createElement("div",{className:h.dot}),a.default.createElement("div",{className:h.dot})),a.default.createElement("div",{className:h.dotRow},a.default.createElement("div",{className:h.dot}),a.default.createElement("div",{className:h.dot})),a.default.createElement("div",{className:h.dotRow},a.default.createElement("div",{className:h.dot}),a.default.createElement("div",{className:h.dot})))),a.default.createElement("div",{className:h.content,onClick:t,onMouseEnter:y(!0),onMouseLeave:y(!1)},a.default.createElement("img",{className:h.icon,src:"https://cdn.honey.io/images/finance/honey-icon-orange.svg",alt:"Open Honey"}),a.default.createElement("div",{className:h.savingsText},"HOOK"===u?a.default.createElement(o.Fragment,null,a.default.createElement("div",{className:h.title},E()),a.default.createElement("div",{className:h.seeSavings},w()?l.default.getMessage("Click_to_see_savings"):l.default.getMessage("Click_to_see_Gift_Card_Deal"))):a.default.createElement("div",{className:h.giftCardInfo},l.default.getMessage("Click_for_gift_card_info"))))))};v.propTypes={handleUnMinimize:i.default.func.isRequired,savings:i.default.number.isRequired,goldAward:i.default.number.isRequired,autoPopType:i.default.string.isRequired},t.default=v},2602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(907),a=(n=o)&&n.__esModule?n:{default:n};t.default={getExtensionID:function(){return a.default.getExtensionID()},connect:function(e,t){return a.default.connect(e,t)},addOnConnectListener:function(e){return a.default.addOnConnectListener(e)},removeOnConnnectListener:function(e){return a.default.removeOnConnnectListener(e)}}},2603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unMountApp=function(e){(0,i.unmountComponentAtNode)(e)};var n,o,a=h(r(0)),i=r(49),u=r(5),s=r(46),c=r(3),l=h(r(163)),f=h(r(2604)),d=h(r(185)),p=h(r(120)),v=r(948);function h(e){return e&&e.__esModule?e:{default:e}}t.default=(n=regeneratorRuntime.mark((function e(){var t,r,n,o,i,h,g,y,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.default)(),r=t.plugins,(n=document.createElement("div")).style="z-index: 2147483647 !important",document.body.appendChild(n),o=n,(i=new MutationObserver((function(e){var t=!0,r=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var s=a.value;"attributes"===s.type&&"style"===s.attributeName&&(i.disconnect(),n.style="z-index: 2147483647 !important")}}catch(e){r=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(r)throw o}}}))).observe(o,{attributes:!0,attributeFilter:["style"]}),h="closed",e.next=11,(0,p.default)(n,null,{mode:h,dontInjectFonts:!0});case 11:return g=e.sent,y=new c.SheetsRegistry,(m=(0,s.create)()).setup({plugins:r,insertionPoint:g.getElementById("honey")}),b=a.default.createElement(c.JssProvider,{registry:y,jss:m},a.default.createElement(u.Provider,{store:d.default},a.default.createElement(v.Provider,{value:{shadowContainer:n}},a.default.createElement(f.default,null)))),e.next=18,(0,p.default)(n,b,{mode:h,dontInjectFonts:!0,feature:"honey-tips",surface:"badge"});case 18:return e.abrupt("return",{shadowRoot:g});case 19:case"end":return e.stop()}}),e,this)})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)})},2604:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=c(n),a=c(r(2605)),i=c(r(2634)),u=c(r(2653)),s=c(r(2654));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.default.createElement(n.Fragment,null,o.default.createElement(u.default,null,o.default.createElement(s.default,null,o.default.createElement(a.default,null)),o.default.createElement(i.default,null)))}},2605:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=y(r(0)),a=y(r(10)),i=r(5),u=y(r(2606)),s=y(r(2628)),c=y(r(2632)),l=r(237),f=y(r(351)),d=y(r(2633)),p=r(122),v=r(20),h=r(14),g=r(540);function y(e){return e&&e.__esModule?e:{default:e}}var m={movable:u.default,teaser:s.default,sticky_teaser:u.default,launchpad:c.default,launchpadTeaser:s.default,launchpadBadge:u.default},b="teaser",w="sticky_teaser",E="movable",_="launchpadTeaser",x="launchpadBadge",S="none";t.default=function(){var e=(0,l.useTeaser)(),t=e.teaserDisabled,r=e.showTeaser,u=void 0,s=(0,f.default)()||[],c=(0,d.default)()||!1,y=c.hasValidLaunchpadTips,O=c.hasValidLaunchpadBadgeTips,I=(0,p.useIsStickyTeaser)(),P=n(I,1)[0],T=(0,i.useSelector)(v.selectCurrentContainerId),R=((0,i.useSelector)((0,h.selectUniversalContainerById)(T))||{}).isLaunchpad;if(R&&(!s||!s.length))return null;R?y?O?u=r&&!t?_:x:(a.default.debug("\n        "+g.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(g.VALID_LAUNCHPAD_BADGE_TIPS).join(", ")+" so not showing launchpad badge"),u=S):(a.default.debug(g.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(g.VALID_LAUNCHPAD_TIPS).join(", ")+" so not showing launchpad"),u=S):u=r&&!t?P?w:b:E;var k=m[u];return k?o.default.createElement(k,{isMini:!0,isLaunchpad:R,isTeaser:r&&!t,isMiniTeaser:!0,isNotification:!1,isFullyExpandedPdp:!0,isMiniEngagement:!0}):null}},2606:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=K(o),i=K(r(1)),u=r(5),s=r(3),c=r(33),l=K(r(70)),f=K(r(777)),d=K(r(4)),p=K(r(6)),v=K(r(13)),h=r(198),g=K(r(240)),y=K(r(31)),m=K(r(88)),b=K(r(122)),w=r(491),E=K(r(549)),_=r(2),x=K(r(544)),S=K(r(548)),O=K(r(928)),I=r(14),P=K(r(148)),T=r(19),R=r(237),k=K(r(960)),C=K(r(351)),M=K(r(219)),L=K(r(918)),A=K(r(759)),N=K(r(2607)),j=K(r(2612)),D=K(r(550)),F=K(r(2613)),U=K(r(2614)),G=K(r(2263)),B=r(18),H=K(r(2264)),$=K(r(2265)),V=K(r(2266)),q=K(r(2381)),z=K(r(2620)),W=K(r(2383)),Y=K(r(2625)),X=K(r(2627));function K(e){return e&&e.__esModule?e:{default:e}}function Q(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var J=(0,s.createUseStyles)({middleHeader:{composes:"title1",color:_.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},containerLoader:{paddingTop:"60px",backgroundColor:_.Colors.white,display:"flex",justifyContent:"center",alignItems:"center"}}),Z=function(){var e=J();return a.default.createElement("div",{className:e.contentLoading})},ee=function(e){var t=e.isMini,r=e.isMiniTeaser,i=e.isNotification,s=e.isFullyExpandedPdp,K=e.isTeaser,ee=e.isLaunchpad,te=(0,u.useDispatch)(),re=(0,o.createRef)(),ne=(0,o.useRef)(),oe=(0,o.useRef)(),ae=(0,o.useRef)(),ie=(0,R.useContainerState)(),ue=n(ie,3),se=ue[0],ce=ue[1],le=ue[2],fe=(0,R.useContainerOpen)(),de=n(fe,3),pe=de[0],ve=de[1],he=de[2],ge=(0,L.default)(),ye=n(ge,2)[1],me=(0,o.useRef)(!0),be=(0,M.default)()||{},we=(0,B.useFeedbackMode)(),Ee=n(we,3),_e=Ee[0],xe=Ee[2],Se=(0,j.default)(),Oe=n(Se,2),Ie=Oe[0],Pe=Oe[1],Te=(0,C.default)()||[],Re=l.default.getTipsConfigSync().storeIds,ke=void 0===Re?[]:Re,Ce=be.id,Me=(0,o.useMemo)((function(){return ke.every((function(e){return e!==Ce}))}),[Ce,ke]),Le=(0,A.default)(),Ae=Le.showBanner,Ne=void 0!==Ae&&Ae,je=Le.copy,De=Le.color,Fe=Le.ctaAction,Ue=Le.ctaCopy,Ge=(0,o.useState)(),Be=n(Ge,2),He=Be[0],$e=Be[1],Ve=(0,o.useState)(!1),qe=n(Ve,2),ze=qe[0],We=qe[1],Ye=(0,o.useState)(0),Xe=n(Ye,2),Ke=Xe[0],Qe=Xe[1],Je=(0,B.useBadgeSnoozed)(),Ze=(0,B.useFullscreenTipInstance)(),et=J(),tt=(0,o.useState)(),rt=n(tt,2),nt=rt[0],ot=rt[1],at=(0,W.default)(re),it=at.scrollToCategory,ut=at.addTipRef,st=at.scrollToTop,ct=at.isScrolling,lt=[],ft=(0,q.default)().startAnimation,dt=(0,b.default)(),pt=n(dt,1)[0],vt=(0,u.useSelector)((0,I.selectCategoryIdsByTipInstanceIds)(Te)),ht=pt===w.TIPS_EXP_ENUM.delayed_hover_or_click;(0,o.useEffect)((function(){0!==Te.length&&(0,T.incrementSessionCount)()}),[Te]),(0,o.useEffect)((function(){if(ee){var e=y.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t={background:!0};le&&Ce&&me.current&&pe&&Q(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return me.current=!1,r.next=3,p.default.send("honeyTips:tips",{action:e,storeId:Ce},t);case 3:case"end":return r.stop()}}),r,void 0)})))()}}),[le,Ce,me,ve,ee,pe]),(0,o.useEffect)((function(){ee&&Q(regeneratorRuntime.mark((function e(){var t,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!be.id){e.next=11;break}return e.next=3,Promise.all([v.default.getInfo(),v.default.getUserFollow(),v.default.getStoreSessionCount(be.id)]);case 3:t=e.sent,r=n(t,3),o=r[0],a=r[1],i=r[2],$e(o),We(a.includes(be.id)),Qe(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[be.id,be.storeIcon,ee]),(0,o.useEffect)((function(){var e;(e=Q(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:e.sent&&he();case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useLayoutEffect)((function(){var e=setInterval((function(){_e||Ze||re.current&&(oe.current=re.current.clientHeight)}),100);return function(){e&&clearInterval(e)}}));var gt,yt=(0,B.useTipInstanceFullscreen)(Ze),mt=n(yt,2)[1],bt=(0,B.useBottomSheet)(),wt=n(bt,2),Et=wt[0],_t=void 0===Et?{}:Et,xt=wt[1],St=(0,B.useTipInstanceBottomSheet)(_t.tipInstanceId),Ot=n(St,1)[0],It=void 0===Ot?"":Ot,Pt=m.default.AMAZON_STORES.includes(be.id),Tt=function(e){var t=e.touches&&e.touches[0].clientY||e.clientY;ne.current=!1,Pe({dragging:!0,mouseTop:t})},Rt=function(){Pe({dragging:!1})},kt=function(e){var t=e.changedTouches[0].clientY;ne.current=t!==Ie.mouseTop,e.preventDefault()},Ct=(gt=Q(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He&&He.isLoggedIn||v.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=ze?"UNFOLLOW":"FOLLOW")?te((0,T.storeFollow)()):"UNFOLLOW"===t&&te((0,T.storeUnfollow)()),e.next=5,v.default.updateUserFollow(be.id,He.id,t);case 5:r=e.sent,We(r.includes(be.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return gt.apply(this,arguments)}),Mt=function(){xe()};if((0,o.useEffect)((function(){var e=function(){Pe({dragging:!1})},t=function(e){ne.current=e.clientY!==Ie.mouseTop};return Ie.dragging?(ht&&window.addEventListener("mousemove",t),window.addEventListener("mouseup",e)):(ht&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)),function(){ht&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[Ie.dragging,Ie.mouseTop,Pe,ht]),!ce)return a.default.createElement(o.Fragment,null);var Lt,At=(Lt=(0,z.default)(),a.default.createElement("div",{className:et.containerLoader},a.default.createElement(c.ContainerLoader,{loadingImage:"https://cdn.honey.io/images/tips/coiny_happy_scientist_beakers_transparent.gif",loadingPhrases:Lt,marqueeDelay:2e3}))),Nt=ee?!!He&&!_e&&a.default.createElement(h.StoreFollowUI,{inPopover:!1,store:be,storeFollowButton:a.default.createElement("div",{className:et.followBtnOverrides},a.default.createElement(g.default,{allowTooltip:!1,isFollowing:ze,isHeaderButton:!0,store:{storeId:be.id,storeName:be.name},storeSessionCount:Ke,subSrc:"launchpad",updateUserFollow:Ct,user:He}))}):null,jt=a.default.createElement(o.Fragment,null,Nt,0!==Te.length?Te.map((function(e,t){var r=Pt&&t===Te.length-1,n=Pt?"1px":"0px";return a.default.createElement(V.default,{isFullyExpandedPdp:s,key:""+e,tipInstanceId:e,fullScreenTipInstanceId:Ze},a.default.createElement("div",{key:e,style:{marginBottom:r?n:"8px"}},a.default.createElement(G.default,null,a.default.createElement("div",{ref:function(t){t&&ut(vt[e],t)}},a.default.createElement(k.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card",scrollToCard:it,scrollToTop:st})))))})):At),Dt=Ze&&a.default.createElement("div",{style:{minHeight:oe.current}},Ze?a.default.createElement(V.default,{key:""+Ze,tipInstanceId:Ze},a.default.createElement(k.default,{tipInstanceId:Ze,templateType:"fullscreen"})):a.default.createElement(c.LoaderGroup,null))||null,Ft=a.default.createElement(G.default,null,a.default.createElement(f.default,{id:It,open:_t.isOpen,onClose:xt,onTransitionEnd:function(){_t.isOpen||te((0,T.resetBottomSheet)())}},a.default.createElement(k.default,{tipInstanceId:_t.tipInstanceId,templateType:"bottomSheet"}))),Ut=se?a.default.createElement(Z,null):!_e&&!Ze&&jt||null,Gt=_e&&a.default.createElement("div",{style:{minHeight:oe.current}},a.default.createElement(H.default,null))||null,Bt=i&&a.default.createElement("div",{style:{position:"absolute",left:10,top:-5,zIndex:1}},a.default.createElement(O.default,null))||null,Ht=a.default.createElement(_.NotificationBanner,{show:Ne,copy:je,color:De,ctaAction:Fe,ctaCopy:Ue,onClose:function(){return te((0,T.resetNotificationBanner)())},src:"UniversalContainer-ConnectedMovableContainer",short:!0,stackAbove:!0,zIndex:3}),$t=t?a.default.createElement(U.default,{dragging:Ie.dragging,dragged:ne,onMouseDown:Tt,onMouseUp:Rt,onTouchMove:kt,snoozed:Je,openContainer:function(e){ht&&Pe({dragging:!1}),te((0,X.default)(e))&&ot(e),ve()},closeContainer:he,isStaticContainer:ht,isMiniTeaser:r,isTeaser:K,notificationBadge:Bt}):a.default.createElement(F.default,{dragging:Ie.dragging,dragged:ne,onMouseDown:Tt,onMouseUp:Rt,onTouchMove:kt,snoozed:Je,openContainer:ve,closeContainer:he}),Vt=Te.length>0?$t:null,qt=Me?Vt:$t;return a.default.createElement(P.default.Provider,{value:{isScrolling:ct,isBadge:!0}},a.default.createElement(N.default,{position:Ie,isContainerOpen:pe,dragging:Ie.dragging,onInjectionError:function(e){te((0,T.sdataTipBadgeInjectionError)(e))},isStaticContainer:ht,container:a.default.createElement("div",{onMouseOver:ht?function(){}:ve,onMouseLeave:ht?function(){}:function(){Ze&&Ze.split(":")[1].includes("DL")?he(8e3):he()},ref:function(e){return e&&e.firstChild&&e.firstChild.firstChild&&e.firstChild.firstChild.firstChild&&e.firstChild.firstChild.firstChild.firstChild&&2===e.firstChild.firstChild.firstChild.firstChild.childNodes.length&&lt.push(e.firstChild.firstChild.firstChild.firstChild.childNodes[1]),ae},style:{}},a.default.createElement(Y.default,{show:pe&&!Je,onVisible:function(){if(nt&&"string"==typeof nt&&!nt.includes("Main")){var e=te((0,T.getTipByTipInstanceId)(nt)).categoryId;it(e)}}},a.default.createElement(c.UniversalContainer,{open:pe&&!Je,"aria-expanded":"true"},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:re},header:a.default.createElement(E.default,{leftContainer:a.default.createElement((function(){return _e?a.default.createElement("span",{onClick:Mt},a.default.createElement(x.default,null)):Ze?a.default.createElement("span",{onClick:mt(!1)},a.default.createElement(x.default,null)):a.default.createElement(S.default,null)}),null),middleContainer:a.default.createElement((function(){return Ze?a.default.createElement("span",{className:et.middleHeader},d.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement($.default,{onClick:function(){te((0,T.tipContainerActionsClose)())},onSettingsClick:function(){}})}),footer:Pt&&a.default.createElement(D.default,{isContainerOpen:pe})},se&&At,Ht,Dt,Ut,Gt,Ft)))),badge:qt,startBadgeAnimation:ft}))};ee.propTypes={isMini:i.default.bool,isLaunchpad:i.default.bool,isMiniTeaser:i.default.bool,isNotification:i.default.bool,isFullyExpandedPdp:i.default.bool,isTeaser:i.default.bool},ee.defaultProps={isMini:!1,isLaunchpad:!1,isMiniTeaser:!1,isNotification:!1,isFullyExpandedPdp:!1,isTeaser:!1},t.default=ee},2607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=h(a),u=r(234),s=h(r(1)),c=h(r(2608)),l=h(r(2262)),f=h(r(947)),d=h(r(2610)),p=h(r(718)),v=h(r(2611));function h(e){return e&&e.__esModule?e:{default:e}}var g=void 0,y={transition:"opacity 500ms ease-in-out",opacity:1},m={transition:"opacity 0ms ease-in-out",opacity:0},b={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}},w={entering:{transform:"translateX(57px)"},entered:{transform:"translateX(0px)"},exiting:{transform:"translateX(0px)"},exited:{transform:"translateX(57px)"}},E={transition:"transform 200ms ease-in-out",transform:"translateX(57px)"},_=function(e){var t=e.container,r=e.position,s=e.badge,h=e.isContainerOpen,_=e.dragging,x=e.isStaticContainer,S=e.startBadgeAnimation,O=(0,p.default)(),I=O.movableBadgeSettings,P=O.movableBadgeDefaults,T="bottomRight"===(I&&I.orientation||P&&P.orientation),R=(0,d.default)(T),k=o(R,2),C=k[0],M=k[1],L=i.default.createRef(),A=(0,a.useState)(),N=o(A,2),j=N[0],D=N[1],F=(0,a.useState)(!1),U=o(F,2),G=U[0],B=U[1],H=(0,a.useState)(!1),$=o(H,2),V=$[0],q=$[1],z=(0,a.useState)(!1),W=o(z,2),Y=W[0],X=W[1],K=(0,a.useState)(!1),Q=o(K,2),J=Q[0],Z=Q[1],ee=(0,a.useState)(!1),te=o(ee,2),re=te[0],ne=te[1];if((0,a.useEffect)((function(){var e=void 0;return h&&!_?x?X(!0):e=setTimeout((function(){q(!0)}),400):x?X(!1):q(!1),function(){e&&clearTimeout(e)}}),[h,_,x]),(0,a.useEffect)((function(){var e=document.createElement("div");document.body.appendChild(e),D(e)}),[]),(0,a.useEffect)((function(){var e=setInterval((function(){var e=L&&L.current&&L.current.getBoundingClientRect();C?e&&e.y<16?B(!0):B(!1):e&&e.bottom-16>window.innerHeight-16?B(!0):B(!1)}),10);return function(){clearInterval(e)}})),!j)return i.default.createElement(a.Fragment,null);var oe=i.default.createElement(u.Transition,{appear:!0,exit:!1,onEntered:function(){g=!0},onEntering:function(){return setTimeout(S,200)},in:!(h||!s),timeout:200},(function(e){return i.default.createElement("div",{style:n({},E,w[e])},s)})),ae=i.default.createElement(u.Transition,{enter:!1,in:!h,timeout:500,onEntered:function(){ne(!0)},onExiting:function(){ne(!1)}},(function(e){return i.default.createElement("div",{style:n({},y,b[e],{visibility:J?"hidden":"visible"})},s)})),ie=(!x&&V||x&&Y)&&G;return i.default.createElement(a.Fragment,null,i.default.createElement(f.default,{outsideDomNode:j},i.default.createElement("div",{style:{position:"fixed",top:C?16:"unset",bottom:C?"unset":0,zIndex:"2147483647",right:"16px",display:ie?"flex":"none"}},t)),i.default.createElement(c.default,{isStaticContainer:x,setIsBottom:M,isBottom:C,position:r,ref:L},i.default.createElement("div",{style:{display:"flex",flexDirection:C?"column-reverse":"column"}},!x&&s,x&&(g?ae:oe),i.default.createElement("div",{style:{opacity:!x&&!V||x&&!Y||G?0:1,visibility:!x&&!V||x&&!Y||G?"hidden":"visible",zIndex:2,position:"relative",top:C?"unset":16,bottom:C?16:"unset",right:"16px"}},!x&&t))),x&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Transition,{in:h,timeout:500,exit:!1,onEntered:function(){Z(!0)},onExited:function(){Z(!1)}},(function(e){return i.default.createElement("div",{style:n({position:"fixed",top:73,zIndex:"2147483647",right:360,display:"flex"},m,b[e],{visibility:re?"hidden":"visible"})},i.default.createElement(v.default,null))})),i.default.createElement(l.default,{container:t,badge:s})))};t.default=_,_.propTypes={isContainerOpen:s.default.bool.isRequired,position:s.default.object,container:s.default.node,badge:s.default.node,dragging:s.default.bool,isStaticContainer:s.default.bool,startBadgeAnimation:s.default.func},_.defaultProps={position:{},container:void 0,badge:void 0,dragging:!0,isStaticContainer:!1,startBadgeAnimation:function(){}}},2608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=c(o),i=c(r(1)),u=c(r(2609)),s=c(r(718));function c(e){return e&&e.__esModule?e:{default:e}}var l=a.default.forwardRef((function(e,t){var r=e.position,i=e.isBottom,c=e.setIsBottom,l=e.children,f=(0,o.useRef)(!1),d=(0,o.useState)(),p=n(d,2),v=p[0],h=p[1],g=(0,s.default)(),y=g.movableBadgeSettings,m=g.updateBadgeSettings,b=g.movableBadgeDefaults,w=r.dragging,E=r.mouseTop,_=y&&y.top||b&&b.top||16,x=y&&y.bottom||b&&b.bottom||0,S=(0,o.useState)({top:_,bottom:x}),O=n(S,2),I=O[0],P=O[1],T=(0,o.useState)({diff:0}),R=n(T,2),k=R[0],C=R[1],M=(window.innerHeight-56-16)/2;(0,o.useEffect)((function(){var e=(0,u.default)((function(){var e=i?window.innerHeight-I.bottom-16-56>=M:I.top>=M;i?(P({top:window.innerHeight-I.bottom-16-56,bottom:I.bottom}),e&&c(!1)):e&&(P({top:I.top,bottom:window.innerHeight-I.top-16-56}),c(!0))}),500);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[I.top,I.bottom,i,c,M]),(0,o.useEffect)((function(){var e=function(e){if(w){var t=void 0;if(i){var r=e.changedTouches&&e.changedTouches[0].clientY||e.clientY,n=window.innerHeight-r-(window.innerHeight-E),o=n+I.bottom;t=o>=16?o+56<=window.innerHeight-16?n:window.innerHeight-56-I.bottom-16:-1*I.bottom+16}else{var a=(e.changedTouches&&e.changedTouches[0].clientY||e.clientY)-E,u=a+I.top;t=u>=16?u+56<=window.innerHeight-16?a:window.innerHeight-56-I.top-16:-1*I.top+16}C({diff:t})}},t=function(t){e(t),t.preventDefault()};if(w)window.addEventListener("mousemove",e),window.addEventListener("touchmove",t);else{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t);var r=i?I.bottom+k.diff:I.top+k.diff,n=r!==v;h(r);var o=i?window.innerHeight-r-56-16:r,a=i?r:window.innerHeight-r-56-16,u=i?window.innerHeight-a-16-56>=M:o>=M;c(u),P({top:o,bottom:a}),f.current!==w&&m({top:o,bottom:a,orientation:u?"bottomRight":"topRight",sendSdata:n}),C({diff:0})}return f.current!==w&&(f.current=w),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t)}}),[w,I.top,I.bottom,k.diff,E,c,m,i,M]);var L=i?-1*k.diff:k.diff;return a.default.createElement("div",{style:{position:"fixed",top:i?"unset":I.top,bottom:i?I.bottom:"unset",right:"0px",transform:"translate(0px, "+L+"px)",zIndex:2147483647},ref:t},l)}));t.default=l,l.propTypes={isBottom:i.default.bool,setIsBottom:i.default.func,children:i.default.any,position:i.default.object},l.defaultProps={isBottom:!1,setIsBottom:function(){},children:void 0,position:{}}},2609:function(e,t,r){var n=r(381),o=r(89);e.exports=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:a,maxWait:t,trailing:i})}},2610:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,n.useState)(e)};var n=r(0)},2611:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(0)),o=u(r(352)),a=r(5),i=r(19);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,a.useDispatch)();return n.default.createElement("div",{style:{cursor:"pointer "},onMouseUp:function(){e((0,i.tipContainerActionsClose)())}},n.default.createElement(o.default,null))}},2612:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,n.useState)({mouseTop:0,dragging:!1})};var n=r(0)},2613:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=M(o),i=M(r(1)),u=r(5),s=r(2),c=M(r(765)),l=M(r(925)),f=M(r(926)),d=M(r(927)),p=M(r(924)),v=M(r(486)),h=M(r(923)),g=M(r(931)),y=M(r(930)),m=M(r(32)),b=M(r(4)),w=M(r(13)),E=M(r(70)),_=M(r(915)),x=r(756),S=r(543),O=r(237),I=M(r(2379)),P=M(r(739)),T=r(19),R=r(730),k=r(2380),C=M(k);function M(e){return e&&e.__esModule?e:{default:e}}function L(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var A={openContainer:i.default.func,closeContainer:i.default.func,snoozed:i.default.bool,dragging:i.default.bool,dragged:i.default.object,onMouseDown:i.default.func,onMouseUp:i.default.func,onTouchMove:i.default.func,isStaticContainer:i.default.bool},N=function(e){var t=e.openContainer,r=e.closeContainer,i=e.onMouseDown,M=e.dragging,A=e.dragged,N=e.isStaticContainer,j=(0,o.createRef)(),D=(0,u.useDispatch)(),F=(0,o.useState)(),U=n(F,2),G=U[0],B=U[1],H=(0,o.useState)(),$=n(H,2),V=$[0],q=$[1],z=(0,o.useState)(!1),W=n(z,2),Y=W[0],X=W[1],K=(0,C.default)({isStaticContainer:N}),Q=n(K,2),J=Q[0],Z=Q[1],ee=(0,o.useState)(!1),te=n(ee,2),re=te[0],ne=te[1],oe=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),ae=n(oe,2),ie=ae[0],ue=ae[1],se=(0,o.useState)(!1),ce=n(se,2),le=ce[0],fe=ce[1],de=(0,o.useState)(""),pe=n(de,2),ve=pe[0],he=pe[1],ge=(0,O.useContainerState)(),ye=n(ge,3)[2],me=(0,o.useState)(!1),be=n(me,2),we=be[0],Ee=be[1],_e=(0,I.default)(),xe=_e.shouldShowTooltip,Se=_e.forceHideTooltip,Oe=_e.startClickBadgeTooltip,Ie=_e.endClickBadgeTooltip,Pe=(0,P.default)({isStaticContainer:N}).shouldShowToolTip,Te=(0,_.default)().id,Re=(0,S.useTip)(Te),ke=n(Re,1)[0].badge,Ce=void 0===ke?{}:ke,Me=Ce.title,Le=Ce.subtitle,Ae=(0,x.useCategoryData)(Te),Ne=n(Ae,1)[0],je=function(){var e=(0,o.useState)(!1),t=n(e,2),r=t[0],a=t[1],i=(0,o.useState)(!1),u=n(i,2),s=u[0],c=u[1],l=(0,o.useRef)(!1);return[r,function(){r||a(!0),c(!0),clearTimeout(l.current)},function(){s&&(c(!1),l.current=setTimeout((function(){a(!1)}),600))}]}(),De=n(je,3),Fe=De[0],Ue=De[1],Ge=De[2],Be=Fe&&!M;(0,o.useEffect)((function(){M||fe(!1)}),[M]),(0,o.useEffect)((function(){var e=setInterval((function(){var e=j&&j.current&&j.current.getBoundingClientRect();(e?e.y+e.height/2:0)>=window.innerHeight/2?Ee(!0):Ee(!1)}),10);return function(){clearInterval(e)}})),(0,o.useEffect)((function(){D((0,T.badgeShown)())}),[D]),(0,o.useEffect)((function(){var e;(e=L(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getTipsConfig();case 2:t=e.sent,r=t.badgeTooltipText,he(r||a.default.createElement("div",{style:{width:"176px"}},a.default.createElement("div",{style:{fontSize:"12px",lineHeight:"16px"}},b.default.getMessage("New_Shop_smarter_with_Honey_Tips_Badge_blocking_your_view_Just_drag_it_up_or_down"),a.default.createElement("div",null,a.default.createElement("img",{style:{width:"100%"},src:"https://cdn.honey.io/images/tips/movable-badge-example.gif",alt:"Gif of example"})))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useEffect)((function(){var e;(e=L(regeneratorRuntime.mark((function e(){var t,r,n,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getTipsConfig();case 2:return t=e.sent,r=t.hasExtraSnoozeSettings,n=void 0!==r&&r,o=t.links,a=void 0===o?{}:o,e.next=9,w.default.getInfo();case 9:i=e.sent,u=i.isLoggedIn,s=void 0!==u&&u,n&&X(!0),ne(s),ue(a.featureSettings||ie);case 15:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[ie]);var He=function(){N&&Oe(),G||e.dragging||(m.default.updateSetting("movable_badge:first_time_hovered","true"),D((0,T.badgeHover)()),t(),B(!0))},$e=function(){if(!A.current){if(V)return r(),void q(!1);Se(),m.default.updateSetting("movable_badge:first_time_clicked","true"),D((0,T.badgeClick)()),t(),q(!0)}};if((0,o.useEffect)((function(){xe&&ye&&D((0,T.clickBadgeTooltipShown)())}),[D,xe,ye]),(0,o.useEffect)((function(){if(null!==Z&&N){var t=Z.event;t===k.hoverOrClickEvents.MOUSEUP?($e(),e.onMouseUp()):t===k.hoverOrClickEvents.MOUSEOVER&&He()}}),[Z]),e.snoozed)return a.default.createElement(o.Fragment,null);var Ve=function(t){e.onMouseUp(t),$e(),t.preventDefault()},qe=a.default.createElement("span",null,b.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:a.default.createElement("b",null,b.default.getMessage("No_tips"))})),ze=M&&le?"Click to pin this badge":("function"==typeof Me?Me(Ne):Me)||qe,We=M&&le?"Move your cursor to position":("function"==typeof Le?Le(Ne):Le)||b.default.getMessage("But_were_working_on_it"),Ye=[{copy:"Reposition this",key:"reposition_this",onClick:function(e){fe(!0),i(e),D((0,T.setClickMove)())}},{copy:b.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){D((0,T.setBadgeSnoozeOneDay)())}}],Xe=re?{copy:b.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){D((0,R.setBadgeSnoozeAllLoggedIn)()),window.open(ie)}}:{copy:b.default.getMessage("Dont_show_on_any_store"),key:"snooze_all",onClick:function(){D((0,T.setBadgeSnoozeAll)())}};Y&&Ye.push({copy:b.default.getMessage("Dont_show_on_this_site"),key:"snooze_store",onClick:function(){D((0,T.setBadgeSnoozeOneStore)())}},Xe);var Ke=-10-24*Ye.length,Qe=we?Ke+"px":"64px";if(e.snoozed)return a.default.createElement(o.Fragment,null);var Je=b.default.getMessage("Droplist_this_item"),Ze=b.default.getMessage("Get_price_drop_alerts");return a.default.createElement("div",{ref:j},a.default.createElement(y.default,{showDropDown:Be,settingsOptions:Ye,onMouseOver:Ue,onMouseLeave:Ge,offset:Qe},a.default.createElement(g.default,null,a.default.createElement("div",{style:{position:"relative",top:"-0px"}},Pe&&a.default.createElement(c.default,{copy:ve})),ye&&!Pe&&xe&&a.default.createElement("div",{style:{position:"relative",top:"-0px"}},a.default.createElement(c.default,{copy:b.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),a.default.createElement("div",{ref:J},a.default.createElement(l.default,{onFocus:function(){},onMouseOver:N?function(){}:He,onMouseLeave:function(){Ie(),N&&r(),B(!1)},onTouchStart:N?function(t){e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:N?Ve:function(){},onTouchCancel:N?Ve:function(){},onTouchMove:N?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},a.default.createElement(f.default,null,a.default.createElement(s.Icon,{icon:"honey-18",color:s.Colors.white})),a.default.createElement(d.default,{firstLine:ye?ze:Je,secondLine:ye?We:Ze}))),a.default.createElement(p.default,{onMouseOver:Ue,onMouseLeave:Ge,onClick:function(){D((0,T.setBadgeSnooze)())}},a.default.createElement(v.default,null)),a.default.createElement(h.default,null))))};N.propTypes=A,N.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},snoozed:!1,isStaticContainer:!1},t.default=N},2614:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=D(a),u=D(r(1)),s=r(5),c=r(3),l=D(r(4)),f=D(r(70)),d=r(2),p=D(r(765)),v=D(r(545)),h=D(r(546)),g=D(r(32)),y=D(r(352)),m=r(35),b=r(37),w=r(756),E=D(r(219)),_=r(543),x=r(237),S=D(r(917)),O=D(r(911)),I=D(r(739)),P=r(350),T=r(53),R=D(r(2379)),k=D(r(960)),C=D(r(2615)),M=r(480),L=D(r(2616)),A=r(2380),N=D(A),j=r(18);function D(e){return e&&e.__esModule?e:{default:e}}function F(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var U={isMiniTeaser:u.default.bool.isRequired,openContainer:u.default.func,closeContainer:u.default.func,isStaticContainer:u.default.bool,isTeaser:u.default.bool,snoozed:u.default.bool,dragging:u.default.bool,dragged:u.default.object,onMouseDown:u.default.func,onMouseUp:u.default.func,onTouchMove:u.default.func,notificationBadge:u.default.node},G=(0,c.createUseStyles)({root:{width:"100%",display:"flex",justifyContent:"flex-end",userSelect:"none",border:"none",margin:0,padding:0,background:"transparent"},loader:{width:"128px",height:"9px",display:"inline-block",background:"linear-gradient(92.25deg, #E6E6E6 2.21%, rgba(238, 238, 238, 0) 107.89%)",borderRadius:"1px"},container:function(e){var t=e.showMovableBadge;return{position:"relative",display:"flex",transition:"margin-right 300ms cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.18)",borderRadius:"5px 0px 0px 5px",alignItems:"center",cursor:e.isStaticContainer?"pointer":"move",marginRight:t?"0px":"-28px",touchAction:"none",background:d.Colors.white}},teaserAnimateIn:function(e){return{right:"1px",maxWidth:e.animateTeaserIn?"1000px":"0",transition:"max-width 800ms cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"left"}}}),B=function(e){var t=e.openContainer,r=e.closeContainer,u=e.isMiniTeaser,c=e.notificationBadge,D=e.isStaticContainer,U=e.isTeaser,B=(0,a.useRef)({}),H=(0,a.useRef)(!0),$=(0,s.useDispatch)(),V=(0,a.useState)(),q=o(V,2),z=q[0],W=q[1],Y=(0,N.default)({isStaticContainer:D}),X=o(Y,2),K=X[0],Q=X[1],J=(0,x.useContainerOpen)(),Z=o(J,1)[0],ee=(0,a.useState)(),te=o(ee,2),re=te[0],ne=te[1],oe=(0,a.useState)(""),ae=o(oe,2),ie=ae[0],ue=ae[1],se=(0,a.useState)(!1),ce=o(se,2),le=ce[0],fe=ce[1],de=(0,x.useContainerState)(),pe=o(de,3)[2],ve=(0,a.useState)(!1),he=o(ve,2),ge=he[0],ye=he[1],me=(0,a.useState)(!1),be=o(me,2),we=be[0],Ee=be[1],_e=(0,s.useSelector)(b.experimentSelectors.selectVariant(m.CASHBACK_EXPERIMENT)),xe=_e&&"control"!==_e,Se=(0,S.default)(),Oe=(0,I.default)({isStaticContainer:D}),Ie=Oe.shouldShowTooltip,Pe=Oe.incrementTooltipCount,Te=Oe.forceCloseTooltip,Re=(0,R.default)(),ke=Re.shouldShowTooltip,Ce=Re.forceHideTooltip,Me=Re.startClickBadgeTooltip,Le=Re.endClickBadgeTooltip,Ae=(0,E.default)(),Ne=G({animateTeaserIn:ge,showMovableBadge:z||e.dragging,isStaticContainer:D}),je=(0,j.useHighestRankedTipInstance)().id,De=(0,_.useTip)(je),Fe=o(De,1)[0],Ue=Fe.badge,Ge=void 0===Ue?{}:Ue,Be=Fe.teaser,He=void 0===Be?{}:Be,$e=Ge.title,Ve=Ge.subtitle,qe=He.title,ze=He.CTA,We=(0,w.useCategoryData)(je),Ye=o(We,1)[0],Xe=Ae&&Ae.standDown&&Ae.standDownValue>2,Ke=(0,O.default)(je),Qe=o(Ke,1)[0],Je=i.default.createElement("span",null,l.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:i.default.createElement("b",null,l.default.getMessage("No_tips"))})),Ze=("function"==typeof $e?$e(Ye):$e)||Je,et=("function"==typeof Ve?Ve(Ye):Ve)||l.default.getMessage("But_were_working_on_it"),tt=("function"==typeof qe?qe(n({},Ye,{isCashback:xe})):qe)||Ze,rt=("function"==typeof ze?ze(n({},Ye,{isCashback:xe})):ze)||et;(0,a.useEffect)((function(){return function(){H.current=!1}}),[]),(0,a.useEffect)((function(){if(Se&&c&&H.current){var e=Object.values(Se).includes("unread");Ee(e)}}),[Se]),(0,a.useEffect)((function(){!Ie&&ke&&pe&&$((0,P.clickBadgeTooltipShown)())}),[$,ke,pe,Ie]),(0,a.useEffect)((function(){if(pe&&Xe){var e={type:"standdown",standDownType:Ae.standDown,standDownValue:Ae.standDownValue};$((0,T.sdataTipBadgeTeaserSuppressedEvent)({suppressedReason:e}))}}),[Ae.standDown,Ae.standDownValue,Xe,pe,$]),(0,a.useEffect)((function(){fe(!1)}),[je]),(0,a.useEffect)((function(){var e;(e=F(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,C.default)();case 4:if(t=e.sent,r=o(t,1),n=r[0],pe&&!Z){e.next=9;break}return e.abrupt("return");case 9:if(!le){e.next=12;break}return n&&fe(!1),e.abrupt("return");case 12:if(!U){e.next=17;break}return $((0,P.stickyTeaserShown)()),$((0,M.tipShown)(je,!0)),fe(!n),e.abrupt("return");case 17:!Xe&&Qe&&!Ie&&!le&&!n&&(fe(!0),$((0,P.miniBadgeTeaserShown)()));case 19:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[pe,le,Z,Xe,Qe,Ie,$,U,je]),(0,a.useEffect)((function(){var e;(e=F(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getTipsConfig();case 2:t=e.sent,r=t.badgeTooltipText,ue(i.default.createElement("div",{style:{width:"176px"}},i.default.createElement("div",{style:{fontSize:"12px",color:d.Colors.white,lineHeight:"16px",textAlign:"left"}},r||l.default.getMessage("Check_Honey_Tips_before_you_buy_See_deal_insights_price_changes_and_add_items_to_your_Droplist"))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,a.useEffect)((function(){pe&&ye(!0)}),[pe]),(0,a.useEffect)((function(){$((0,P.badgeShown)())}),[$]),(0,a.useEffect)((function(){return pe&&!U&&(ge?B.current=setTimeout((function(){ye(!1)}),5e3):clearTimeout(B.current)),function(){clearTimeout(B.current)}}),[ge,pe,U]),(0,a.useEffect)((function(){ne(D?Z:void 0)}),[Z,D]);var nt=function(){B&&B.current&&clearTimeout(B.current)},ot=(0,a.useCallback)((function(){Pe(!1),Te()}),[Pe,Te]),at=(0,a.useCallback)((function(r){ot(),D&&!Z&&Me(),nt(),z||e.dragging||(g.default.updateSetting("movable_badge:first_time_hovered","true"),$((0,P.badgeHover)()),t(r),W(!0))}),[ot,$,z,Z,D,t,e.dragging,Me]),it=(0,a.useCallback)((function(){Le(),e.dragging||ye(!1),!D&&r(2e3),W(!1)}),[r,Le,D,e.dragging]),ut=function(){if(clearTimeout(B.current),!e.dragged.current){if(re)return r(D?0:null),void ne(!1);ye(!1),ne(!0),Ce(),requestAnimationFrame(t),$((0,P.badgeClick)()),g.default.updateSetting("movable_badge:first_time_clicked","true")}},st=function(t){e.onMouseUp(t),ut(),t.preventDefault()};if((0,a.useEffect)((function(){if(null!==Q&&D){var t=Q.event;t===A.hoverOrClickEvents.MOUSEUP?(ut(),e.onMouseUp()):t===A.hoverOrClickEvents.DELAYED_MOUSEENTER?at():t===A.hoverOrClickEvents.MOUSEENTER&&nt()}}),[Q]),e.snoozed)return i.default.createElement(a.Fragment,null);var ct=i.default.createElement("div",{className:Ne.loader}),lt=le&&pe&&je?i.default.createElement(k.default,{isTeaser:!0,onMouseOver:function(e){at(e)},onClose:function(){return ye(!1)},tipInstanceId:je,templateType:"teaser"}):null,ft=(le&&i.default.createElement(h.default,{firstLine:pe?i.default.createElement("div",{style:{fontWeight:"700"}},tt):ct,secondLine:pe?i.default.createElement("div",{style:{fontWeight:"500"}},rt):ct}),lt);return i.default.createElement("button",{className:Ne.root,tabIndex:0,"aria-label":tt,"aria-expanded":Z,onClick:at},i.default.createElement("div",{ref:K,className:Ne.container,onMouseOver:D?function(){}:at,onMouseLeave:it,onTouchStart:D?function(t){ot(),e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:D?st:function(){},onTouchCancel:D?st:function(){},onTouchMove:D?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},pe&&ke&&i.default.createElement("div",{style:{position:"absolute",zIndex:1}},i.default.createElement(p.default,{copy:l.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),i.default.createElement("div",{style:{position:"absolute",zIndex:1}},Ie&&i.default.createElement(p.default,{copy:ie})),we&&c,D?i.default.createElement(L.default,null):i.default.createElement(y.default,null),u&&!(D&&Z)&&i.default.createElement("div",{className:Ne.teaserAnimateIn}," ",ft," "),i.default.createElement(v.default,null)))};B.propTypes=U,B.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},isStaticContainer:!1,isTeaser:!1,snoozed:!1,notificationBadge:null},t.default=B},2615:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(153)),o=r(269),a=i(r(58));function i(e){return e&&e.__esModule?e:{default:e}}var u,s,c=void 0,l=void 0,f=void 0,d=!1,p=(u=regeneratorRuntime.mark((function e(){var t,r,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.getIsProductPage)()){e.next=2;break}return e.abrupt("return",[!1]);case 2:return e.next=4,(0,n.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(t=e.t0,r=t.parentId,a=new URL(document.URL),i=a.pathname,u=a.search,s=void 0!==l&&l===r&&(c!==i||f!==u),!d){e.next=13;break}return e.abrupt("return",[!0]);case 13:if(!s){e.next=16;break}return d=!0,e.abrupt("return",[!0]);case 16:return c=i,f=u,l=r,e.abrupt("return",[!1]);case 20:case"end":return e.stop()}}),e,void 0)})),s=function(){var e=u.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(){return s.apply(this,arguments)});(0,a.default)("honeyTips:resetCurrent")((function(){d=!1})),(0,a.default)("honeyTips:newPage")((function(){d=!1})),(0,a.default)("honeyTips:turnOff")((function(){d=!1})),(0,a.default)("honeyTips:updateLaunchpad")((function(){d=!1})),(0,a.default)("honeyTips:updateProduct")((function(){d=!1})),t.default=p},2616:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=d(a),u=d(r(1)),s=r(3),c=r(234),l=r(2381),f=d(l);function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.createUseStyles)({root:{display:"flex"},container:{width:"58px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"5px 0px 0px 5px",position:"relative",background:"linear-gradient(90deg, #FF7227 0%, #FC973B 100%)"},logoContainer:{display:"inherit"},icon:{width:"24px",height:"24px"},mask:{position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}}),v=function(e){var t=e.duration,r=p(),u=(0,a.useState)(!1),s=o(u,2),d=s[0],v=s[1],h=(0,a.useRef)(!0),g=(0,f.default)(),y=g.animate,m=g.endAnimation,b=l.BadgeAnimationState.END===y?0:t,w={transition:"opacity "+b+"ms ease-in-out",opacity:0},E={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};(0,a.useEffect)((function(){(y===l.BadgeAnimationState.START||y===l.BadgeAnimationState.END&&h.current)&&(v(!0),h.current=!1)}),[y]);var _=i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:r.mask}),i.default.createElement("img",{src:"https://cdn.honey.io/images/tips/honey-24.svg",alt:"Open Honey"})),x=i.default.createElement(c.Transition,{onEntered:function(){return setTimeout(m,b)},exit:!1,in:d,timeout:b},(function(e){return i.default.createElement("div",{className:r.logoContainer,style:n({},w,E[e])},_)}));return i.default.createElement("div",{ref:h,className:r.root},i.default.createElement("div",{className:r.container},x))};v.propTypes={duration:u.default.number},v.defaultProps={duration:400},t.default=v},2617:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27),o=r(28),a=r(29);t.default=function(e){return function(t,r){var i=r(),u={id:i&&i.universalContainer&&i.universalContainer.currentContainerId,badgeAnimationState:e},s=(0,n.normalize)(u,o.UNIVERSAL_CONTAINER);t({type:a.BADGE_ANIMATION_STATE,data:s})}}},2618:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(106);t.default=function(e){var t=e.containerId,r=e.productId,o=e.debugProductLink,a=void 0===o?"":o;return function(e){var o=a.replace("{PRODUCT_ID}",r);window.open(o,"_blank"),e((0,n.sdataTipsDebugProductClicked)(t))}}},2619:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(2382),a=(n=o)&&n.__esModule?n:{default:n};t.default=function(){var e=(0,a.default)(),t=e.currentProduct,r=e.isDebugProductFeatureEnabled,n=e.user,o=(n&&n.email||"").endsWith("@joinhoney.com");return r&&o&&t}},2620:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){u||(u=i.loadingPhrases.map((function(e){return a.default.getMessage(e)})));return u};var n,o=r(4),a=(n=o)&&n.__esModule?n:{default:n},i=r(910);var u=void 0},2621:function(e,t,r){"use strict";(function(t){e.exports=y;var n,o=r(2622),a=r(119),i=r(2624),u=(n="function"==typeof Symbol&&"1"!==t.env._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),s=n("length"),c=n("lengthCalculator"),l=n("allowStale"),f=n("maxAge"),d=n("dispose"),p=n("noDisposeOnSet"),v=n("lruList"),h=n("cache");function g(){return 1}function y(e){if(!(this instanceof y))return new y(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[u]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[u]=1/0);var r=e.length||g;"function"!=typeof r&&(r=g),this[c]=r,this[l]=e.stale||!1,this[f]=e.maxAge||0,this[d]=e.dispose,this[p]=e.noDisposeOnSet||!1,this.reset()}function m(e,t,r,n){var o=r.value;w(e,o)&&(_(e,r),e[l]||(o=void 0)),o&&t.call(n,o.value,o.key,e)}function b(e,t,r){var n=e[h].get(t);if(n){var o=n.value;w(e,o)?(_(e,n),e[l]||(o=void 0)):r&&e[v].unshiftNode(n),o&&(o=o.value)}return o}function w(e,t){if(!t||!t.maxAge&&!e[f])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[f]&&r>e[f]}function E(e){if(e[s]>e[u])for(var t=e[v].tail;e[s]>e[u]&&null!==t;){var r=t.prev;_(e,t),t=r}}function _(e,t){if(t){var r=t.value;e[d]&&e[d](r.key,r.value),e[s]-=r.length,e[h].delete(r.key),e[v].removeNode(t)}}function x(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}Object.defineProperty(y.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[u]=e,E(this)},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(y.prototype,"allowStale",{set:function(e){this[l]=!!e},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(y.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[f]=e,E(this)},get:function(){return this[f]},enumerable:!0}),Object.defineProperty(y.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=g),e!==this[c]&&(this[c]=e,this[s]=0,this[v].forEach((function(e){e.length=this[c](e.value,e.key),this[s]+=e.length}),this)),E(this)},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this[s]},enumerable:!0}),Object.defineProperty(y.prototype,"itemCount",{get:function(){return this[v].length},enumerable:!0}),y.prototype.rforEach=function(e,t){t=t||this;for(var r=this[v].tail;null!==r;){var n=r.prev;m(this,e,r,t),r=n}},y.prototype.forEach=function(e,t){t=t||this;for(var r=this[v].head;null!==r;){var n=r.next;m(this,e,r,t),r=n}},y.prototype.keys=function(){return this[v].toArray().map((function(e){return e.key}),this)},y.prototype.values=function(){return this[v].toArray().map((function(e){return e.value}),this)},y.prototype.reset=function(){this[d]&&this[v]&&this[v].length&&this[v].forEach((function(e){this[d](e.key,e.value)}),this),this[h]=new o,this[v]=new i,this[s]=0},y.prototype.dump=function(){return this[v].map((function(e){if(!w(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},y.prototype.dumpLru=function(){return this[v]},y.prototype.inspect=function(e,t){var r="LRUCache {",n=!1;this[l]&&(r+="\n  allowStale: true",n=!0);var o=this[u];o&&o!==1/0&&(n&&(r+=","),r+="\n  max: "+a.inspect(o,t),n=!0);var i=this[f];i&&(n&&(r+=","),r+="\n  maxAge: "+a.inspect(i,t),n=!0);var d=this[c];d&&d!==g&&(n&&(r+=","),r+="\n  length: "+a.inspect(this[s],t),n=!0);var p=!1;return this[v].forEach((function(e){p?r+=",\n  ":(n&&(r+=",\n"),p=!0,r+="\n  ");var o=a.inspect(e.key).split("\n").join("\n  "),u={value:e.value};e.maxAge!==i&&(u.maxAge=e.maxAge),d!==g&&(u.length=e.length),w(this,e)&&(u.stale=!0),u=a.inspect(u,t).split("\n").join("\n  "),r+=o+" => "+u})),(p||n)&&(r+="\n"),r+="}"},y.prototype.set=function(e,t,r){var n=(r=r||this[f])?Date.now():0,o=this[c](t,e);if(this[h].has(e)){if(o>this[u])return _(this,this[h].get(e)),!1;var a=this[h].get(e).value;return this[d]&&(this[p]||this[d](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[s]+=o-a.length,a.length=o,this.get(e),E(this),!0}var i=new x(e,t,o,n,r);return i.length>this[u]?(this[d]&&this[d](e,t),!1):(this[s]+=i.length,this[v].unshift(i),this[h].set(e,this[v].head),E(this),!0)},y.prototype.has=function(e){return!!this[h].has(e)&&!w(this,this[h].get(e).value)},y.prototype.get=function(e){return b(this,e,!0)},y.prototype.peek=function(e){return b(this,e,!1)},y.prototype.pop=function(){var e=this[v].tail;return e?(_(this,e),e.value):null},y.prototype.del=function(e){_(this,this[h].get(e))},y.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{var a=o-t;a>0&&this.set(n.k,n.v,a)}}},y.prototype.prune=function(){var e=this;this[h].forEach((function(t,r){b(e,r,!1)}))}}).call(this,r(118))},2622:function(e,t,r){(function(t){"pseudomap"===t.env.npm_package_name&&"test"===t.env.npm_lifecycle_script&&(t.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||t.env.TEST_PSEUDOMAP?e.exports=r(2623):e.exports=Map}).call(this,r(118))},2623:function(e,t){var r=Object.prototype.hasOwnProperty;function n(e){if(!(this instanceof n))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof n||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function o(e,t){return e===t||e!=e&&t!=t}function a(e,t,r){this.key=e,this.value=t,this._index=r}function i(e,t){for(var n=0,a="_"+t,i=a;r.call(e,i);i=a+n++)if(o(e[i].key,t))return e[i]}e.exports=n,n.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(r){"size"!==r&&e.call(t,this._data[r].value,this._data[r].key)}),this)},n.prototype.has=function(e){return!!i(this._data,e)},n.prototype.get=function(e){var t=i(this._data,e);return t&&t.value},n.prototype.set=function(e,t){!function(e,t,n){for(var i=0,u="_"+t,s=u;r.call(e,s);s=u+i++)if(o(e[s].key,t))return void(e[s].value=n);e.size++,e[s]=new a(t,n,s)}(this._data,e,t)},n.prototype.delete=function(e){var t=i(this._data,e);t&&(delete this._data[t._index],this._data.size--)},n.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(n.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),n.prototype.values=n.prototype.keys=n.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},2624:function(e,t){function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,o=arguments.length;n<o;n++)t.push(arguments[n]);return t}function n(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},r.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},r.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,o=this.head;null!==o;)n.push(e.call(t,o.value,this)),o=o.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,o=this.tail;null!==o;)n.push(e.call(t,o.value,this)),o=o.prev;return n},r.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},r.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,a=this.head;null!==a&&o<e;o++)a=a.next;for(;null!==a&&o<t;o++,a=a.next)n.push(a.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,a=this.tail;null!==a&&o>t;o--)a=a.prev;for(;null!==a&&o>e;o--,a=a.prev)n.push(a.value);return n},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this}},2625:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=u(n),a=u(r(1)),i=u(r(2626));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.children,r=e.show,a=e.onVisible,u=void 0===a?function(){}:a,s=(0,i.default)(),c=s.isVisible,l=s.ref;return(0,n.useEffect)((function(){c&&setTimeout(u,1e3)}),[c]),r?o.default.createElement("div",{ref:l}," ",t):null};s.propTypes={show:a.default.bool,onVisible:a.default.func.isRequired,children:a.default.node},s.defaultProps={show:!1,children:null},t.default=s},2626:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px",t=(0,o.useState)(!1),r=n(t,2),a=r[0],i=r[1],u=(0,o.createRef)();return(0,o.useEffect)((function(){var t=new IntersectionObserver((function(e){var t=n(e,1)[0];i(1===t.intersectionRatio)}),{rootMargin:e}),r=u.current;return r&&t.observe(r),function(){return r&&t.unobserve(r)}}),[u]),{isVisible:a,ref:u}}},2627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),o=new Set(["StoreSavings"]);t.default=function(e){return function(t,r){if("string"!=typeof e)return!1;var a=((0,n.selectTipByTipInstanceId)(e)(r())||{}).categoryId;return!o.has(a)}}},2628:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=z(o),i=r(5),u=r(3),s=z(r(1)),c=r(33),l=z(r(2629)),f=z(r(777)),d=z(r(4)),p=z(r(6)),v=z(r(10)),h=z(r(31)),g=z(r(13)),y=r(198),m=z(r(240)),b=z(r(88)),w=z(r(549)),E=r(2),_=z(r(544)),x=z(r(548)),S=r(14),O=r(19),I=z(r(43)),P=r(237),T=z(r(960)),R=z(r(351)),k=z(r(219)),C=z(r(920)),M=z(r(2383)),L=z(r(2262)),A=z(r(550)),N=z(r(2263)),j=z(r(2384)),D=z(r(484)),F=r(18),U=z(r(759)),G=z(r(758)),B=z(r(2264)),H=z(r(2265)),$=z(r(2266)),V=z(r(2631)),q=z(r(148));function z(e){return e&&e.__esModule?e:{default:e}}function W(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var Y=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:E.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},seeMore:{marginTop:"1px"},seeDealSummary:{borderTop:"1px solid "+I.default.grey300}}),X=function(){var e=Y();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(E.LoadingIcon,null))},K=function(e){var t=e.isFullyExpandedPdp,r=e.isLaunchpad,u=e.isMiniEngagement,s=(0,i.useDispatch)(),I=(0,o.useRef)(),z=(0,o.useRef)(),K=(0,o.useState)(!1),Q=n(K,2),J=Q[0],Z=Q[1],ee=(0,P.useContainerState)(),te=n(ee,1)[0],re=(0,P.useContainerOpen)(),ne=n(re,2),oe=ne[0],ae=ne[1],ie=(0,D.default)(),ue=n(ie,3),se=ue[0],ce=ue[2],le=(0,P.useHasMainTip)(),fe=(0,R.default)()||[],de=(0,F.useShowMoreTips)(),pe=(0,i.useSelector)((0,S.selectCategoryIdsByTipInstanceIds)(fe)),ve=(0,F.useHighestRankedTipInstance)(),he=ve.id,ge=ve.categoryId,ye=r||de?fe:[he],me=(0,C.default)(),be=(0,U.default)(),we=be.showBanner,Ee=void 0!==we&&we,_e=be.copy,xe=be.color,Se=be.ctaAction,Oe=be.ctaCopy,Ie=(0,o.useState)(),Pe=n(Ie,2),Te=Pe[0],Re=Pe[1],ke=(0,o.useState)(!1),Ce=n(ke,2),Me=Ce[0],Le=Ce[1],Ae=(0,o.useState)(0),Ne=n(Ae,2),je=Ne[0],De=Ne[1],Fe=(0,G.default)(),Ue=(0,F.useTipInstanceFullscreen)(Fe),Ge=n(Ue,2)[1],Be=(0,F.useBottomSheet)(),He=n(Be,2),$e=He[0],Ve=void 0===$e?{}:$e,qe=He[1],ze=(0,F.useTipInstanceBottomSheet)(Ve.tipInstanceId),We=n(ze,1)[0],Ye=void 0===We?"":We,Xe=(0,k.default)()||{},Ke=b.default.AMAZON_STORES.includes(Xe.id),Qe=Y(),Je=(0,o.useRef)(!0),Ze=(0,o.useRef)(!0);(0,o.useEffect)((function(){r&&W(regeneratorRuntime.mark((function e(){var t,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xe.id){e.next=11;break}return e.next=3,Promise.all([g.default.getInfo(),g.default.getUserFollow(),g.default.getStoreSessionCount(Xe.id)]);case 3:t=e.sent,r=n(t,3),o=r[0],a=r[1],i=r[2],Re(o),Le(a.includes(Xe.id)),De(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[Xe.id,Xe.storeIcon,r]),(0,o.useEffect)((function(){var e=function(e,t){var r=t.action,n=t.closePromptShown;r!==h.default.RESET_TEASER_CLOSED_WITHOUT_CTA_COUNT_DONE||n||Z(!0)};return p.default.addListener("honeyTips:tips",e),function(){p.default.removeListener("honeyTips:tips",e)}}),[]),(0,o.useEffect)((function(){if(Je.current&&!te){if(r){var e=h.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=Xe&&Xe.id,n={background:!0};Ze.current&&W(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Ze.current=!1,r.next=3,p.default.send("honeyTips:tips",{action:e,storeId:t},n);case 3:case"end":return r.stop()}}),r,void 0)})))()}ae()}Je.current=!1}),[te,ae,oe,r,Xe]);var et,tt,rt=(et=W(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return v.default.debug("honeyTips:connectedTeaserContainer: closed teaser in non-prompt variant"),s((0,O.closeTeaser)()),e.abrupt("return");case 4:v.default.debug("honeyTips:connectedTeaserContainer: closed teaser in prompt variant"),J||p.default.send("honeyTips:tips",{action:h.default.INCREMENT_TEASER_CLOSED_WITHOUT_CTA_COUNT},{background:!0}),s((0,O.closeTeaser)());case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return et.apply(this,arguments)}),nt=(tt=W(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te&&Te.isLoggedIn||g.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=Me?"UNFOLLOW":"FOLLOW")?s((0,O.storeFollow)()):"UNFOLLOW"===t&&s((0,O.storeUnfollow)()),e.next=5,g.default.updateUserFollow(Xe.id,Te.id,t);case 5:r=e.sent,Le(r.includes(Xe.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return tt.apply(this,arguments)});(0,o.useEffect)((function(){void 0!==me&&me&&s((0,O.updateShowMoreTips)({showMoreTips:!0}))}),[me]);var ot=(0,M.default)(I),at=ot.scrollToCategory,it=ot.addTipRef,ut=ot.scrollToTop,st=function(e){de||s((0,O.updateShowMoreTips)({showMoreTips:!0})),setTimeout((function(){at(e)}),500)},ct=function(){ce()},lt=te&&a.default.createElement(c.LoaderGroup,null)||null,ft=r?!!Te&&!se&&a.default.createElement(y.StoreFollowUI,{inPopover:!1,store:Xe,storeFollowButton:a.default.createElement("div",{className:Qe.followBtnOverrides},a.default.createElement(m.default,{allowTooltip:!1,isFollowing:Me,isHeaderButton:!0,store:{storeId:Xe.id,storeName:Xe.name},storeSessionCount:je,subSrc:"launchpad",updateUserFollow:nt,user:Te}))}):null,dt=a.default.createElement(o.Fragment,null,ft,0!==ye.length&&ye.map((function(e,n){var o=!de&&!r||Ke&&n===ye.length-1,i=Ke?"1px":"0px";return a.default.createElement($.default,{isFullyExpandedPdp:t,key:""+e,tipInstanceId:e},a.default.createElement("div",{key:e,style:{marginBottom:o?i:"8px"}},a.default.createElement(N.default,null,a.default.createElement("div",{ref:function(t){t&&it(pe[e],t)}},a.default.createElement(T.default,{isTeaser:!0,hideCaret:!0,isSecondary:n>0,tipInstanceId:e,templateType:"card",scrollToTop:ut,scrollToCard:st})))))}))),pt=Fe&&a.default.createElement("div",{style:{minHeight:z.current}},Fe?a.default.createElement($.default,{key:""+Fe,tipInstanceId:Fe},a.default.createElement(T.default,{tipInstanceId:Fe,templateType:"fullscreen"})):a.default.createElement(j.default,{yOffset:"45%"}))||null,vt=te?a.default.createElement(X,null):!se&&!Fe&&dt||null,ht=se&&a.default.createElement("div",{style:{minHeight:z.current}},a.default.createElement(B.default,null))||null,gt=a.default.createElement(N.default,null,a.default.createElement(f.default,{id:Ye,open:Ve.isOpen,onClose:qe,onTransitionEnd:function(){Ve.isOpen||s((0,O.resetBottomSheet)())}},a.default.createElement(T.default,{tipInstanceId:Ve.tipInstanceId,templateType:"bottomSheet"}))),yt=a.default.createElement(E.NotificationBanner,{show:Ee,copy:_e,color:xe,ctaAction:Se,ctaCopy:Oe,onClose:function(){return s((0,O.resetNotificationBanner)())},src:"UniversalContainer-ConnectedTeaserContainer",short:!0,stackAbove:!0,zIndex:3}),mt=a.default.createElement(A.default,{isContainerOpen:oe}),bt=!de&&!r&&fe.length>1,wt=a.default.createElement("div",{className:Qe.seeMore},a.default.createElement(V.default,{onClick:function(){return s((0,O.updateShowMoreTips)({showMoreTips:!de}))}})),Et=a.default.createElement("div",{className:Qe.seeDealSummary},a.default.createElement(l.default,{onClick:function(){s((0,O.updateShowMoreTips)({showMoreTips:!de})),s((0,O.clickSeeMoreTips)())}})),_t=le&&"Main"!==ge,xt=_t?{flexBasis:0}:{},St=Ke?mt:bt?_t?Et:wt:"";return a.default.createElement(q.default.Provider,null,a.default.createElement(L.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(c.UniversalContainer,{open:oe,"aria-expanded":!!de},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:I},styles:{footer:xt},header:a.default.createElement(w.default,{leftContainer:a.default.createElement((function(){return se?a.default.createElement("span",{onClick:ct},a.default.createElement(_.default,null)):Fe?a.default.createElement("span",{onClick:Ge(!1)},a.default.createElement(_.default,null)):a.default.createElement(x.default,null)}),null),middleContainer:a.default.createElement((function(){return Fe?a.default.createElement("span",{className:Qe.middleHeader},d.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(H.default,{onClick:rt})}),footer:St},lt,yt,pt,vt,ht,gt)))}))};K.propTypes={isFullyExpandedPdp:s.default.bool,isLaunchpad:s.default.bool,isMiniEngagement:s.default.bool},K.defaultProps={isFullyExpandedPdp:!1,isLaunchpad:!1,isMiniEngagement:!1},t.default=K},2629:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DealSummaryNavigationButton=t.DealSummartNavigationDirection=t.DealSummartNavigationButtonTypes=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=s(r(0)),a=s(r(1)),i=s(r(2630)),u=s(r(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.DealSummartNavigationButtonTypes={ROUND:"round",STANDARD:"standard"},l=t.DealSummartNavigationDirection={UP:"up-line-16",DOWN:"down-line-16",RIGHT:"right-line-16",LEFT:"left-line-16"},f={rootRound:{maxWidth:200,borderRadius:100,padding:"9px 27px",boxShadow:"0px 6px 12px rgba(0, 0, 0, 0.08)"},text:{composes:"title0"}},d=function(e){var t=e.type,r=e.direction,a=e.copy,u=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["type","direction","copy"]);return t===c.ROUND?o.default.createElement(i.default,n({text:a,"aria-label":a,classes:{root:f.rootRound},icon:r},u)):o.default.createElement(i.default,n({text:a,"aria-label":a,classes:{text:f.text},icon:r},u))};t.DealSummaryNavigationButton=d,d.propTypes={type:a.default.oneOf(Object.values(c)),copy:a.default.oneOfType([a.default.node,a.default.string]),direction:a.default.oneOf(Object.values(l))},d.defaultProps={type:c.STANDARD,copy:u.default.getMessage("See_deal_summary"),direction:l.RIGHT},t.default=d},2630:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NavigationButton=void 0;var n=s(r(0)),o=s(r(1)),a=r(3),i=r(2),u=s(r(52));function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=(0,a.createUseStyles)({root:function(e){var t=e.background,r=e.classes;return d({display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:9,border:"none",width:"100%"},(void 0===r?{}:r).root||{},{background:t})},text:function(e){var t=e.classes,r=void 0===t?{}:t;return d({paddingRight:6,fontSize:10,fontWeight:600,color:i.Colors.grey600},r.text||{},{verticalAlign:"middle"})}}),h=function(e){var t,r=e.text,o=(e.classes,e.icon),a=e.children,s=l(e,["text","classes","icon","children"]),f=v(e);t=a?"string"==typeof a?n.default.createElement("div",{className:f.text}," ",a," "):a:"string"==typeof r?n.default.createElement("div",{className:f.text}," ",r," "):r;var d="string"==typeof o?n.default.createElement(u.default,{color:i.Colors.grey500,icon:o}):o;return n.default.createElement("button",c({tabIndex:0,"aria-label":"honey-tips-navigation-button",className:f.root},s),t,d)};t.NavigationButton=h,h.propTypes={text:o.default.oneOfType([o.default.string,o.default.node]),icon:o.default.oneOfType([o.default.string,o.default.node]),background:o.default.string,classes:o.default.object,children:o.default.oneOfType([o.default.string,o.default.node])},h.defaultProps={text:null,icon:null,background:"white",classes:{},children:null};var g=h;t.default=g},2631:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(0)),o=c(r(1)),a=r(5),i=c(r(4)),u=c(r(922)),s=r(480);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.onClick,r=(0,a.useDispatch)();return n.default.createElement(u.default,{body:i.default.getMessage("View_More_Tips"),"aria-label":i.default.getMessage("View_More_Tips"),onClick:function(){r((0,s.clickSeeMoreTips)()),t(!0)}})};l.propTypes={onClick:o.default.func},l.defaultProps={onClick:null},t.default=l},2632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(0),a=N(o),i=r(5),u=r(3),s=r(33),c=N(r(4)),l=N(r(6)),f=N(r(88)),d=N(r(31)),p=r(198),v=N(r(240)),h=N(r(13)),g=N(r(549)),y=r(2),m=N(r(544)),b=N(r(548)),w=r(19),E=r(237),_=N(r(960)),x=N(r(351)),S=N(r(219)),O=N(r(2262)),I=N(r(550)),P=N(r(2263)),T=N(r(2384)),R=N(r(484)),k=r(916),C=N(r(758)),M=N(r(2264)),L=N(r(2265)),A=N(r(2266));function N(e){return e&&e.__esModule?e:{default:e}}function j(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var D=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:y.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},launchpadHeader:{borderBottom:"1px solid",borderBottomColor:y.Colors.grey50}}),F=function(){var e=D();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(y.LoadingIcon,null))},U=function(){var e=(0,i.useDispatch)(),t=D(),r=(0,o.useRef)(),u=(0,o.useRef)(),y=(0,o.useState)(!0),N=n(y,1)[0],U=(0,E.useContainerState)(),G=n(U,2),B=G[0],H=G[1],$=(0,E.useContainerOpen)(),V=n($,2),q=V[0],z=V[1],W=(0,R.default)(),Y=n(W,3),X=Y[0],K=Y[1],Q=Y[2],J=(0,x.default)()||[],Z=J.slice(0,4),ee=(0,C.default)(),te=(0,k.useTipInstanceFullscreen)(ee),re=n(te,2)[1],ne=(0,S.default)()||{},oe=f.default.AMAZON_STORES.includes(ne.id),ae=(0,o.useState)(),ie=n(ae,2),ue=ie[0],se=ie[1],ce=(0,o.useState)(!1),le=n(ce,2),fe=le[0],de=le[1],pe=(0,o.useState)(!1),ve=n(pe,2),he=ve[0],ge=ve[1],ye=(0,o.useState)(0),me=n(ye,2),be=me[0],we=me[1],Ee=(0,o.useRef)(!0);(0,o.useEffect)((function(){j(regeneratorRuntime.mark((function e(){var t,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne.id){e.next=11;break}return e.next=3,Promise.all([h.default.getInfo(),h.default.getUserFollow(),h.default.getStoreSessionCount(ne.id)]);case 3:t=e.sent,r=n(t,3),o=r[0],a=r[1],i=r[2],se(o),de(a.includes(ne.id)),we(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[ne.id,ne.storeIcon]),(0,o.useEffect)((function(){J&&J.length>0&&(he||ge(!0))}),[J,he]),(0,o.useEffect)((function(){var e=d.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=ne&&ne.id,r={background:!0};t&&Ee.current&&j(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Ee.current=!1,z(),n.next=4,l.default.send("honeyTips:tips",{action:e,storeId:t},r);case 4:case"end":return n.stop()}}),n,void 0)})))()}),[ne,Ee,z]);var _e,xe=(_e=j(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ue&&ue.isLoggedIn||h.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(r=fe?"UNFOLLOW":"FOLLOW")?e((0,w.storeFollow)()):"UNFOLLOW"===r&&e((0,w.storeUnfollow)()),t.next=5,h.default.updateUserFollow(ne.id,ue.id,r);case 5:n=t.sent,de(n.includes(ne.id));case 7:case"end":return t.stop()}}),t,void 0)}))),function(){return _e.apply(this,arguments)});if(!H)return a.default.createElement(o.Fragment,null);var Se=B&&a.default.createElement(s.LoaderGroup,null)||null,Oe=a.default.createElement(o.Fragment,null,0!==Z.length&&Z.map((function(e,t){var r=!N||t===Z.length-1,n=oe?"1px":"0px";return a.default.createElement("div",{key:e,style:{marginBottom:r?n:"8px"}},a.default.createElement(P.default,null,a.default.createElement(A.default,{isFullyExpandedPdp:!0,tipInstanceId:e},a.default.createElement(_.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card"}))))}))),Ie=ee&&a.default.createElement("div",{style:{minHeight:u.current}},ee?a.default.createElement(_.default,{tipInstanceId:ee,templateType:"fullscreen"}):a.default.createElement(T.default,{yOffset:"45%"}))||null,Pe=B?a.default.createElement(F,null):!X&&!ee&&Oe||null,Te=X&&a.default.createElement("div",{style:{minHeight:u.current}},a.default.createElement(M.default,{isLaunchpad:!ee}))||null;return 0===Z.length?a.default.createElement(o.Fragment,null):a.default.createElement(O.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(s.UniversalContainer,{open:q},a.default.createElement(s.UniversalContainerLayout,{ref:{refContent:r},header:a.default.createElement("div",null,a.default.createElement("div",{className:t.launchpadHeader},a.default.createElement(g.default,{leftContainer:a.default.createElement((function(){return X?a.default.createElement("span",{onClick:Q},a.default.createElement(m.default,null)):ee?a.default.createElement("span",{onClick:re(!1)},a.default.createElement(m.default,null)):a.default.createElement(b.default,null)}),null),middleContainer:a.default.createElement((function(){return ee?a.default.createElement("span",{className:t.middleHeader},c.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(L.default,{onClick:function(){e((0,w.tipContainerActionsClose)())},showFeedback:function(){return K({tipInstanceId:null})}})})),!!ue&&!X&&a.default.createElement(p.StoreFollowUI,{inPopover:!1,store:ne,storeFollowButton:a.default.createElement(v.default,{allowTooltip:!1,isFollowing:fe,isHeaderButton:!0,store:{storeId:ne.id,storeName:ne.name},storeSessionCount:be,subSrc:"launchpad",updateUserFollow:xe,user:ue})})),footer:oe&&a.default.createElement(I.default,{isContainerOpen:q})},Se,Ie,Pe,Te)))})};U.propTypes={},t.default=U},2633:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,n.useSelector)(o.selectCurrentContainerId),t=(0,n.useSelector)((0,a.selectUniversalContainerById)(e))||{},r=t.hasValidLaunchpadTips,i=void 0!==r&&r,u=t.hasValidLaunchpadBadgeTips,s=void 0!==u&&u;return{hasValidLaunchpadTips:i,hasValidLaunchpadBadgeTips:s}};var n=r(5),o=r(20),a=r(14)},2634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(5),a=r(15),i=r(41),u=y(r(919)),s=y(r(921)),c=y(r(2635)),l=y(r(940)),f=y(r(941)),d=y(r(2640)),p=y(r(2643)),v=y(r(2644)),h=y(r(2645)),g=y(r(2647));function y(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e;return(0,u.default)(),(0,s.default)(),(0,h.default)(),(0,g.default)(),(0,c.default)(),(0,l.default)(),(0,f.default)(),(0,d.default)(),e=(0,o.useDispatch)(),(0,n.useEffect)((function(){e(a.storesActions.load()),e(i.userActions.load())}),[e]),(0,p.default)(),(0,v.default)(),null}},2635:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=(0,l.default)("honeyTips:createRelevanceRequest")((function(t){var r=Array.isArray(t)?t:[t],a=n(r,1)[0].data.stateId,i=(0,u.default)();r.forEach((function(t){return e((r=t,function(e){var t=r.fetchedData,n=r.categoryId,a=r.data;if(r.update){var i=a.stateId,u={id:i,data:v({},n,o({},t,{id:i+"_"+n,relevanceStateId:i,categoryId:n}))},c=(0,s.normalize)(u,d.RELEVANCE_STATE);e({type:f.UPDATE_RELEVANCE,data:c})}}));var r})),e((0,c.default)(a,i))}));return function(){t()}}),[e])};var a=r(0),i=r(5),u=p(r(146)),s=r(27),c=p(r(2636)),l=p(r(58)),f=r(538),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(28));function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},2636:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=v(r(146)),a=r(27),i=r(538),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(28)),s=r(14),c=r(937),l=r(938),f=r(480),d=v(r(2637)),p=v(r(2638));function v(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,r){return function(n){var s=Date.now(),c=(0,o.default)(),l={id:c,result:r,relevanceRequest:t,relevanceState:{id:e,relevanceResponseId:c,result:r,updated:s},created:s},d=(0,a.normalize)(l,u.RELEVANCE_RESPONSE);n({type:i.RELEVANCE_RESPONSE,data:d}),n((0,f.setCurrentTips)(c))}},g=function(e){return t=regeneratorRuntime.mark((function t(r,o){var a,i,u,f,v,g,y,m,b,w,E;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,s.selectById)("relevanceRequests")(e)(o()),i=a.relevanceState,u=(0,s.selectAll)("categories")(o()),f=(0,s.selectAll)("tips")(o()),v=Object.keys(f),t.next=7,(0,d.default)(v);case 7:return g=t.sent,y=g.reduce((function(e,t){return n({},e,(r={},o=t,a=f[t],o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r));var r,o,a}),{}),m=(0,s.selectRelevanceStateDataById)(i)(o()),b=o().universalContainer.currentContainerId,t.next=13,(0,p.default)({categoryData:m,getEligibilityFilter:c.getEligibilityFilter,getScoringFn:l.getScoringFn,entities:{categories:u,tips:y},containerId:b,dispatch:r});case 13:w=t.sent,E=w.hits,r(h(i,a,E));case 16:case"end":return t.stop()}}),t,void 0)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e,t){return r.apply(this,arguments)};var t,r};t.default=function(e,t){return function(r,o){var c=(0,s.selectById)("relevanceStates")(e)(o()),l=c.data,f=Date.now(),d={id:t,relevanceState:n({},c,{updated:f,relevanceRequestId:t}),data:l,created:f},p=(0,a.normalize)(d,u.RELEVANCE_REQUEST);r({type:i.RELEVANCE_REQUEST,data:p}),r(g(t))}}},2637:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(946)),o=a(r(945));function a(e){return e&&e.__esModule?e:{default:e}}var i,u,s=function(e){return function(t){return e.indexOf(t)<0}},c=(i=regeneratorRuntime.mark((function e(t){var r,a,i,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.default)();case 2:return r=e.sent,a=r.honeyTipsConfiguration,i=a.blacklistTipIds,u=void 0===i?[]:i,c=t.filter(s(u)),e.next=8,(0,o.default)(c);case 8:return l=e.sent,e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,void 0)})),u=function(){var e=i.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e){return u.apply(this,arguments)});t.default=c},2638:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(27),a=v(r(74)),i=v(r(11)),u=v(r(379)),s=r(196),c=v(r(70)),l=r(28),f=r(29),d=v(r(2639)),p=v(r(153));function v(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var g,y,m,b=(0,s.v4)(),w=(g=h(regeneratorRuntime.mark((function e(t,r){var o,s,c,l=t.debugEvent,f=t.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getCurrent();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return o=e.t0,e.next=8,(0,p.default)();case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:return s=e.t1,c=o.storeId,e.next=15,(0,a.default)({debugEvent:l,action:f},n({},r,{url:window.location.href}),n({store:{id:c},productId:s&&s.id},(0,u.default)()))();case 15:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return g.apply(this,arguments)}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.length===t.length&&e.every((function(e,r){return e===t[r]}));r||w({debugEvent:"tips_api_mismatched_tip_ids",action:"performance_relevanceengine_gettips"},{metricId:b,apiTipIds:t,testTraditionalTipIds:e})},_=function(e){var t=e.categoryData,r=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["categoryData"]),o=r.Tip_id,a=n({},r,{id:o});return n({},t,{id:t.categoryId,tips:[a]})},x=function(e,t){e.forEach((function(e){var r=e.tip,n=_(r),a=(0,o.normalize)(n,l.CATEGORY);t({type:f.SET_CATEGORY,data:a})}))},S=(y=h(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.categoryData,n=t.dispatch,e.next=3,c.default.getTips(r);case 3:return o=e.sent,a=o.hits,i=void 0===a?[]:a,u=o.count,(s=void 0===u?0:u)&&x(i,n),e.abrupt("return",{hits:{hits:i,count:s}});case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return y.apply(this,arguments)}),O=(m=h(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=performance.now(),n=(0,d.default)(t),o=performance.now(),e.next=5,c.default.useAPI();case 5:if(!e.sent){e.next=18;break}return w({debugEvent:"tips_api_performance",action:"performance_relevanceengine_traditional"},{fetchDeltaMs:o-r,metricId:b}),a=performance.now(),e.next=11,S(t);case 11:return i=e.sent,u=performance.now(),w({debugEvent:"tips_api_performance",action:"performance_relevanceengine_api"},{fetchDeltaMs:u-a,metricId:b}),s=n&&n.hits&&n.hits.hits&&n.hits.hits.map((function(e){return e._id}))||[],l=i&&i.hits&&i.hits.hits&&i.hits.hits.map((function(e){return e._id}))||[],E(s,l),e.abrupt("return",i);case 18:return e.abrupt("return",(0,d.default)(t));case 19:case"end":return e.stop()}}),e,void 0)}))),function(e){return m.apply(this,arguments)});t.default=O},2639:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.categoryData,r=void 0===t?{}:t,o=e.getEligibilityFilter,a=void 0===o?function(){}:o,s=e.getScoringFn,c=void 0===s?function(){}:s,l=e.entities,f=void 0===l?{}:l,d=e.containerId,p=e.product,v=void 0===p?{}:p,h=e.dispatch,g=void 0===h?function(){}:h,y=f.categories,m=void 0===y?{}:y,b=f.tips,w=void 0===b?{}:b,E=function(e,t,r){var n=[];for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=e[o];t[o]&&r(o)&&n.push(a)}return n}(m,r,a).map((function(e){var t=e.id,n=Object.values(w).filter((function(e){return e.categoryId===t}));if(n.length<=0)return null;var o=r[t],i=a(t)(o);return n.filter((function(e){return function(e,t){var r=!0;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=t[n],a=e[n];o!==a&&(r=!1)}return r}(e,i)}))[0]})).filter((function(e){return Boolean(e)})).map((function(e){var t=(e||{}).categoryId,o=r[t],a=c(t);return"function"!=typeof a?e:n({},e,{score:a(o,e)})})),_=E.map((function(e){return{_id:e.id,score:e.score,_source:e}})),x=E.map((function(e){return e.id}));(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e}));if(!u&&t)return u=t,!0;if(t.length>0){var r=u.length===t.length&&u.every((function(t,r){return t===e[r]}));return u=t,!r}return!1})(x)&&g((0,i.default)({universalContainerId:d,debugEvent:"offers_miss_rate",action:"performance_relevanceengine_generated_tips"},{productId:v.productId,offer:null,canShowAutoPop:!1,tipCount:E.length,tipHits:_}));return{hits:{count:E.length,hits:_}}};var o,a=r(74),i=(o=a)&&o.__esModule?o:{default:o};var u=null},2640:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useDispatch)();(0,n.useEffect)((function(){var t=(0,a.default)("honeyTips:updateVariant")((function(t){e((0,i.default)(t))}));return function(){t()}}),[e])};var n=r(0),o=r(5),a=u(r(58)),i=u(r(2641));function u(e){return e&&e.__esModule?e:{default:e}}},2641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(11)),o=p(r(10)),a=p(r(13)),i=p(r(152)),u=p(r(2642)),s=p(r(539)),c=p(r(238)),l=r(20),f=r(14),d=r(82);function p(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(r,p){var v,h,g,y,m,b,w,E,_,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v=p(),h=(0,l.selectCurrentContainerId)(v),g=(0,f.selectUniversalContainerById)(h)(v)||{},y=g.relevanceStateId,m=!(0,i.default)(e),t.next=8,(0,c.default)();case 8:return b=t.sent,t.next=11,(0,d.canShowAutoPop)();case 11:return w=t.sent,t.next=14,n.default.getCurrent();case 14:return E=t.sent,_=E&&E.id,t.next=18,a.default.getInfo();case 18:x=t.sent,r((0,u.default)(y,{storeId:_,merchId:m&&e.merchId,variantId:m&&e.variantId,parentId:m&&e.merchId,productId:m&&e.id,product:m&&e,isLaunchpad:b,isAutopop:w,store:E,user:x})),r((0,s.default)({product:e})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),o.default.error(t.t0);case 26:case"end":return t.stop()}}),t,void 0,[[0,23]])})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e,t){return r.apply(this,arguments)};var t,r}},2642:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(27),i=r(6),u=(n=i)&&n.__esModule?n:{default:n},s=r(538),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(28));t.default=function(e,t){return function(r){var n=o({},t,{stateId:e}),i=o({},t,{id:e}),l=(0,a.normalize)(i,c.RELEVANCE_STATE);return r({type:s.UPDATE_VARIANT_IN_RELEVANCE_STATE,data:l}),u.default.send("honeyTips:updateVariantInRelevanceState",n),e}}},2643:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41),o=r(15),a=r(0),i=r(5);t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(n.userSelectors.selectUser()),r=t&&t.id,u=t&&t.isLoggedIn,s=(0,i.useSelector)(o.storesSelectors.selectCurrentStore()),c=s&&s.id,l=s&&s.isDoubleGold;(0,a.useEffect)((function(){r&&c&&u&&l&&e(n.userActions.getDoubleGoldActivationsByUserId(r))}),[e,r,c,u,l])}},2644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.useDispatch)();(0,o.useEffect)((function(){var t=function(t,r){"pre-open"===r.action&&e((0,s.handleUIAction)(r.pathname))};return u.default.addListener("ui:action",t),function(){u.default.removeListener("ui:action",t)}}),[e])};var n,o=r(0),a=r(5),i=r(6),u=(n=i)&&n.__esModule?n:{default:n},s=r(19)},2645:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(5),a=u(r(2646)),i=u(r(58));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,o.useDispatch)();(0,n.useEffect)((function(){var t=(0,i.default)("offers:action")((function(t){var r=t.success.store,n=t.action;"offerActivated"===(void 0===n?"":n)&&e((0,a.default)(r))}));return function(){t()}}),[])}},2646:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(11)),o=i(r(6)),a=r(15);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,n.default.getCurrent();case 4:t.t0=t.sent;case 5:return i=t.t0,r((0,a.update)(i)),t.next=9,o.default.send("honeyTips:updateStore",i);case 9:case"end":return t.stop()}}),t,void 0)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e){return r.apply(this,arguments)};var t,r}},2647:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=void 0,r=void 0,a=(0,u.default)("honeyTips:initDataFetcherFactory")((function(){t=(0,u.default)("honeyTips:createRelevanceState")((function(t){e(n.default.load(t,o.default.getAll()))})),r=(0,u.default)("honeyTips:updateVariantInRelevanceState")((function(t){e(n.default.load(t,o.default.getAll()))}))}));return function(){a(),t&&t(),r&&r()}}),[e])};var n=s(r(2648)),o=s(r(760)),a=r(0),i=r(5),u=s(r(58));function s(e){return e&&e.__esModule?e:{default:e}}},2648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadDependencyData=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(27),i=r(269),u=y(r(10)),s=y(r(8)),c=r(2649),l=r(90),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(28)),d=r(2650),p=r(2386),v=r(961),h=r(2385),g=y(r(2652));function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var b=function(e,t,r){return function(n){var i,u,s,c=(i={type:r,id:e},u=r,s=o({},t,{type:r}),u in i?Object.defineProperty(i,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[u]=s,i),l=(0,a.normalize)(c,f.CATEGORY_DEPENDENCY_DATA);return n({type:"CATEGORY_DEPENDENCY_DATA",data:l}),[l,c]}},w=function(e,t){return r=regeneratorRuntime.mark((function r(o){var a,f,h,y,m,w,E,_,x,S,O;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=void 0,f=g.default[e]||{},h=f.maxTimeout,y=void 0===h?l.DEFAULT_MAX_TIMEOUT:h,r.prev=2,m=g.default[e],w=m.dependsOn,E=m.dataFetcher,r.t0=w,!r.t0){r.next=8;break}return r.next=8,(0,d.waitForDependencies)(w,t.stateId,e);case 8:return r.next=10,(0,c.timeoutPromise)(o(E(t)),{maxTimeout:y}).catch();case 10:return _=r.sent,x=o(b(t.stateId,_,e)),S=n(x,2),O=S[1],r.next=14,(0,p.fireDependencyFinishedEvent)({type:e,status:l.dependencyStatus.SUCCESS,data:_,stateId:t.stateId});case 14:return r.abrupt("return",O);case 17:return r.prev=17,r.t1=r.catch(2),u.default.warn(v.LOG_PREFIX+"fetchDependencyData: Could not load dependency data for "+e),(0,i.getIsProductPage)()&&s.default.sendEvent("tip004036",{debugEvent:"integration_failure",action:"fetchDependencyData",metadata_json:JSON.stringify({type:e,error:r.t1&&r.t1.toString()})}),r.next=23,(0,p.fireDependencyFinishedEvent)({type:e,status:l.dependencyStatus.FAILED,data:null,stateId:t.stateId});case 23:throw r.t1;case 24:return r.prev=24,clearTimeout(a),a=void 0,r.finish(24);case 28:case"end":return r.stop()}}),r,void 0,[[2,17,24,28]])})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e){return o.apply(this,arguments)};var r,o},E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(n){for(var o=(g.default[t]||{}).dependsOn,a=[].concat(m(void 0===o?[]:o));a.length>0;){var i=a.pop(),u=g.default[i].dependsOn,s=void 0===u?[]:u;if(r.has(i))break;n(w(i,e)),r.add(i),a=[].concat(m(s),m(a))}}},_=t.loadDependencyData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r){var n=Array.from(new Set(t));u.default.debug(v.LOG_PREFIX+"loadDependencyData: Loading "+n.join(", "));var o=r((0,d.initializeDependencyListener)(e)),a=n.map((function(t){return r(w(t,e))}));return n.forEach((function(t){return r(E(e,t,new Set(n)))})),Promise.allSettled(a).then((function(t){o(),(0,h.logDependencyStatus)(e,t,!1)}))}};t.default={load:_}},2649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutPromise=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(10),i=(n=a)&&n.__esModule?n:{default:n};var u={logger:function(e){return i.default.debug(e)},maxTimeout:5e3},s=t.timeoutPromise=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=o({},u,t),n=new Promise((function(e,t){var n=setTimeout((function(){clearTimeout(n);var e="honeyTips:util:timeoutPromise Timed out in "+r.maxTimeout+"ms.",o=new Error(e);t(o)}),r.maxTimeout)}));return Promise.race([e,n])};t.default={timeout:s}},2650:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitForDependencies=t.initializeDependencyListener=t.onFinished=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=l(r(58)),a=l(r(10)),i=r(90),u=r(2385),s=r(961),c=r(2386);function l(e){return e&&e.__esModule?e:{default:e}}var f=t.onFinished=function(e){return(0,o.default)(s.FINISHED_EVENT)(e)},d=t.initializeDependencyListener=function(e){return function(t){var r=(0,u.getCategoryDependents)(),o=(0,u.getDependenciesToProcess)();return t(function(e){var t=e.data,r=e.pendingDependencies;return function(e){var o=Object.entries(r).filter((function(e){return 0===n(e,2)[1].size})).map((function(r){var o=n(r,1)[0];return e((0,u.callDataFetcher)(o,t))}));Promise.allSettled(o).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}));(0,c.fireCreateRelevanceRequest)(t)}))}}({data:e,pendingDependencies:o})),f((function(n){var i=n.type,l=n.stateId;return t(function(e){var t=e.data,r=e.type,n=e.pendingDependencies,o=e.categoryDependents,i=e.stateId;return function(e){if(t.stateId===i){var l=o[r];for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var d=l[f],p=n[d];p.delete(r),0===p.size&&e((0,u.callDataFetcher)(d,t)).then(c.fireCreateRelevanceRequest).catch((function(e){a.default.warn(s.LOG_PREFIX+"callDataFetcher: "+r+": "+e)}))}}}}({data:e,type:i,stateId:l,pendingDependencies:o,categoryDependents:r}))}))}},p=t.waitForDependencies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise((function(n,o){var u=new Set(e),c={},l=f((function(e){var f=e.type,d=e.data,p=e.status;if(e.stateId===t){if(u.has(f)&&(u.delete(f),c[f]=d),p===i.dependencyStatus.FAILED)return l(),void o(new Error(""+s.LOG_PREFIX+f+" failed to load"));0===u.size&&(l(),a.default.debug(s.LOG_PREFIX+"waitForDependencies: Successfully loaded dependencies for "+r),n(c))}}))}))};t.default={onFinished:f,waitFor:p,initialize:d}},2651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=i(r(6)),a=i(r(10));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var s,c=new Map,l=function(e){var t=e.categoryId,r=e.fetchedData,n=e.data;o.default.send("honeyTips:createRelevanceRequest",[{categoryId:t,fetchedData:r,data:n,update:!0}])},f=function(e){c.has(e)&&(c.get(e)(),c.delete(e))},d=function(e,t){"function"==typeof t&&c.set(e,t)},p=(s=u(regeneratorRuntime.mark((function e(t){var r,o,i,s,c,p,v,h,g,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,o=t.dataFetcher,i=t.categoryId,s=t.dispatch,f(i),c=void 0,p=function(e){l({categoryId:i,fetchedData:e,data:r})},v=new Promise((function(e,t){c=setTimeout((function(){a.default.debug("Tips:dataFetcher:timeout for:"+i),t(new Error("Timeout"))}),y)})),h=new Promise(function(){var e=u(regeneratorRuntime.mark((function e(t,n){var u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(e){c?(a.default.debug("Tips:dataFetcher:resolved for:"+i),t(e)):(a.default.debug("Tips:dataFetcher:resolved late, running update for:"+i),p(e))},e.next=3,s(o(r,p,{resolve:u,reject:n}));case 3:l=e.sent,d(i,l);case 5:case"end":return e.stop()}}),e,void 0)})));return function(t,r){return e.apply(this,arguments)}}()),g=void 0,e.prev=7,e.next=10,Promise.race([v,h]).then((function(e){return{fetchedData:n({},e),categoryId:i,data:r,update:!!e}}));case 10:g=e.sent;case 11:return e.prev=11,clearTimeout(c),c=void 0,e.finish(11);case 15:return e.abrupt("return",g);case 16:case"end":return e.stop()}}),e,void 0,[[7,,11,15]])}))),function(e){return s.apply(this,arguments)});t.default={createDataFetcherPromise:p,addListener:d,cleanupListener:f,cleanupListeners:function(){c.forEach((function(e){return e()}))}}},2652:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dependencies=void 0;var o,a=r(90),i=r(932),u=(o=i)&&o.__esModule?o:{default:o};function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=t.dependencies=(s(n={},a.dependencyTypes.PRODUCT_CATALOG,{dataFetcher:u.default.productCatalog}),s(n,a.dependencyTypes.PRODUCT_COUPON,{dataFetcher:u.default.productCoupon}),s(n,a.dependencyTypes.OFFERS,{dataFetcher:u.default.offer}),s(n,a.dependencyTypes.DROPLIST,{dataFetcher:u.default.droplist,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),s(n,a.dependencyTypes.PRICE_TREND_PRODUCT,{dataFetcher:u.default.priceTrendProduct,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),n);t.default=c},2653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),a=l(o),i=l(r(1)),u=r(5),s=l(r(10)),c=r(19);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hasError:!1},r}var r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidCatch",value:(r=regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.props.sendSdataEvent,s.default.error(t),r(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=r.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);f.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},f.defaultProps={children:void 0};t.default=(0,u.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipBadgeInjectionError)(t))}}}))(f)},2654:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(0)),o=u(r(1)),a=r(3),i=r(2);function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.createUseStyles)({resetCss:{textTransform:"none",lineHeight:"normal",fontWeight:"normal",color:i.Colors.grey900}}),c=function(e){var t=e.children,r=s();return n.default.createElement("div",{className:r.resetCss},t)};c.propTypes={children:o.default.node},c.defaultProps={children:void 0},t.default=c},2655:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(10)),o=s(r(912)),a=s(r(238)),i=r(82),u=r(269);function s(e){return e&&e.__esModule?e:{default:e}}var c,l="honeyTips:getIsValidLaunchpadPage:";t.default=(c=regeneratorRuntime.mark((function e(){var t,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.canRunTips)({ignorePageTypeCheck:!0});case 2:if(e.sent){e.next=6;break}return n.default.debug(l+" Can't run tips"),e.abrupt("return",!1);case 6:if(t=(0,u.getIsLaunchpadPage)(),n.default.debug(l+" isLaunchpadPage: "+t),t){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,(0,o.default)();case 12:if(r=e.sent,n.default.debug(l+" canShowLaunchpad: "+r),r){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,(0,a.default)();case 18:if(s=e.sent,n.default.debug(l+" canShowLaunchpadWithBlacklist: "+s),s){e.next=22;break}return e.abrupt("return",!1);case 22:return n.default.debug(l+" returning true"),e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this)})),function(){var e=c.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))})},2656:function(e,t,r){"use strict";var n=f(r(10)),o=f(r(6)),a=r(18),i=f(r(58)),u=f(r(2378)),s=r(942),c=r(153),l=f(r(154));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var p,v,h={urlToPageTypeMap:{},parentId:void 0,variantId:void 0},g=function(e){var t=e.parentId,r=e.variantId;h.parentId?h.parentId&&t&&h.parentId===t?h.variantId&&r&&h.variantId!==r?(h.variantId=r,(0,c.setProduct)(e),o.default.send("honeyTips:updateVariant",e)):n.default.debug("honeyTips:pageController:same product, dont update"):(h.parentId=t,h.variantId=r,(0,c.setProduct)(e),o.default.send("honeyTips:updateProduct",e)):(h.parentId=t,h.variantId=r,n.default.debug("honeyTips:pageController:setting initial product"),(0,c.setProduct)(e))};(0,a.productFetcherListener)((p=d(regeneratorRuntime.mark((function e(t){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.default.debug("honeyTips:pageController:product v4"),o.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),e.next=4,(0,l.default)();case 4:r=e.sent,a=r&&r.id,i=(0,s.formatInitialProduct)(t,a),g(i);case 8:case"end":return e.stop()}}),e,void 0)}))),function(e){return p.apply(this,arguments)})),(0,i.default)("current:product")((v=d(regeneratorRuntime.mark((function e(t){var r,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.default.debug("honeyTips:pageController:product v5"),o.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),r=(t||{}).data,e.next=5,(0,l.default)();case 5:a=e.sent,i=a&&a.id,u=(0,s.formatInitialProductV5)(r,i),g(u);case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return v.apply(this,arguments)})),(0,i.default)("honeyTips:updateProduct")((function(){n.default.debug("honeyTips:pageController:updateProduct")})),(0,i.default)("honeyTips:updateVariant")((function(){n.default.debug("honeyTips:pageController:updateVariant")})),(0,i.default)("honeyTips:updateLaunchpad")((function(){n.default.debug("honeyTips:pageController:newLaunchpad")})),(0,i.default)("honeyTips:newPage")((function(){n.default.debug("honeyTips:pageController:newPage")})),(0,i.default)("honeyTips:turnOff")((function(){n.default.debug("honeyTips:pageController:turnOff")})),a.PAGE_TYPES.map((function(e){return(0,i.default)("pageDetected:"+e)((function(){!function(e){var t=e.currPageType,r=u.default.getInitialized(),n=u.default.getInitalizing(),i=new URL(document.URL);h.urlToPageTypeMap[i]||(h.urlToPageTypeMap[i]={}),h.urlToPageTypeMap[i][t]=!0;var s=Object.keys(h.urlToPageTypeMap[i]),c=s.some(a.isProductPage),f=s.some(a.isLaunchpadPage);r||n||(o.default.send("honeyTips:newPage",null),(0,l.default)()),c||f||!r||n||(o.default.send("honeyTips:turnOff",null),h.parentId=null,h.variantId=null,h.isLaunchPad=null),f&&!h.isLaunchPad&&(h.parentId=null,h.variantId=null,h.isLaunchPad=!0,o.default.send("honeyTips:updateLaunchpad",null)),c&&o.default.send("pdp:debug",{eventName:"tips waiting for hpid"},{background:!0,ignoreResponse:!0})}({currPageType:e})}))}))},2657:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(n=S(regeneratorRuntime.mark((function e(t){var r,n,o,i,u,c,h,y,m,w,x,S,A,N,j,D,F,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([d.default.getCurrent(),v.default.getInfo(),v.default.getSetting("tipsEnabled"),(v.default.getUserABGroup("realTimeDroplistTip")||{}).allowNonRegisteredUsers]);case 2:if(r=e.sent,n=a(r,4),o=n[0],i=void 0===o?{}:o,u=n[1],c=void 0===u?{}:u,h=n[2],y=n[3],m=void 0===y||y,w=null,1===h&&i.metadata&&i.metadata.honeyTipsAutopopOn&&!C){e.next=15;break}return e.abrupt("return");case 15:l.default.send("pdp:debug",{eventName:"tips autopop started",storeId:i.id},{ignoreResponse:!0,background:!0}),C=!0,e.t0=i.standDown,e.next="base"===e.t0?20:"nopopup"===e.t0?21:"suspend"===e.t0?21:24;break;case 20:return e.abrupt("break",24);case 21:return l.default.send("pdp:debug",{eventName:"tips stood down",storeId:i.id},{background:!0,ignoreResponse:!0}),M=!0,e.abrupt("return");case 24:if(t!==T.BILLING){e.next=27;break}if(c.isLoggedIn){e.next=27;break}return e.abrupt("return");case 27:if(t!==T.PRODUCT){e.next=44;break}return e.next=30,(0,b.canShowAutoPop)();case 30:if(e.sent){e.next=33;break}return e.abrupt("return");case 33:return e.next=35,(0,E.default)();case 35:if(!e.sent.merchId){e.next=40;break}return e.next=39,(0,_.default)();case 39:w=e.sent;case 40:if((!0===i.metadata.droplist_universal_active||!0===i.metadata.droplist_universal_active_2||w)&&(m||c.isLoggedIn)){e.next=43;break}return l.default.send("pdp:debug",{eventName:"tips cannot autopop",isLoggedIn:c.isLoggedIn},{background:!0}),e.abrupt("return");case 43:l.default.send("pdp:debug",{eventName:"tips autopop got offer"},{background:!0});case 44:return L={creditCardOffers:void 0,lastFetchedTime:void 0,autoPopSetting:{},productId:void 0,productViewCount:void 0,userType:c.isLoggedIn?"registered":"non_registered"},e.next=47,v.default.getUserABGroup("activeHoneyTips");case 47:if(e.t2=e.sent,e.t2){e.next=50;break}e.t2={};case 50:if(e.t1=e.t2.tips,e.t1){e.next=53;break}e.t1={};case 53:if(x=e.t1,0!==Object.keys(x).length){e.next=56;break}return e.abrupt("return");case 56:e.t3=t,e.next=e.t3===T.BILLING?59:e.t3===T.PRODUCT?61:63;break;case 59:return k=x.billFixers&&x.billFixers[i.id]?P.BILL_FIXERS:null,e.abrupt("break",64);case 61:return k=x.realTimeDroplist&&x.realTimeDroplist[i.id]?P.REAL_TIME_DROPLIST:null,e.abrupt("break",64);case 63:k=null;case 64:return e.next=66,f.default.getSetting("autopop:suppression");case 66:if(e.t4=e.sent,e.t4){e.next=69;break}e.t4={};case 69:if(S=e.t4,L.autoPopSetting=S,k!==P.REAL_TIME_DROPLIST){e.next=73;break}return e.abrupt("return");case 73:if(A=(0,s.default)().unix(),"nextTimeToShowTip"in S&&!(A>S.nextTimeToShowTip)){e.next=92;break}if(k!==P.BILL_FIXERS){e.next=90;break}return e.next=78,v.default.getUserABGroup("billFixersAB");case 78:if(e.t5=e.sent,e.t5){e.next=81;break}e.t5={};case 81:return N=e.t5,j=N&&N.group,e.next=85,g.default.checkForCreditCardOffers(i,I.AUTO_POP,!0);case 85:if(0!==(D=e.sent).length){e.next=88;break}return e.abrupt("return");case 88:F=D.filter((function(e){var t=S[e.creditCardOfferId];return!t||t>0&&A>t})),"on"===j?F.length>0&&(U=Object.assign(S,{nextTimeToShowTip:A+O}),f.default.updateSetting("autopop:suppression",U),p.default.open({pathname:"/honey-tips",query:{},state:{creditCardOffers:F,lastFetchedTime:A,tipType:k,storeId:i.id,autoPopSetting:U},force:!1,feature:"honey-tips",surface:"badge"})):R(D,i.id,"control_group");case 90:e.next=100;break;case 92:if(k!==P.BILL_FIXERS){e.next=99;break}return e.next=95,g.default.checkForCreditCardOffers(i,I.AUTO_POP,!0);case 95:R(e.sent,i.id,"suppression"),e.next=100;break;case 99:l.default.send("pdp:debug",{eventName:"tips suppressed",storeId:i.id},{background:!0,ignoreResponse:!0});case 100:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),u=(o=S(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,u,v,g,m,b,E,_,x,S,O,I,T,R,C,A,N,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.default)();case 2:if(r=e.sent,n=j.type,o=j.product,a=(o=void 0===o?{}:o).imprint,i=o.variant_id,u=o.parent_id,v=o.dealScore,g=o.imageUrl,m=o.lastPrice,b=o.canonicalUrl,E=o.storeId,_=o.title,"productFetcher"!==n||!a||!i){e.next=19;break}return e.next=9,d.default.getCurrent();case 9:return x=e.sent,S=(0,c.default)(i),L.productId=u?x.id+"_"+(0,c.default)(u)+"_"+S:x.id+"_"+S+"_"+S,O={productId:L.productId,storeId:x.id},e.next=15,l.default.send("honey-tip:smart-droplist",{action:"incrementNumTimesSeenForProduct",data:O},{background:!0});case 15:I=e.sent,L.productViewCount=I,e.next=30;break;case 19:if("catalogue"!==n){e.next=30;break}if(k===P.REAL_TIME_DROPLIST&&"number"==typeof v){e.next=22;break}return e.abrupt("return");case 22:return T=(0,s.default)().unix(),R={productId:L.productId,imageUrl:g,currentPrice:m,shopUrl:b,title:_,dealScore:v},(C=(L.autoPopSetting||{}).realTimeDroplist)||(C={product:{}},L.autoPopSetting.realTimeDroplist=C),e.next=28,y.default.getRealTimeDroplistHideReason(v,L,T,M,r);case 28:(A=e.sent)?h.default.sendEvent("droplist713",{dropListProduct:R,userType:L.userType,hideReason:A}):(N=C.count+1,C.count=N,C.product[L.productId]={timeLastSeen:T,dealScore:v},p.default.open({pathname:"/honey-tips",query:{},state:{lastFetchedTime:T,autoPopSetting:L.autoPopSetting,droplistProduct:R,storeId:E,tipType:P.REAL_TIME_DROPLIST,userType:L.userType},force:!1,feature:"honey-tips",surface:"badge"}),f.default.updateSetting("autopop:suppression",L.autoPopSetting));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),s=x(r(25)),c=x(r(295)),l=x(r(6)),f=x(r(32)),d=x(r(11)),p=x(r(17)),v=x(r(13)),h=x(r(8)),g=x(r(197)),y=x(r(2658)),m=x(r(511)),b=r(82),w=x(b),E=x(r(153)),_=x(r(272));function x(e){return e&&e.__esModule?e:{default:e}}function S(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var O=m.default.ONE_DAY_IN_SECONDS,I=m.default.SOURCES,P=m.default.TIP_TYPE,T=m.default.PAGE_TYPE;function R(e,t,r){h.default.sendEvent("tip003024",{card_offer_ids:e.map((function(e){return e.creditCardOfferId})),store:{id:t},reason_not_shown:r})}var k=void 0,C=!1,M=!1,L={creditCardOffers:void 0,lastFetchedTime:void 0,autoPopSetting:{},productId:void 0,productViewCount:void 0,userType:void 0};l.default.addListener("stores:session:started",S(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.getCurrent();case 2:return t=e.sent,e.abrupt("return",g.default.checkForCreditCardOffers(t));case 4:case"end":return e.stop()}}),e,void 0)})))),l.default.addListener("pageDetected:BILLING",(function(){return i(T.BILLING)})),l.default.addListener("pageDetected:PRODUCT",(function(){return i(T.PRODUCT)})),l.default.addListener("pageDetected:SHOPIFY_PRODUCT_PAGE",(function(){return i(T.PRODUCT)})),l.default.addListener("droplist:update",u),t.default={creditCardOffers:g.default}},2658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=(n=regeneratorRuntime.mark((function e(t,r,n,o,a){var u,l,f,d,p,v,h,g,y,m,b,w,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.autoPopSetting.realTimeDroplist,l=r.productId,f=r.productViewCount,d=u.product[l]||{},e.next=4,i.default.getUserABGroup("realTimeDroplistTip");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(p=e.t0,v=p.dailyMax,h=void 0===v?5:v,g=p.minDealScoreWithViews,y=void 0===g?5:g,m=p.minDealScoreWithoutViews,b=void 0===m?20:m,w=p.minViews,E=void 0===w?3:w,!a){e.next=11;break}return e.abrupt("return","universal_container_displayed");case 11:if(!o){e.next=13;break}return e.abrupt("return","stand_down");case 13:if(-1!==u.timeToShowNext){e.next=15;break}return e.abrupt("return","opt_out");case 15:if(!(u.timeToShowNext>n)){e.next=17;break}return e.abrupt("return","suppressed");case 17:if(u.count&&!(u.timeCountReset+s<n)){e.next=30;break}if(Object.assign(u,{count:0,timeCountReset:n}),!(d.timeLastSeen+30*s>n)){e.next=24;break}if(!(t<d.dealScore+5)){e.next=22;break}return e.abrupt("return","deal_score");case 22:e.next=28;break;case 24:if((t>=b||t>=y&&f>=E)&&t<=c){e.next=28;break}if(!(f<E&&t>=y)){e.next=27;break}return e.abrupt("return","view_count");case 27:return e.abrupt("return","deal_score");case 28:e.next=39;break;case 30:if(!(u.count>=h)){e.next=32;break}return e.abrupt("return","daily_max");case 32:if(!(d.timeLastSeen+30*s>n)){e.next=37;break}if(!(t<d.dealScore+5)){e.next=35;break}return e.abrupt("return","deal_score");case 35:e.next=39;break;case 37:if(!(t<=b||t>c)){e.next=39;break}return e.abrupt("return","deal_score");case 39:return e.abrupt("return","");case 40:case"end":return e.stop()}}),e,this)})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(e,t,r,n,a){return o.apply(this,arguments)}),i=u(r(13));function u(e){return e&&e.__esModule?e:{default:e}}var s=u(r(511)).default.ONE_DAY_IN_SECONDS,c=75;t.default={getRealTimeDroplistHideReason:a}},2659:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19);function o(){this.installed=!1,this.onUnloadFired=!1}o.prototype.install=function(){var e=this,t=function(t){e.onUnloadFired||(e.onUnloadFired=!0,(0,n.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:"performance_user_unload"},t)())},r=Symbol("OffersPerformance");Object.defineProperty(t,"fnId",{get:function(){return r},configurable:!0}),"function"==typeof window.onunload&&window.onunload.fnId&&window.onunload.fnId===r||(window.onunload=t),"function"==typeof window.onbeforeunload&&window.onbeforeunload.fnId&&window.onbeforeunload.fnId===r||(window.onbeforeunload=t)},o.prototype.uninstall=function(){window.onunload=null,window.onbeforeunload=null};var a=new o;t.default=a},2660:function(e,t,r){"use strict";var n,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(n=regeneratorRuntime.mark((function e(){var t,r,n,o,u,s,p,v,y,m,b,w,E,_,x,S,O,I,P,T,R,k,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([l.default.getCurrent(),c.default.getUserABGroup("pdpPopupEngine")]);case 2:return t=e.sent,r=i(t,2),n=r[0],o=void 0===n?{}:n,u=r[1],p=(s=void 0===u?{}:u).group,v=s.targetPlatform,y=s.targetMinVersion,m=s.targetMaxVersion,e.next=11,l.default.getPdpRegex(o.id);case 11:return b=e.sent,w="control"===p,E="ch"===v,_=g("14.0.0",y,m),x=0,e.next=18,d.default.local.get("HoneyPdpPopup:hide:"+o.id).then((function(e){e&&Date.now()-e.time<e.days?x=1:d.default.local.del("HoneyPdpPopup:hide:"+o.id)})).catch(NotFoundError,(function(){}));case 18:if(S=window.location.href,O=!1,!(b&&Array.isArray(b)&&b.length)){e.next=50;break}I=!0,P=!1,T=void 0,e.prev=24,R=b[Symbol.iterator]();case 26:if(I=(k=R.next()).done){e.next=34;break}if(C=k.value,!(O=h(C,S))){e.next=31;break}return e.abrupt("break",34);case 31:I=!0,e.next=26;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(24),P=!0,T=e.t0;case 40:e.prev=40,e.prev=41,!I&&R.return&&R.return();case 43:if(e.prev=43,!P){e.next=46;break}throw T;case 46:return e.finish(43);case 47:return e.finish(40);case 48:e.next=55;break;case 50:if("string"!=typeof b||!b.trim().length){e.next=54;break}O=h(b,S),e.next=55;break;case 54:return e.abrupt("return");case 55:!w&&O&&!x&&E&&_&&f.default.open({pathname:"/honey-pdp-popup",query:{},state:a({},s,{storeId:o.id}),force:!1,feature:"honey-pdp-popup",surface:"popup"});case 56:case"end":return e.stop()}}),e,this,[[24,36,40,48],[41,,43,47]])})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)}),s=v(r(6)),c=v(r(13)),l=v(r(11)),f=v(r(17)),d=v(r(67)),p=v(r(2661));function v(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return"All PDP"===e||!!t.match(e)}function g(e,t,r){if(r&&t&&e){var n=t+" - "+r;return p.default.satisfies(e,n)}return!1}s.default.addListener("pageDetected:PRODUCT",(function(){u()})),s.default.addListener("pageDetected:SHOPIFY_PRODUCT_PAGE",(function(){u()}))},2661:function(e,t,r){const n=r(554);e.exports={re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r(962).SEMVER_SPEC_VERSION,SemVer:r(194),compareIdentifiers:r(2267).compareIdentifiers,rcompareIdentifiers:r(2267).rcompareIdentifiers,parse:r(555),valid:r(2662),clean:r(2663),inc:r(2664),diff:r(2665),major:r(2666),minor:r(2667),patch:r(2668),prerelease:r(2669),compare:r(371),rcompare:r(2670),compareLoose:r(2671),compareBuild:r(2269),sort:r(2672),rsort:r(2673),gt:r(964),lt:r(2270),eq:r(2268),neq:r(2387),gte:r(2271),lte:r(2272),cmp:r(2388),coerce:r(2674),Comparator:r(2273),Range:r(299),satisfies:r(2389),toComparators:r(2675),maxSatisfying:r(2676),minSatisfying:r(2677),minVersion:r(2678),validRange:r(2679),outside:r(2274),gtr:r(2680),ltr:r(2681),intersects:r(2682)}},2662:function(e,t,r){const n=r(555);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},2663:function(e,t,r){const n=r(555);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},2664:function(e,t,r){const n=r(194);e.exports=(e,t,r,o)=>{"string"==typeof r&&(o=r,r=void 0);try{return new n(e,r).inc(t,o).version}catch(e){return null}}},2665:function(e,t,r){const n=r(555),o=r(2268);e.exports=(e,t)=>{if(o(e,t))return null;{const r=n(e),o=n(t),a=r.prerelease.length||o.prerelease.length,i=a?"pre":"",u=a?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==o[e])return i+e;return u}}},2666:function(e,t,r){const n=r(194);e.exports=(e,t)=>new n(e,t).major},2667:function(e,t,r){const n=r(194);e.exports=(e,t)=>new n(e,t).minor},2668:function(e,t,r){const n=r(194);e.exports=(e,t)=>new n(e,t).patch},2669:function(e,t,r){const n=r(555);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},2670:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>n(t,e,r)},2671:function(e,t,r){const n=r(371);e.exports=(e,t)=>n(e,t,!0)},2672:function(e,t,r){const n=r(2269);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},2673:function(e,t,r){const n=r(2269);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},2674:function(e,t,r){const n=r(194),o=r(555),{re:a,t:i}=r(554);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=a[i.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),a[i.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;a[i.COERCERTL].lastIndex=-1}else r=e.match(a[i.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},2675:function(e,t,r){const n=r(299);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},2676:function(e,t,r){const n=r(194),o=r(299);e.exports=(e,t,r)=>{let a=null,i=null,u=null;try{u=new o(t,r)}catch(e){return null}return e.forEach(e=>{u.test(e)&&(a&&-1!==i.compare(e)||(a=e,i=new n(a,r)))}),a}},2677:function(e,t,r){const n=r(194),o=r(299);e.exports=(e,t,r)=>{let a=null,i=null,u=null;try{u=new o(t,r)}catch(e){return null}return e.forEach(e=>{u.test(e)&&(a&&1!==i.compare(e)||(a=e,i=new n(a,r)))}),a}},2678:function(e,t,r){const n=r(194),o=r(299),a=r(964);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){e.set[t].forEach(e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!a(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})}return r&&e.test(r)?r:null}},2679:function(e,t,r){const n=r(299);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},2680:function(e,t,r){const n=r(2274);e.exports=(e,t,r)=>n(e,t,">",r)},2681:function(e,t,r){const n=r(2274);e.exports=(e,t,r)=>n(e,t,"<",r)},2682:function(e,t,r){const n=r(299);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t))},2685:function(e,t,r){"use strict";var n;r.r(t);var o=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(e){return"string"==typeof e&&i.test(e)},s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));var l,f,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r},p=0,v=0;var h=function(e,t,r){var n=t&&r||0,o=t||new Array(16),i=(e=e||{}).node||l,u=void 0!==e.clockseq?e.clockseq:f;if(null==i||null==u){var s=e.random||(e.rng||a)();null==i&&(i=l=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==u&&(u=f=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:v+1,g=c-p+(h-v)/1e4;if(g<0&&void 0===e.clockseq&&(u=u+1&16383),(g<0||c>p)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,v=h,f=u;var y=(1e4*(268435455&(c+=122192928e5))+h)%4294967296;o[n++]=y>>>24&255,o[n++]=y>>>16&255,o[n++]=y>>>8&255,o[n++]=255&y;var m=c/4294967296*1e4&268435455;o[n++]=m>>>8&255,o[n++]=255&m,o[n++]=m>>>24&15|16,o[n++]=m>>>16&255,o[n++]=u>>>8|128,o[n++]=255&u;for(var b=0;b<6;++b)o[n+b]=i[b];return t||d(o)};var g=function(e){if(!u(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var y=function(e,t,r){function n(e,n,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(n),i.set(e,n.length),(i=r(i))[6]=15&i[6]|t,i[8]=63&i[8]|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=i[u];return o}return d(i)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function m(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function w(e,t,r,n,o,a){return b((i=b(b(t,e),b(n,a)))<<(u=o)|i>>>32-u,r);var i,u}function E(e,t,r,n,o,a,i){return w(t&r|~t&n,e,t,o,a,i)}function _(e,t,r,n,o,a,i){return w(t&n|r&~n,e,t,o,a,i)}function x(e,t,r,n,o,a,i){return w(t^r^n,e,t,o,a,i)}function S(e,t,r,n,o,a,i){return w(r^(t|~n),e,t,o,a,i)}var O=y("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n=0;n<r;n+=8){var o=e[n>>5]>>>n%32&255,a=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[m(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var u=r,s=n,c=o,l=a;r=E(r,n,o,a,e[i],7,-680876936),a=E(a,r,n,o,e[i+1],12,-389564586),o=E(o,a,r,n,e[i+2],17,606105819),n=E(n,o,a,r,e[i+3],22,-1044525330),r=E(r,n,o,a,e[i+4],7,-176418897),a=E(a,r,n,o,e[i+5],12,1200080426),o=E(o,a,r,n,e[i+6],17,-1473231341),n=E(n,o,a,r,e[i+7],22,-45705983),r=E(r,n,o,a,e[i+8],7,1770035416),a=E(a,r,n,o,e[i+9],12,-1958414417),o=E(o,a,r,n,e[i+10],17,-42063),n=E(n,o,a,r,e[i+11],22,-1990404162),r=E(r,n,o,a,e[i+12],7,1804603682),a=E(a,r,n,o,e[i+13],12,-40341101),o=E(o,a,r,n,e[i+14],17,-1502002290),n=E(n,o,a,r,e[i+15],22,1236535329),r=_(r,n,o,a,e[i+1],5,-165796510),a=_(a,r,n,o,e[i+6],9,-1069501632),o=_(o,a,r,n,e[i+11],14,643717713),n=_(n,o,a,r,e[i],20,-373897302),r=_(r,n,o,a,e[i+5],5,-701558691),a=_(a,r,n,o,e[i+10],9,38016083),o=_(o,a,r,n,e[i+15],14,-660478335),n=_(n,o,a,r,e[i+4],20,-405537848),r=_(r,n,o,a,e[i+9],5,568446438),a=_(a,r,n,o,e[i+14],9,-1019803690),o=_(o,a,r,n,e[i+3],14,-187363961),n=_(n,o,a,r,e[i+8],20,1163531501),r=_(r,n,o,a,e[i+13],5,-1444681467),a=_(a,r,n,o,e[i+2],9,-51403784),o=_(o,a,r,n,e[i+7],14,1735328473),n=_(n,o,a,r,e[i+12],20,-1926607734),r=x(r,n,o,a,e[i+5],4,-378558),a=x(a,r,n,o,e[i+8],11,-2022574463),o=x(o,a,r,n,e[i+11],16,1839030562),n=x(n,o,a,r,e[i+14],23,-35309556),r=x(r,n,o,a,e[i+1],4,-1530992060),a=x(a,r,n,o,e[i+4],11,1272893353),o=x(o,a,r,n,e[i+7],16,-155497632),n=x(n,o,a,r,e[i+10],23,-1094730640),r=x(r,n,o,a,e[i+13],4,681279174),a=x(a,r,n,o,e[i],11,-358537222),o=x(o,a,r,n,e[i+3],16,-722521979),n=x(n,o,a,r,e[i+6],23,76029189),r=x(r,n,o,a,e[i+9],4,-640364487),a=x(a,r,n,o,e[i+12],11,-421815835),o=x(o,a,r,n,e[i+15],16,530742520),n=x(n,o,a,r,e[i+2],23,-995338651),r=S(r,n,o,a,e[i],6,-198630844),a=S(a,r,n,o,e[i+7],10,1126891415),o=S(o,a,r,n,e[i+14],15,-1416354905),n=S(n,o,a,r,e[i+5],21,-57434055),r=S(r,n,o,a,e[i+12],6,1700485571),a=S(a,r,n,o,e[i+3],10,-1894986606),o=S(o,a,r,n,e[i+10],15,-1051523),n=S(n,o,a,r,e[i+1],21,-2054922799),r=S(r,n,o,a,e[i+8],6,1873313359),a=S(a,r,n,o,e[i+15],10,-30611744),o=S(o,a,r,n,e[i+6],15,-1560198380),n=S(n,o,a,r,e[i+13],21,1309151649),r=S(r,n,o,a,e[i+4],6,-145523070),a=S(a,r,n,o,e[i+11],10,-1120210379),o=S(o,a,r,n,e[i+2],15,718787259),n=S(n,o,a,r,e[i+9],21,-343485551),r=b(r,u),n=b(n,s),o=b(o,c),a=b(a,l)}return[r,n,o,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(m(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var I=function(e,t,r){var n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return d(n)};function P(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function T(e,t){return e<<t|e>>>32-t}var R=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),u=new Array(i),s=0;s<i;++s){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*s+4*l]<<24|e[64*s+4*l+1]<<16|e[64*s+4*l+2]<<8|e[64*s+4*l+3];u[s]=c}u[i-1][14]=8*(e.length-1)/Math.pow(2,32),u[i-1][14]=Math.floor(u[i-1][14]),u[i-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<i;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=u[f][p];for(var v=16;v<80;++v)d[v]=T(d[v-3]^d[v-8]^d[v-14]^d[v-16],1);for(var h=r[0],g=r[1],y=r[2],m=r[3],b=r[4],w=0;w<80;++w){var E=Math.floor(w/20),_=T(h,5)+P(E,g,y,m)+b+t[E]+d[w]>>>0;b=m,m=y,y=T(g,30)>>>0,g=h,h=_}r[0]=r[0]+h>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));var k=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};r.d(t,"v1",(function(){return h})),r.d(t,"v3",(function(){return O})),r.d(t,"v4",(function(){return I})),r.d(t,"v5",(function(){return R})),r.d(t,"NIL",(function(){return"00000000-0000-0000-0000-000000000000"})),r.d(t,"version",(function(){return k})),r.d(t,"validate",(function(){return u})),r.d(t,"stringify",(function(){return d})),r.d(t,"parse",(function(){return g}))},299:function(e,t,r){class n{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=this.options.loose;e=e.trim();const r=t?u[s.HYPHENRANGELOOSE]:u[s.HYPHENRANGE];e=e.replace(r,_),a("hyphen replace",e),e=e.replace(u[s.COMPARATORTRIM],c),a("comparator trim",e,u[s.COMPARATORTRIM]),e=(e=(e=e.replace(u[s.TILDETRIM],l)).replace(u[s.CARETTRIM],f)).split(/\s+/).join(" ");const n=t?u[s.COMPARATORLOOSE]:u[s.COMPARATOR];return e.split(" ").map(e=>p(e,this.options)).join(" ").split(/\s+/).filter(this.options.loose?e=>!!e.match(n):()=>!0).map(e=>new o(e,this.options))}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>d(r,t)&&e.set.some(e=>d(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new i(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const o=r(2273),a=r(963),i=r(194),{re:u,t:s,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:f}=r(554),d=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every(e=>o.intersects(e,t)),o=n.pop();return r},p=(e,t)=>(a("comp",e,t),e=y(e,t),a("caret",e),e=h(e,t),a("tildes",e),e=b(e,t),a("xrange",e),e=E(e,t),a("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,h=(e,t)=>e.trim().split(/\s+/).map(e=>g(e,t)).join(" "),g=(e,t)=>{const r=t.loose?u[s.TILDELOOSE]:u[s.TILDE];return e.replace(r,(t,r,n,o,i)=>{let u;return a("tilde",e,t,r,n,o,i),v(r)?u="":v(n)?u=`>=${r}.0.0 <${+r+1}.0.0`:v(o)?u=`>=${r}.${n}.0 <${r}.${+n+1}.0`:i?(a("replaceTilde pr",i),u=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0`):u=`>=${r}.${n}.${o} <${r}.${+n+1}.0`,a("tilde return",u),u})},y=(e,t)=>e.trim().split(/\s+/).map(e=>m(e,t)).join(" "),m=(e,t)=>{a("caret",e,t);const r=t.loose?u[s.CARETLOOSE]:u[s.CARET];return e.replace(r,(t,r,n,o,i)=>{let u;return a("caret",e,t,r,n,o,i),v(r)?u="":v(n)?u=`>=${r}.0.0 <${+r+1}.0.0`:v(o)?u="0"===r?`>=${r}.${n}.0 <${r}.${+n+1}.0`:`>=${r}.${n}.0 <${+r+1}.0.0`:i?(a("replaceCaret pr",i),u="0"===r?"0"===n?`>=${r}.${n}.${o}-${i} <${r}.${n}.${+o+1}`:`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0`:`>=${r}.${n}.${o}-${i} <${+r+1}.0.0`):(a("no pr"),u="0"===r?"0"===n?`>=${r}.${n}.${o} <${r}.${n}.${+o+1}`:`>=${r}.${n}.${o} <${r}.${+n+1}.0`:`>=${r}.${n}.${o} <${+r+1}.0.0`),a("caret return",u),u})},b=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map(e=>w(e,t)).join(" ")),w=(e,t)=>{e=e.trim();const r=t.loose?u[s.XRANGELOOSE]:u[s.XRANGE];return e.replace(r,(r,n,o,i,u,s)=>{a("xRange",e,r,n,o,i,u,s);const c=v(o),l=c||v(i),f=l||v(u),d=f;return"="===n&&d&&(n=""),s=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&d?(l&&(i=0),u=0,">"===n?(n=">=",l?(o=+o+1,i=0,u=0):(i=+i+1,u=0)):"<="===n&&(n="<",l?o=+o+1:i=+i+1),r=`${n+o}.${i}.${u}${s}`):l?r=`>=${o}.0.0${s} <${+o+1}.0.0${s}`:f&&(r=`>=${o}.${i}.0${s} <${o}.${+i+1}.0${s}`),a("xRange return",r),r})},E=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[s.STAR],"")),_=(e,t,r,n,o,a,i,u,s,c,l,f,d)=>`${t=v(r)?"":v(n)?`>=${r}.0.0`:v(o)?`>=${r}.${n}.0`:`>=${t}`} ${u=v(s)?"":v(c)?`<${+s+1}.0.0`:v(l)?`<${s}.${+c+1}.0`:f?`<=${s}.${c}.${l}-${f}`:`<=${u}`}`.trim(),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},371:function(e,t,r){const n=r(194);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},553:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2566),t)},554:function(e,t,r){const{MAX_SAFE_COMPONENT_LENGTH:n}=r(962),o=r(963),a=(t=e.exports={}).re=[],i=t.src=[],u=t.t={};let s=0;const c=(e,t,r)=>{const n=s++;o(n,t),u[e]=n,i[n]=t,a[n]=new RegExp(t,r?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${i[u.NUMERICIDENTIFIER]})\\.`+`(${i[u.NUMERICIDENTIFIER]})\\.`+`(${i[u.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.`+`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.`+`(${i[u.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${i[u.NUMERICIDENTIFIER]}|${i[u.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${i[u.NUMERICIDENTIFIERLOOSE]}|${i[u.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${i[u.PRERELEASEIDENTIFIER]}(?:\\.${i[u.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${i[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[u.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${i[u.BUILDIDENTIFIER]}(?:\\.${i[u.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${i[u.MAINVERSION]}${i[u.PRERELEASE]}?${i[u.BUILD]}?`),c("FULL",`^${i[u.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${i[u.MAINVERSIONLOOSE]}${i[u.PRERELEASELOOSE]}?${i[u.BUILD]}?`),c("LOOSE",`^${i[u.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${i[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${i[u.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${i[u.XRANGEIDENTIFIER]})`+`(?:\\.(${i[u.XRANGEIDENTIFIER]})`+`(?:\\.(${i[u.XRANGEIDENTIFIER]})`+`(?:${i[u.PRERELEASE]})?${i[u.BUILD]}?`+")?)?"),c("XRANGEPLAINLOOSE",`[v=\\s]*(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:${i[u.PRERELEASELOOSE]})?${i[u.BUILD]}?`+")?)?"),c("XRANGE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${n}})`+`(?:\\.(\\d{1,${n}}))?`+`(?:\\.(\\d{1,${n}}))?`+"(?:$|[^\\d])"),c("COERCERTL",i[u.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${i[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${i[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${i[u.LONECARET]}${i[u.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${i[u.LONECARET]}${i[u.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${i[u.GTLT]}\\s*(${i[u.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]}|${i[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${i[u.XRANGEPLAIN]})`+"\\s+-\\s+"+`(${i[u.XRANGEPLAIN]})`+"\\s*$"),c("HYPHENRANGELOOSE",`^\\s*(${i[u.XRANGEPLAINLOOSE]})`+"\\s+-\\s+"+`(${i[u.XRANGEPLAINLOOSE]})`+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*")},555:function(e,t,r){const{MAX_LENGTH:n}=r(962),{re:o,t:a}=r(554),i=r(194);e.exports=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof i)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[a.LOOSE]:o[a.FULL]).test(e))return null;try{return new i(e,t)}catch(e){return null}}},865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,t.logger={info:function(e,t){}}},866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var n=r(2561),o=function(){function e(e){var t=void 0===e?{}:e,r=t.value,o=t.replay;this.storage={},this.lastValue=r,this.replay=o||!1,this.uniqid=n.uniqid()}return e.prototype.next=function(e){var t=this.storage;Object.keys(t).forEach((function(r){return t[r](e)})),this.lastValue=e},e.prototype.subscribe=function(e){var t=this,r=this.uniqid();return this.storage[r]=e,this.replay&&setTimeout((function(){t.storage[r]&&t.storage[r](t.lastValue)}),0),{dispose:function(){delete t.storage[r]}}},e}();t.Observable=o},867:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformHandle=void 0,function(e){e.Safari="safari",e.Chrome="chrome",e.Browser="browser",e.Unknown="unknown"}(t.PlatformHandle||(t.PlatformHandle={}))},958:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRAME_TRANPORT_IDS=t.FRAME_TRANSPORT_ACTIONS=t.MESSAGE_ACTIONS=t.SCRIPT_IDS=void 0;var n="CHECKOUT_EXTENSION_OBSEVATION",o={PAGE_TO_CONTENT_TRANSPORT:n+"_PAGE_TO_CONTENT_TRANSPORT"};t.FRAME_TRANPORT_IDS=o;var a={PAGE_TO_CONTENT_EVENT:n+"_PAGE_TO_CONTENT_EVENT"};t.FRAME_TRANSPORT_ACTIONS=a;var i={COLLECT_DATA:n+"_COLLECT_DATA",ENABLE_BG_SERVER:n+"_ENABLE_BG_SERVER",CONTENT_TO_BG_EVENT:n+"_PAGE_TO_CONTENT_EVENT"};t.MESSAGE_ACTIONS=i;t.SCRIPT_IDS={HONEY_ANALYTICS_CONFIG:"928a0802-4adc-4e55-9c29-45515240b713"}},959:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerBase=t.ManagerBase=void 0;var o=r(2534);Object.defineProperty(t,"ManagerBase",{enumerable:!0,get:function(){return n(o).default}});var a=r(2535);Object.defineProperty(t,"ServerBase",{enumerable:!0,get:function(){return n(a).default}})},960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(0),i=l(a),u=l(r(1)),s=r(936),c=r(543);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t=e.tipInstanceId,r=e.templateType,u=e.isSecondary,l=void 0!==u&&u,f=e.hideCaret,d=void 0!==f&&f,p=e.isTeaser,v=void 0!==p&&p,h=e.scrollToCard,g=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["tipInstanceId","templateType","isSecondary","hideCaret","isTeaser","scrollToCard"]),y=(0,c.useTip)(t),m=o(y,1)[0].template;if(!m)return i.default.createElement(a.Fragment,null);var b=(0,s.getTemplate)(m);if(!b)return i.default.createElement(a.Fragment,null);var w=b[r];if(!w)return i.default.createElement(a.Fragment,null);var E=n({tipInstanceId:t,isSecondary:l,hideCaret:d,scrollToCard:h,isTeaser:v,templateType:r},g);return"card"===r?i.default.createElement("div",null,i.default.createElement(w,E)):i.default.createElement(w,E)};f.propTypes={tipInstanceId:u.default.string.isRequired,templateType:u.default.string.isRequired},t.default=f},961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.FINISHED_EVENT="honeyTips:dependency:finished",o=t.CREATE_RELEVANCE_REQUEST="honeyTips:createRelevanceRequest",a=t.LOG_PREFIX="honeyTips:categories:dependencies:";t.default={FINISHED_EVENT:n,CREATE_RELEVANCE_REQUEST:o,LOG_PREFIX:a}},962:function(e,t){const r=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:r,MAX_SAFE_COMPONENT_LENGTH:16}},963:function(e,t,r){(function(t){const r="object"==typeof t&&t.env&&t.env.NODE_DEBUG&&/\bsemver\b/i.test(t.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=r}).call(this,r(118))},964:function(e,t,r){const n=r(371);e.exports=(e,t,r)=>n(e,t,r)>0}});